<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="The Redefine Team">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://evan.beee.top" crossorigin>
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://wjp527.github.io/2023/04/30/vue 案例/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="Vue 案例&#x3D;&#x3D;拍照上传&#x3D;&#x3D;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://wjp527.github.io/2023/04/30/Vue%20%E6%A1%88%E4%BE%8B/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Vue 案例&#x3D;&#x3D;拍照上传&#x3D;&#x3D;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="c:/Users/吴俊澎/AppData/Roaming/Typora/typora-user-images/image-20220410150223777.png">
<meta property="og:image" content="c:/Users/吴俊澎/AppData/Roaming/Typora/typora-user-images/image-20220410150237728.png">
<meta property="og:image" content="d:/前端/笔记/typora/好嗨哦/WEB/Vue/echarts主题更改.png">
<meta property="og:image" content="d:/前端/笔记/typora/md/WEB/Vue/生成sha1证书.png">
<meta property="article:published_time" content="2023-04-30T06:31:50.752Z">
<meta property="article:modified_time" content="2023-04-04T07:05:09.383Z">
<meta property="article:author" content="wjp">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="c:/Users/吴俊澎/AppData/Roaming/Typora/typora-user-images/image-20220410150223777.png">
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/images/redefine-favicon.svg" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/redefine-favicon.svg">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/images/redefine-favicon.svg">
    <!--- Page Info-->
    
    <title>
        
        Theme Redefine
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/assets/fonts.css">

    <!--- Font Part-->
    
    
    
    

    <!--- Inject Part-->
    
    <script id="hexo-configurations">
    let Global = window.Global || {};
    Global.hexo_config = {"hostname":"wjp527.github.io","root":"/","language":"en"};
    Global.theme_config = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[""]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":true,"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"busuanzi_counter":{"enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"pjax":true,"open_graph":true},"home_banner":{"enable":true,"image":{"light":"/images/wallhaven-wqery6-light.webp","dark":"/images/wallhaven-wqery6-dark.webp"},"title":"Theme Redefine","subtitle":{"text":[],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":false,"links":{"github":null,"instagram":null,"zhihu":null,"twitter":null,"email":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null}]},"mermaid":{"enable":false,"version":"9.3.0"}},"version":"2.1.2","navbar":{"auto_hide":false,"color":{"left":"#f78736","right":"#367df7","transparency":35},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"}},"search":{"enable":false,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"links":null},"article_date_format":"auto","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}}};
    Global.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="main-content-container">

        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                
                Theme Redefine
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        HOME
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer">
        <ul class="drawer-navbar-list">
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                HOME
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            
            
                <div class="article-title">
                    <h1 class="article-title-regular"></h1>
                </div>
            
                
            

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="/images/redefine-avatar.svg">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">The Redefine Team</span>
                            
                                <span class="author-label"></span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-04-30 14:31:50</span>
        <span class="mobile">2023-04-30 14:31</span>
        <span class="hover-info">Created</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-04-04 15:05:09</span>
            <span class="mobile">2023-04-04 15:05</span>
            <span class="hover-info">Updated</span>
        </span>
    

    
    

    
    
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <h1 id="Vue-案例"><a href="#Vue-案例" class="headerlink" title="Vue 案例"></a>Vue 案例</h1><h1 id="拍照上传"><a href="#拍照上传" class="headerlink" title="==拍照上传=="></a>==拍照上传==</h1><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;w&quot;&gt;</span><br><span class="line">    &lt;!-- &lt;headers&gt;&lt;/headers&gt;</span><br><span class="line">    &lt;fieldset class=&quot;file&quot;&gt;</span><br><span class="line">      &lt;legend&gt;人脸识别 - 人脸录入&lt;/legend&gt;</span><br><span class="line">    &lt;/fieldset&gt; --&gt;</span><br><span class="line">    &lt;!--&lt;el-input type=&quot;text&quot; v-model=&quot;imgSrc&quot; /&gt;--&gt;</span><br><span class="line">    &lt;el-col :span=&quot;1.5&quot;&gt;</span><br><span class="line">      &lt;el-button @click=&quot;onTake&quot; icon=&quot;el-icon-camera&quot; size=&quot;small&quot;&gt;</span><br><span class="line">        打卡签到</span><br><span class="line">      &lt;/el-button&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">    &lt;!--拍照后显示图片--&gt;</span><br><span class="line">    &lt;!--&lt;el-form-item label=&quot;&quot; prop=&quot;imgSrc&quot;&gt;</span><br><span class="line">      &lt;img v-if=&quot;imgSrc&quot;  :src=&quot;imgSrc&quot; style=&quot;width: 200px;height: 240px;&quot; /&gt;</span><br><span class="line">    &lt;/el-form-item&gt;--&gt;</span><br><span class="line">    &lt;!--拍照模态框--&gt;</span><br><span class="line">    &lt;el-dialog</span><br><span class="line">      title=&quot;拍照上传&quot;</span><br><span class="line">      :visible.sync=&quot;visible&quot;</span><br><span class="line">      @close=&quot;onCancel&quot;</span><br><span class="line">      width=&quot;1065px&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">        &lt;video</span><br><span class="line">          id=&quot;videoCamera&quot;</span><br><span class="line">          class=&quot;canvas&quot;</span><br><span class="line">          :width=&quot;videoWidth&quot;</span><br><span class="line">          :height=&quot;videoHeight&quot;</span><br><span class="line">          autoPlay</span><br><span class="line">        &gt;&lt;/video&gt;</span><br><span class="line">        &lt;canvas</span><br><span class="line">          id=&quot;canvasCamera&quot;</span><br><span class="line">          class=&quot;canvas&quot;</span><br><span class="line">          :width=&quot;videoWidth&quot;</span><br><span class="line">          :height=&quot;videoHeight&quot;</span><br><span class="line">        &gt;&lt;/canvas&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div slot=&quot;footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click=&quot;drawImage&quot; icon=&quot;el-icon-camera&quot; size=&quot;small&quot;&gt;</span><br><span class="line">          拍照</span><br><span class="line">        &lt;/el-button&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          v-if=&quot;os&quot;</span><br><span class="line">          @click=&quot;getCompetence&quot;</span><br><span class="line">          icon=&quot;el-icon-video-camera&quot;</span><br><span class="line">          size=&quot;small&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          打开摄像头</span><br><span class="line">        &lt;/el-button&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          v-else</span><br><span class="line">          @click=&quot;stopNavigator&quot;</span><br><span class="line">          icon=&quot;el-icon-switch-button&quot;</span><br><span class="line">          size=&quot;small&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          关闭摄像头</span><br><span class="line">        &lt;/el-button&gt;</span><br><span class="line">        &lt;el-button @click=&quot;resetCanvas&quot; icon=&quot;el-icon-refresh&quot; size=&quot;small&quot;&gt;</span><br><span class="line">          重置</span><br><span class="line">        &lt;/el-button&gt;</span><br><span class="line">        &lt;el-button @click=&quot;onCancel&quot; icon=&quot;el-icon-circle-close&quot; size=&quot;small&quot;&gt;</span><br><span class="line">          完成</span><br><span class="line">        &lt;/el-button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;XXX&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      visible: false, //弹窗</span><br><span class="line">      loading: false, //上传按钮加载</span><br><span class="line">      os: false, //控制摄像头开关</span><br><span class="line">      thisVideo: null,</span><br><span class="line">      thisContext: null,</span><br><span class="line">      thisCancas: null,</span><br><span class="line">      videoWidth: 500,</span><br><span class="line">      videoHeight: 400,</span><br><span class="line">      postOptions: [],</span><br><span class="line">      CertCtl: &quot;&quot;,</span><br><span class="line">      // 遮罩层</span><br><span class="line">      loading: true,</span><br><span class="line">      // 选中数组</span><br><span class="line">      ids: [],</span><br><span class="line">      // 非单个禁用</span><br><span class="line">      single: true,</span><br><span class="line">      // 非多个禁用</span><br><span class="line">      multiple: true,</span><br><span class="line">      // 总条数</span><br><span class="line">      total: 0,</span><br><span class="line">      // 项目人员表格数据</span><br><span class="line">      akworkerList: [],</span><br><span class="line">      //工种类别数据字典</span><br><span class="line">      workerTypeOptions: [],</span><br><span class="line">      // 弹出层标题</span><br><span class="line">      title: &quot;&quot;,</span><br><span class="line">      // 是否显示弹出层</span><br><span class="line">      open: false,</span><br><span class="line">      // 查询参数</span><br><span class="line">      queryParams: &#123;</span><br><span class="line">        pageNum: 1,</span><br><span class="line">        pageSize: 10,</span><br><span class="line">        imgSrc: undefined,</span><br><span class="line">      &#125;,</span><br><span class="line">      // 表单参数</span><br><span class="line">      form: &#123;&#125;,</span><br><span class="line">      // 表单校验</span><br><span class="line">      rules: &#123;&#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;&#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    /*调用摄像头拍照开始*/</span><br><span class="line">    onTake() &#123;</span><br><span class="line">      this.visible = true;</span><br><span class="line">      this.getCompetence();</span><br><span class="line">    &#125;,</span><br><span class="line">    onCancel() &#123;</span><br><span class="line">      this.visible = false;</span><br><span class="line">      /* this.resetCanvas();*/</span><br><span class="line">      this.stopNavigator();</span><br><span class="line">    &#125;,</span><br><span class="line">    // 调用摄像头权限</span><br><span class="line">    getCompetence() &#123;</span><br><span class="line">      //必须在model中render后才可获取到dom节点,直接获取无法获取到model中的dom节点</span><br><span class="line">      this.$nextTick(() =&gt; &#123;</span><br><span class="line">        const _this = this;</span><br><span class="line">        this.os = false; //切换成关闭摄像头</span><br><span class="line">        this.thisCancas = document.getElementById(&quot;canvasCamera&quot;);</span><br><span class="line">        this.thisContext = this.thisCancas.getContext(&quot;2d&quot;);</span><br><span class="line">        this.thisVideo = document.getElementById(&quot;videoCamera&quot;);</span><br><span class="line">        // 旧版本浏览器可能根本不支持mediaDevices，我们首先设置一个空对象</span><br><span class="line">        if (navigator.mediaDevices === undefined) &#123;</span><br><span class="line">          navigator.menavigatordiaDevices = &#123;&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        // 一些浏览器实现了部分mediaDevices，我们不能只分配一个对象</span><br><span class="line">        // 使用getUserMedia，因为它会覆盖现有的属性。</span><br><span class="line">        // 这里，如果缺少getUserMedia属性，就添加它。</span><br><span class="line">        if (navigator.mediaDevices.getUserMedia === undefined) &#123;</span><br><span class="line">          navigator.mediaDevices.getUserMedia = function (constraints) &#123;</span><br><span class="line">            // 首先获取现存的getUserMedia(如果存在)</span><br><span class="line">            let getUserMedia =</span><br><span class="line">              navigator.webkitGetUserMedia ||</span><br><span class="line">              navigator.mozGetUserMedia ||</span><br><span class="line">              navigator.getUserMedia;</span><br><span class="line">            // 有些浏览器不支持，会返回错误信息</span><br><span class="line">            // 保持接口一致</span><br><span class="line">            if (!getUserMedia) &#123;</span><br><span class="line">              return Promise.reject(</span><br><span class="line">                new Error(&quot;getUserMedia is not implemented in this browser&quot;)</span><br><span class="line">              );</span><br><span class="line">            &#125;</span><br><span class="line">            // 否则，使用Promise将调用包装到旧的navigator.getUserMedia</span><br><span class="line">            return new Promise(function (resolve, reject) &#123;</span><br><span class="line">              getUserMedia.call(navigator, constraints, resolve, reject);</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        const constraints = &#123;</span><br><span class="line">          audio: false,</span><br><span class="line">          video: &#123;</span><br><span class="line">            width: _this.videoWidth,</span><br><span class="line">            height: _this.videoHeight,</span><br><span class="line">            transform: &quot;scaleX(-1)&quot;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;;</span><br><span class="line">        navigator.mediaDevices</span><br><span class="line">          .getUserMedia(constraints)</span><br><span class="line">          .then(function (stream) &#123;</span><br><span class="line">            // 旧的浏览器可能没有srcObject</span><br><span class="line">            if (&quot;srcObject&quot; in _this.thisVideo) &#123;</span><br><span class="line">              _this.thisVideo.srcObject = stream;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">              // 避免在新的浏览器中使用它，因为它正在被弃用。</span><br><span class="line">              _this.thisVideo.src = window.URL.createObjectURL(stream);</span><br><span class="line">            &#125;</span><br><span class="line">            _this.thisVideo.onloadedmetadata = function (e) &#123;</span><br><span class="line">              _this.thisVideo.play();</span><br><span class="line">            &#125;;</span><br><span class="line">          &#125;)</span><br><span class="line">          .catch((err) =&gt; &#123;</span><br><span class="line">            this.$notify(&#123;</span><br><span class="line">              title: &quot;警告&quot;,</span><br><span class="line">              message: &quot;没有开启摄像头权限或浏览器版本不兼容.&quot;,</span><br><span class="line">              type: &quot;warning&quot;,</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    //绘制图片</span><br><span class="line">    drawImage() &#123;</span><br><span class="line">      // 点击，canvas画图</span><br><span class="line">      this.thisContext.drawImage(</span><br><span class="line">        this.thisVideo,</span><br><span class="line">        0,</span><br><span class="line">        0,</span><br><span class="line">        this.videoWidth,</span><br><span class="line">        this.videoHeight</span><br><span class="line">      );</span><br><span class="line">      // 获取图片base64链接</span><br><span class="line">      this.imgSrc = this.thisCancas.toDataURL(&quot;image/png&quot;);</span><br><span class="line">      /*const imgSrc=this.imgSrc;*/</span><br><span class="line">    &#125;,</span><br><span class="line">    //清空画布</span><br><span class="line">    clearCanvas(id) &#123;</span><br><span class="line">      let c = document.getElementById(id);</span><br><span class="line">      let cxt = c.getContext(&quot;2d&quot;);</span><br><span class="line">      cxt.clearRect(0, 0, c.width, c.height);</span><br><span class="line">    &#125;,</span><br><span class="line">    //重置画布</span><br><span class="line">    resetCanvas() &#123;</span><br><span class="line">      this.imgSrc = &quot;&quot;;</span><br><span class="line">      this.clearCanvas(&quot;canvasCamera&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    //关闭摄像头</span><br><span class="line">    stopNavigator() &#123;</span><br><span class="line">      if (this.thisVideo &amp;&amp; this.thisVideo !== null) &#123;</span><br><span class="line">        this.thisVideo.srcObject.getTracks()[0].stop();</span><br><span class="line">        this.os = true; //切换成打开摄像头</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    /*调用摄像头拍照结束*/</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>



<h1 id="token-加不上的原因"><a href="#token-加不上的原因" class="headerlink" title="==token==加不上的原因"></a>==token==加不上的原因</h1><h2 id="重点"><a href="#重点" class="headerlink" title="重点:"></a>重点:</h2><p><code> axios.defaults.headers.post[&#39;Content-Type&#39;]=&#39;application/x-www-form-urlencoded;charset=UTF-8&#39;;</code></p>
<p><code>config.headers[&#39;token&#39;] = token;</code> </p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求拦截</span></span><br><span class="line">axios.<span class="property">interceptors</span>.<span class="property">request</span>.<span class="title function_">use</span>(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 改变请求头Content-Type的类型</span></span><br><span class="line">    axios.<span class="property">defaults</span>.<span class="property">headers</span>.<span class="property">post</span>[<span class="string">&#x27;Content-Type&#x27;</span>] = <span class="string">&#x27;application/x-www-form-urlencoded;charset=UTF-8&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;token&quot;</span>)</span><br><span class="line">    <span class="comment">// 取token</span></span><br><span class="line">    <span class="comment">// 请求头 - token</span></span><br><span class="line">    <span class="comment">// 不加上这句的话就,就取不到token</span></span><br><span class="line">    config.<span class="property">headers</span>[<span class="string">&#x27;token&#x27;</span>] = token;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(token);</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err, <span class="string">&#x27;拦截器异常&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> err</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></div>



<h1 id="富文本编辑器"><a href="#富文本编辑器" class="headerlink" title="==富文本编辑器=="></a>==富文本编辑器==</h1><p><code>npm install vue-quill-editor </code></p>
<p>main.js</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 全局挂载 VueQuillEditor</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueQuillEditor</span> <span class="keyword">from</span> <span class="string">&#x27;vue-quill-editor&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;quill/dist/quill.core.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;quill/dist/quill.snow.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;quill/dist/quill.bubble.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueQuillEditor</span>)</span><br></pre></td></tr></table></figure></div>



<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;local-quill-editor&quot;&gt;</span><br><span class="line">    &lt;quill-editor id=&quot;click&quot; ref=&quot;myLQuillEditor&quot; v-model=&quot;content&quot; :options=&quot;editorOption&quot; class=&quot;editor&quot; @blur=&quot;onEditorBlur&quot; @focus=&quot;onEditorFocus&quot; @change=&quot;onEditorChange&quot;&gt;&gt;&lt;/quill-editor&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 引入样式和quillEditor</span><br><span class="line">import &#x27;quill/dist/quill.core.css&#x27;</span><br><span class="line">import &#x27;quill/dist/quill.snow.css&#x27;</span><br><span class="line">import &#x27;quill/dist/quill.bubble.css&#x27;</span><br><span class="line"></span><br><span class="line">import &#123; quillEditor &#125; from &#x27;vue-quill-editor&#x27;</span><br><span class="line"></span><br><span class="line">// 工具栏配置项</span><br><span class="line">const toolbarOptions = [</span><br><span class="line">  // 加粗 斜体 下划线 删除线 -----[&#x27;bold&#x27;, &#x27;italic&#x27;, &#x27;underline&#x27;, &#x27;strike&#x27;]</span><br><span class="line">  [&#x27;bold&#x27;, &#x27;italic&#x27;, &#x27;underline&#x27;, &#x27;strike&#x27;],</span><br><span class="line">  // 引用  代码块-----[&#x27;blockquote&#x27;, &#x27;code-block&#x27;]</span><br><span class="line">  [&#x27;code-block&#x27;][</span><br><span class="line">    // 1、2 级标题-----[&#123; header: 1 &#125;, &#123; header: 2 &#125;]</span><br><span class="line">    (&#123; header: 1 &#125;, &#123; header: 2 &#125;)</span><br><span class="line">  ],</span><br><span class="line">  // 有序、无序列表-----[&#123; list: &#x27;ordered&#x27; &#125;, &#123; list: &#x27;bullet&#x27; &#125;]</span><br><span class="line">  [&#123; list: &#x27;ordered&#x27; &#125;, &#123; list: &#x27;bullet&#x27; &#125;],</span><br><span class="line">  // // 上标/下标-----[&#123; script: &#x27;sub&#x27; &#125;, &#123; script: &#x27;super&#x27; &#125;]</span><br><span class="line">  [&#123; script: &#x27;sub&#x27; &#125;, &#123; script: &#x27;super&#x27; &#125;],</span><br><span class="line">  // // 缩进-----[&#123; indent: &#x27;-1&#x27; &#125;, &#123; indent: &#x27;+1&#x27; &#125;]</span><br><span class="line">  [&#123; indent: &#x27;-1&#x27; &#125;, &#123; indent: &#x27;+1&#x27; &#125;],</span><br><span class="line">  // // 文本方向-----[&#123;&#x27;direction&#x27;: &#x27;rtl&#x27;&#125;]</span><br><span class="line">  [&#123; direction: &#x27;rtl&#x27; &#125;],</span><br><span class="line">  // // 字体大小-----[&#123; size: [&#x27;small&#x27;, false, &#x27;large&#x27;, &#x27;huge&#x27;] &#125;]</span><br><span class="line">  [&#123; size: [&#x27;small&#x27;, false, &#x27;large&#x27;, &#x27;huge&#x27;] &#125;],</span><br><span class="line">  // // 标题-----[&#123; header: [1, 2, 3, 4, 5, 6, false] &#125;]</span><br><span class="line">  [&#123; header: [1, 2, 3, 4, 5, 6, false] &#125;],</span><br><span class="line">  // // 字体颜色、字体背景颜色-----[&#123; color: [] &#125;, &#123; background: [] &#125;]</span><br><span class="line">  [&#123; color: [] &#125;, &#123; background: [] &#125;],</span><br><span class="line">  // // 字体种类-----[&#123; font: [] &#125;]</span><br><span class="line">  [&#123; font: [] &#125;],</span><br><span class="line">  // // 对齐方式-----[&#123; align: [] &#125;]</span><br><span class="line">  [&#123; align: [] &#125;],</span><br><span class="line">  // // 清除文本格式-----[&#x27;clean&#x27;]</span><br><span class="line">  [&#x27;clean&#x27;],</span><br><span class="line">  // // 链接、图片、视频-----[&#x27;link&#x27;, &#x27;image&#x27;, &#x27;video&#x27;]</span><br><span class="line">  [&#x27;image&#x27;, &#x27;video&#x27;]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;LocalQuillEditor&#x27;,</span><br><span class="line">  // 注册 quillEditor</span><br><span class="line">  components: &#123;</span><br><span class="line">    quillEditor</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.OnClick()</span><br><span class="line">    this.onEditorBlur()</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      content: &#x27;&#x27;,</span><br><span class="line">      editorOption: &#123;</span><br><span class="line">        modules: &#123;</span><br><span class="line">          toolbar: toolbarOptions</span><br><span class="line">        &#125;,</span><br><span class="line">        theme: &#x27;snow&#x27;,</span><br><span class="line">        placeholder: &#x27;请输入代码&#x27;</span><br><span class="line">        // Some Quill optiosn...</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // 失去焦点事件</span><br><span class="line">    // OnClick() &#123;</span><br><span class="line">    //   this.$nextTick(() =&gt; &#123;</span><br><span class="line">    //     this.$refs.myLQuillEditor.$el.addEventListener(&#x27;click&#x27;, () =&gt; &#123;</span><br><span class="line">    //       this.drawer = true</span><br><span class="line">    //     &#125;)</span><br><span class="line">    //     // console.log(this.$refs.myLQuillEditor.:</span><br><span class="line">    //   &#125;)</span><br><span class="line">    // &#125;,</span><br><span class="line">    onEditorBlur(e) &#123;</span><br><span class="line">      console.log(&#x27;onEditorBlur: &#x27;, e)</span><br><span class="line">    &#125;,</span><br><span class="line">    // 获得焦点事件</span><br><span class="line">    onEditorFocus(e) &#123;</span><br><span class="line">      console.log(&#x27;onEditorFocus: &#x27;, e)</span><br><span class="line">    &#125;,</span><br><span class="line">    // 内容改变事件</span><br><span class="line">    onEditorChange(e) &#123;</span><br><span class="line">      console.log(&#x27;onEditorChange: &#x27;, e)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;css&quot;&gt;</span><br><span class="line">.editor &#123;</span><br><span class="line">  height: 500px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>



<h1 id="代码编辑器"><a href="#代码编辑器" class="headerlink" title="==代码编辑器=="></a>==代码编辑器==</h1><p><a class="link"   target="_blank" rel="noopener" href="https://www.jianshu.com/p/6fc16bbb7434" >vue2-ace-editor使用 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p><code>npm install --save-dev vue2-ace-editor</code></p>
<p><code>子组件</code></p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;echart-pie-wrap&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;myEditorTop&quot;&gt;&#123;&#123; title &#125;&#125; [读/写]&lt;/div&gt;</span><br><span class="line">    &lt;editor</span><br><span class="line">      ref=&quot;myEditor&quot;</span><br><span class="line">      @init=&quot;editorInit&quot;</span><br><span class="line">      :value=&quot;value&quot;</span><br><span class="line">      :lang=&quot;language&quot;</span><br><span class="line">      theme=&quot;monokai&quot;</span><br><span class="line">      :options=&quot;options&quot;</span><br><span class="line">    &gt;&lt;/editor&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Editor from &quot;vue2-ace-editor&quot;;</span><br><span class="line">// 主题</span><br><span class="line">import &quot;brace/theme/monokai&quot;;</span><br><span class="line">// 代码片段</span><br><span class="line">import &quot;brace/snippets/javascript&quot;;</span><br><span class="line">import &quot;brace/snippets/dockerfile&quot;;</span><br><span class="line">import &quot;brace/snippets/python&quot;;</span><br><span class="line">import &quot;brace/snippets/php&quot;;</span><br><span class="line">import &quot;brace/snippets/html&quot;;</span><br><span class="line">import &quot;brace/snippets/css&quot;;</span><br><span class="line">import &quot;brace/snippets/ruby&quot;;</span><br><span class="line">// 代码语言</span><br><span class="line">import &quot;brace/mode/javascript&quot;;</span><br><span class="line">import &quot;brace/mode/dockerfile&quot;;</span><br><span class="line">import &quot;brace/mode/python&quot;;</span><br><span class="line">import &quot;brace/mode/php&quot;;</span><br><span class="line">import &quot;brace/mode/html&quot;;</span><br><span class="line">import &quot;brace/mode/ruby&quot;;</span><br><span class="line">import &quot;brace/mode/css&quot;;</span><br><span class="line">// 语言扩展</span><br><span class="line">import &quot;brace/ext/language_tools&quot;;</span><br><span class="line">import &quot;brace/ext/emmet&quot;;</span><br><span class="line">import &quot;brace/ext/beautify&quot;;</span><br><span class="line">import &quot;brace/ext/searchbox&quot;;</span><br><span class="line">import &quot;brace/ext/chromevox&quot;;</span><br><span class="line">import &quot;brace/ext/error_marker&quot;;</span><br><span class="line">import &quot;brace/ext/keybinding_menu&quot;;</span><br><span class="line">import &quot;brace/ext/linking&quot;;</span><br><span class="line">import &quot;brace/ext/modelist&quot;;</span><br><span class="line">import &quot;brace/ext/old_ie&quot;;</span><br><span class="line">import &quot;brace/ext/settings_menu&quot;;</span><br><span class="line">import &quot;brace/ext/spellcheck&quot;;</span><br><span class="line">import &quot;brace/ext/split&quot;;</span><br><span class="line">import &quot;brace/ext/static_highlight&quot;;</span><br><span class="line">import &quot;brace/ext/statusbar&quot;;</span><br><span class="line">import &quot;brace/ext/whitespace&quot;;</span><br><span class="line">import &quot;brace/ext/textarea&quot;;</span><br><span class="line">import &quot;brace/ext/themelist&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Editor</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  props: &#123;</span><br><span class="line">    title: &#123; type: String, default: &quot;编辑器&quot; &#125;,</span><br><span class="line">    value: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      default: &quot;&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    language: &#123; type: String, default: &quot;html&quot; &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  model: &#123;</span><br><span class="line">    prop: &quot;value&quot;,</span><br><span class="line">    event: &quot;change&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      options: &#123;</span><br><span class="line">        enableBasicAutocompletion: true, // 启用基本自动完成</span><br><span class="line">        enableSnippets: true, // 启用代码段</span><br><span class="line">        enableLiveAutocompletion: true, // 启用实时自动完成</span><br><span class="line">        printMarginColumn: 30,</span><br><span class="line">        displayIndentGuides: false, // 显示参考线</span><br><span class="line">        enableEmmet: true, // 启用Emmet</span><br><span class="line">        tabSize: 6, // 标签大小</span><br><span class="line">        fontSize: 14, // 设置字号</span><br><span class="line">        useWorker: true, // 使用辅助对象</span><br><span class="line">        showPrintMargin: false, //去除编辑器里的竖线</span><br><span class="line">        enableMultiselect: true, //     选中多处</span><br><span class="line">        readOnly: false, // 是否只读</span><br><span class="line">        showFoldWidgets: true, // 显示折叠部件</span><br><span class="line">        fadeFoldWidgets: true, // 淡入折叠部件</span><br><span class="line">        wrap: true //换行</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    editorInit: function (editor) &#123;</span><br><span class="line">      console.log(&quot;debug log --&gt; &quot;, editor);</span><br><span class="line">      // 窗口自适应</span><br><span class="line">      // editor.resize();</span><br><span class="line">      // 监听编辑器变化</span><br><span class="line">      editor.getSession().on(&quot;change&quot;, val =&gt; &#123;</span><br><span class="line">        console.log(&quot;debug log --&gt; &quot;, editor.getValue());</span><br><span class="line"></span><br><span class="line">        this.$emit(&quot;change&quot;, editor.getValue());</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.echart-pie-wrap &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 500px;</span><br><span class="line">  .myEditorTop &#123;</span><br><span class="line">    height: 45px;</span><br><span class="line">    display: flex;</span><br><span class="line">    align-items: center;</span><br><span class="line">    background-color: #333;</span><br><span class="line">    padding-left: 50px;</span><br><span class="line">    color: rgb(241, 238, 8);</span><br><span class="line">    font-weight: bold;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<p><code>父组件</code></p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;MyEditor v-model=&quot;code&quot; language=&quot;dockerfile&quot; title=&quot;dockerfile&quot;&gt;</span><br><span class="line">    &lt;/MyEditor&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MyEditor from &quot;./myEditor&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    MyEditor</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      code: &quot;&quot;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>



<h1 id="视频播放组件"><a href="#视频播放组件" class="headerlink" title="==视频播放组件=="></a>==视频播放组件==</h1><h2 id="视频播放组件-1"><a href="#视频播放组件-1" class="headerlink" title="视频播放组件"></a><a class="link"   target="_blank" rel="noopener" href="https://core-player.github.io/vue-core-video-player/get-started.html" >视频播放组件 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></h2><h2 id="详情使用方案"><a href="#详情使用方案" class="headerlink" title="详情使用方案"></a><a class="link"   target="_blank" rel="noopener" href="https://www.cnblogs.com/goOJBK/p/16209251.html" >详情使用方案 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></h2><p><code>npm install --save vue-core-video-player </code></p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 设置是否自动播放</span><br><span class="line">:autoplay=<span class="string">&#x27;false&#x27;</span></span><br></pre></td></tr></table></figure></div>

<p>mian.js</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">VueCoreVideoPlayer</span> <span class="keyword">from</span> <span class="string">&#x27;vue-core-video-player&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueCoreVideoPlayer</span>)</span><br></pre></td></tr></table></figure></div>

<p>vue文件</p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;player-container&quot;&gt;</span><br><span class="line">    &lt;vue-core-video-player src=&quot;./your_video_source.mp4&quot;&gt;&lt;/vue-core-video-player&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></div>

<h2 id="这个组件挖的一个小坑"><a href="#这个组件挖的一个小坑" class="headerlink" title="这个组件挖的一个小坑"></a>这个组件挖的一个小坑</h2><p>封面不显示，是因为他的 <code>display: none</code> 但是有了封面，点击播放的时候，他的封面就不会显示；但是加上之后图片会盖住视频…</p>
<div class="highlight-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cover-layer</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>





<h1 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">kua</span> = params =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded;charset=UTF-8&#x27;</span>,</span><br><span class="line">    <span class="title class_">Authorization</span>: <span class="title function_">getToken</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">get</span>(<span class="string">&#x27;api/index/ding.json&#x27;</span>, params, config)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h1><p><a class="link"   target="_blank" rel="noopener" href="https://stackblitz.com/github/xyxiao001/vue-cropper?file=src/vue-cropper.vue" >方便阅读代码 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p><a class="link"   target="_blank" rel="noopener" href="https://github.com/xyxiao001/vue-cropper" >图片剪切 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h1 id="后台模板"><a href="#后台模板" class="headerlink" title="后台模板"></a>后台模板</h1><div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">简洁版: https://github.com/PanJiaChen/vue-admin-template</span><br><span class="line">加强版: https://github.com/PanJiaChen/vue-element-admin</span><br><span class="line">模板的文件与文件夹认知【简洁版】</span><br><span class="line"></span><br><span class="line">build</span><br><span class="line">     ----index.js webpack配置文件【很少修改这个文件】</span><br><span class="line">mock</span><br><span class="line">    ----mock数据的文件夹【模拟一些假的数据mockjs实现的】，因为咱们实际开发的时候，利用的是真是接口</span><br><span class="line"></span><br><span class="line">node_modules</span><br><span class="line">     ------项目依赖的模块</span><br><span class="line"></span><br><span class="line">public</span><br><span class="line">     ------ico图标,静态页面，publick文件夹里面经常放置一些静态资源，而且在项目打包的时候webpack不会编译这个文件夹，原封不动的打包到dist文件夹里面</span><br><span class="line"></span><br><span class="line">src</span><br><span class="line">    -----程序员源代码的地方</span><br><span class="line">    ------api文件夹:涉及请求相关的</span><br><span class="line">    ------assets文件夹：里面放置一些静态资源（一般共享的），放在aseets文件夹里面静态资源，在webpack打包的时候，会进行编译</span><br><span class="line">    ------components文件夹：一般放置非路由组件获取全局组件</span><br><span class="line">    ------icons这个文件夹的里面放置了一些svg矢量图</span><br><span class="line">    ------layout文件夹：他里面放置一些组件与混入</span><br><span class="line">    ------router文件夹：与路由相关的</span><br><span class="line">    -----store文件夹：一定是与vuex先关的</span><br><span class="line">    -----style文件夹：与样式先关的</span><br><span class="line">    ------utils文件夹：request.js是axios二次封装文件****</span><br><span class="line">    ------views文件夹：里面放置的是路由组件</span><br><span class="line"></span><br><span class="line">App.vue:根组件</span><br><span class="line">main.js：入口文件</span><br><span class="line">permission.js:与导航守卫先关、</span><br><span class="line">settings：项目配置项文件</span><br><span class="line">.env.development</span><br><span class="line">.env.producation</span><br><span class="line"></span><br><span class="line">main.js</span><br><span class="line">// 可以拿到当前的环境</span><br><span class="line">console.log(process.env);</span><br></pre></td></tr></table></figure></div>

<h1 id="css-这样添加背景图片"><a href="#css-这样添加背景图片" class="headerlink" title="css 这样添加背景图片 (@)"></a>css 这样添加背景图片 (@)</h1><p><code>background: url(~@/assets/night.jpg);</code></p>
<h1 id="数组里包着对象-进行删掉重复的数据"><a href="#数组里包着对象-进行删掉重复的数据" class="headerlink" title="数组里包着对象,进行删掉重复的数据"></a>数组里包着对象,进行删掉重复的数据</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ArrSet</span>(<span class="title class_">Arr</span>, num) &#123;</span><br><span class="line">  <span class="keyword">var</span> obj = &#123;&#125;</span><br><span class="line">  <span class="keyword">const</span> arrays = <span class="title class_">Arr</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">setArr, item</span>) =&gt;</span> &#123;</span><br><span class="line">    obj[item[num]] ? <span class="string">&#x27;&#x27;</span> : (obj[item[num]] = <span class="literal">true</span> &amp;&amp; setArr.<span class="title function_">push</span>(item))</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span><br><span class="line">    <span class="keyword">return</span> setArr</span><br><span class="line">  &#125;, [])</span><br><span class="line">  <span class="keyword">return</span> arrays</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">newList</span> = <span class="variable language_">this</span>.<span class="title class_">ArrSet</span>(<span class="variable language_">this</span>.<span class="property">bbb</span>, <span class="string">&#x27;num&#x27;</span>)  <span class="comment">// 以num为主,进行删掉重复的数据</span></span><br></pre></td></tr></table></figure></div>

<h1 id="Echarts-的水球效果"><a href="#Echarts-的水球效果" class="headerlink" title="Echarts 的水球效果"></a>Echarts 的水球效果</h1><p><a class="link"   target="_blank" rel="noopener" href="https://github.com/ecomfe/echarts-liquidfill#api" >水球 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;echarts&quot;</span>: <span class="string">&quot;4.9&quot;</span>,</span><br><span class="line"><span class="string">&quot;echarts-liquidfill&quot;</span>: <span class="string">&quot;^2.0.6&quot;</span>,</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class=&quot;c&quot; ref=&quot;echart&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;!-- &lt;div ref=&quot;echart&quot; id=&quot;main&quot; style=&quot;width: 600px;height:400px;&quot;&gt;&lt;/div&gt; --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;</span><br><span class="line">import &#x27;echarts-liquidfill&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    const myChart = echarts.init(this.$refs.echart)</span><br><span class="line">    // 绘制图表</span><br><span class="line">    const option = &#123;</span><br><span class="line">      tooltip: &#123;&#125;,</span><br><span class="line">      series: [</span><br><span class="line">        &#123;</span><br><span class="line">          type: &#x27;liquidFill&#x27;,</span><br><span class="line">          data: [0.6],</span><br><span class="line">          radius: &#x27;70%&#x27;,</span><br><span class="line">          phase: 0,</span><br><span class="line">          period: function (value, index) &#123;</span><br><span class="line">            // This function is called four times, each for a data item in series.</span><br><span class="line">            // `value` is 0.6, 0.5, 0.4, 0.3, and `index` is 0, 1, 2, 3.</span><br><span class="line">            return 2000 * index + 1000</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">    myChart.setOption(option)</span><br><span class="line">    // const option = &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.c &#123;</span><br><span class="line">  width: 500px;</span><br><span class="line">  height: 500px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></div>



<h1 id="富文本解析-v-html不起效的时候"><a href="#富文本解析-v-html不起效的时候" class="headerlink" title="==富文本解析 (v-html不起效的时候)=="></a><strong>==富文本解析 (v-html不起效的时候)==</strong></h1><p><code>格式: &lt;pre class=&quot;ql-syntax&quot; spellcheck=&quot;false&quot;&gt;&amp;lt;a&amp;gt;嘿嘿嘿&amp;lt;/a&amp;gt;&lt;/pre&gt;</code></p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">showHtml</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="comment">//富文本解析</span></span><br><span class="line">  <span class="keyword">return</span> str</span><br><span class="line">    .<span class="title function_">replace</span>(str ? <span class="regexp">/&amp;(?!#?\w+;)/g</span> : <span class="regexp">/&amp;/g</span>, <span class="string">&#x27;&amp;amp;&#x27;</span>)</span><br><span class="line">    .<span class="title function_">replace</span>(<span class="regexp">/&amp;amp;nbsp;/g</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    .<span class="title function_">replace</span>(<span class="regexp">/&amp;lt;/g</span>, <span class="string">&#x27;&lt;&#x27;</span>)</span><br><span class="line">    .<span class="title function_">replace</span>(<span class="regexp">/&amp;gt;/g</span>, <span class="string">&#x27;&gt;&#x27;</span>)</span><br><span class="line">    .<span class="title function_">replace</span>(<span class="regexp">/&amp;quot;/g</span>, <span class="string">&#x27;&quot;&#x27;</span>)</span><br><span class="line">    .<span class="title function_">replace</span>(<span class="regexp">/&amp;#39;/g</span>, <span class="string">&quot;&#x27;&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="获取页面加载的时间"><a href="#获取页面加载的时间" class="headerlink" title="获取页面加载的时间"></a>获取页面加载的时间</h1><div class="highlight-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;TimeShow&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> created() &#123;</span><br><span class="line">  var t1 = new Date().getTime();</span><br><span class="line"> &#125;</span><br><span class="line">mounted() &#123;</span><br><span class="line">   document.getElementById(&#x27;TimeShow&#x27;).innerHTML = &#x27;加载本页耗时 &#x27; + (new 				Date().getTime() - this.t1) + &#x27; 毫秒&#x27;</span><br><span class="line">   console.log(new Date().getTime() - this.t1)</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></div>

<h1 id="判断是否联网"><a href="#判断是否联网" class="headerlink" title="判断是否联网"></a>判断是否联网</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"> <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">	 <span class="comment">// 初始化在线状态</span></span><br><span class="line">     <span class="attr">onLine</span>: navigator.<span class="property">onLine</span></span><br><span class="line">&#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="title function_">mounted</span>(<span class="params"></span>) &#123;  </span><br><span class="line"> 	 <span class="comment">// 是否在线</span></span><br><span class="line">   <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;online&#x27;</span>, <span class="variable language_">this</span>.<span class="property">updateOnlineStatus</span>) <span class="comment">// 网络由异常到正常时触发</span></span><br><span class="line">   <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;offline&#x27;</span>, <span class="variable language_">this</span>.<span class="property">updateOnlineStatus</span>) <span class="comment">// 网络由正常常到异常时触发</span></span><br><span class="line"> &#125;</span><br><span class="line"> <span class="attr">methods</span>: &#123;</span><br><span class="line"><span class="comment">// 改变onLine的值</span></span><br><span class="line">   <span class="title function_">updateOnlineStatus</span>(<span class="params">e</span>) &#123;</span><br><span class="line">     <span class="keyword">const</span> &#123; type &#125; = e</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">onLine</span> = type === <span class="string">&#x27;online&#x27;</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">onLine</span>)</span><br><span class="line">     <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">onLine</span>) &#123;</span><br><span class="line">       <span class="comment">// this.$API.buriedPointHavior(this.beHavior1)</span></span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">beHavior</span>)</span><br><span class="line">       <span class="comment">// this.$API.lineHaviorOff(this.beHavior)</span></span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">count</span>++</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;失去连接&#x27;</span>)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">// 在销毁时解除时间监听</span></span><br><span class="line"> <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;online&#x27;</span>, <span class="variable language_">this</span>.<span class="property">updateOnlineStatus</span>)</span><br><span class="line">   <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;offline&#x27;</span>, <span class="variable language_">this</span>.<span class="property">updateOnlineStatus</span>)</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></div>

<h1 id="回车即登录"><a href="#回车即登录" class="headerlink" title="回车即登录"></a>回车即登录</h1><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-input v-if=&quot;row.flag&quot; @blur=&quot;toLook(row)&quot; @keyup.native.enter=&quot;row.flag = false&quot; type=&quot;text&quot; v-model=&quot;row.valueName&quot; placeholder=&quot;请输入属性值名称&quot; size=&quot;mini&quot;&gt;&lt;/el-input&gt;</span><br><span class="line"></span><br><span class="line">toLook(row) &#123;</span><br><span class="line">	row.flag = false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h1 id="set-用法"><a href="#set-用法" class="headerlink" title="$set 用法"></a>$set 用法</h1><div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 因为Vue无法探测普通的新增 PROPERTY_TYPES,这样书写的属性并非响应式属性(数据变化视图跟着变)</span><br><span class="line">// 第一个参数:对象 第二个参数:添加新的响应式属性 第三个参数: 新的属性的属性值</span><br><span class="line">this.<span class="variable">$set</span>(item, <span class="string">&#x27;flag&#x27;</span>, <span class="literal">false</span>)</span><br></pre></td></tr></table></figure></div>



<h1 id="地图组件"><a href="#地图组件" class="headerlink" title="地图组件"></a>地图组件</h1><h1 id="还是-百度好用"><a href="#还是-百度好用" class="headerlink" title="还是 百度好用"></a>还是 百度好用</h1><p><a class="link"   target="_blank" rel="noopener" href="https://blog.csdn.net/seeeeeeeeeee/article/details/120884987" >CSDN <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>main.js</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入百度地图</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">BaiduMap</span> <span class="keyword">from</span> <span class="string">&#x27;vue-baidu-map&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">BaiduMap</span>, &#123;</span><br><span class="line">  <span class="attr">ak</span>: <span class="string">&#x27;eCle9l9oXmoDyOS5zSsSoOLzDtebNfDE&#x27;</span>  <span class="comment">//这个地方是官方提供的ak密钥</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>



<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;map&quot;&gt;</span><br><span class="line">    &lt;el-card style=&quot;height: 89vh&quot;&gt;</span><br><span class="line">      &lt;el-input placeholder=&quot;请输入地址&quot; v-model=&quot;input3&quot; class=&quot;input-with-select&quot;&gt;</span><br><span class="line">        &lt;el-button slot=&quot;append&quot; icon=&quot;el-icon-search&quot; @click=&quot;inputfz(center.lng,center.lat)&quot;&gt;搜索&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-input&gt;</span><br><span class="line">      &lt;!-- </span><br><span class="line">    scroll-wheel-zoom是是否可以缩放</span><br><span class="line">    @ready是图加载完后触发事件</span><br><span class="line">    center是位置定位</span><br><span class="line">    zoom是缩放大小限制</span><br><span class="line">    inertial-dragging是允许惯性拖拽</span><br><span class="line">   --&gt;</span><br><span class="line">      &lt;baidu-map class=&quot;bm-view&quot; :zoom=&quot;15&quot; :center=&quot;center&quot; inertial-dragging @ready=&quot;atten&quot; :scroll-wheel-zoom=&quot;true&quot; @moving=&quot;syncCenterAndZoom&quot; @moveend=&quot;syncCenterAndZoom&quot; @zoomend=&quot;syncCenterAndZoom&quot;&gt;</span><br><span class="line">        &lt;!-- 定位控件   anchor=&quot;BMAP_ANCHOR_BOTTOM_RIGHT&quot;代表放在右下角 --&gt;</span><br><span class="line">        &lt;bm-geolocation anchor=&quot;BMAP_ANCHOR_BOTTOM_RIGHT&quot; :showAddressBar=&quot;true&quot; :autoLocation=&quot;true&quot;&gt;&lt;/bm-geolocation&gt;</span><br><span class="line">        &lt;!-- 地区检索  keyword：关键字搜索   @searchcomplete：检索完成后的回调函数   auto-viewport：检索结束后是否自动调整地图事业  --&gt;</span><br><span class="line">        &lt;bm-local-search :keyword=&quot;keyword&quot; :auto-viewport=&quot;true&quot; class=&quot;search&quot;&gt;&lt;/bm-local-search&gt;</span><br><span class="line">        &lt;!-- 缩放控件   anchor代表控件停靠位置   anchor=&quot;BMAP_ANCHOR_TOP_RIGHT&quot;代表放在右上角--&gt;</span><br><span class="line">        &lt;bm-navigation anchor=&quot;BMAP_ANCHOR_TOP_RIGHT&quot;&gt;&lt;/bm-navigation&gt;</span><br><span class="line">      &lt;/baidu-map&gt;</span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">//引入组件AMapManageruMap, BmControl, BmView, BmAutoComplete, BmLocalSearch, BmMarker, BmGeolocation &#125; from &#x27;vue-baidu-map&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      //定位位置信息</span><br><span class="line">      center: &#123;&#125;,</span><br><span class="line">      //检索关键字</span><br><span class="line">      keyword: &#x27;&#x27;,</span><br><span class="line">      //输入框input值</span><br><span class="line">      input3: &#x27;&#x27;,</span><br><span class="line">      a: &#x27;&#x27;,</span><br><span class="line">      b: &#x27;&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  //需要引入的组件</span><br><span class="line">  components: &#123;</span><br><span class="line">    BaiduMap,</span><br><span class="line">    BmControl,</span><br><span class="line">    BmView,</span><br><span class="line">    BmAutoComplete,</span><br><span class="line">    BmLocalSearch,</span><br><span class="line">    BmMarker,</span><br><span class="line">    BmGeolocation</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    //输入框</span><br><span class="line">    inputfz(lng, lat) &#123;</span><br><span class="line">      this.keyword = this.input3</span><br><span class="line">      const that = this</span><br><span class="line">      console.log(lng, lat)</span><br><span class="line">      var myGeo = new BMap.Geocoder()</span><br><span class="line">      var pt = new BMap.Point(lng, lat)</span><br><span class="line">      myGeo.getLocation(pt, function (result) &#123;</span><br><span class="line">        that.BAddress = result.address //获取到当前定位的详细地址信息</span><br><span class="line">      &#125;)</span><br><span class="line">      console.log(that.BAddress)</span><br><span class="line">    &#125;,</span><br><span class="line">    //地图加载后的回调</span><br><span class="line">    mapReady(&#123; BMap, map &#125;) &#123;</span><br><span class="line">      //保存this指向，因为在百度的回调中this不指向vue</span><br><span class="line">      const _this = this</span><br><span class="line">      // console.log(BMap)</span><br><span class="line">      // 获取自动定位方法</span><br><span class="line">      var geolocation = new BMap.Geolocation()</span><br><span class="line">      // 获取自动定位获取的坐标信息</span><br><span class="line">      geolocation.getCurrentPosition(</span><br><span class="line">        function (r) &#123;</span><br><span class="line">          //可以conso.log看一下这个r，他里面包含了检索到的位置信息。下面就把两个维度信息赋值给center来定位</span><br><span class="line">          _this.center = &#123;</span><br><span class="line">            lng: r.point.lng,</span><br><span class="line">            lat: r.point.lat</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        //启用高精度</span><br><span class="line">        &#123; enableHighAccuracy: true &#125;</span><br><span class="line">      )</span><br><span class="line">    &#125;,</span><br><span class="line">    handler(lng, lat) &#123;</span><br><span class="line">      const that = this</span><br><span class="line">      var myGeo = new BMap.Geocoder()</span><br><span class="line">      var pt = new BMap.Point(lng, lat)</span><br><span class="line">      myGeo.getLocation(pt, function (result) &#123;</span><br><span class="line">        that.BAddress = result.address //获取到当前定位的详细地址信息</span><br><span class="line">      &#125;)</span><br><span class="line">      console.log(that.BAddress)</span><br><span class="line">    &#125;,</span><br><span class="line">    syncCenterAndZoom(e) &#123;</span><br><span class="line">      // console.log(e)</span><br><span class="line">      // console.log(this.keyword);</span><br><span class="line">      const &#123; lng, lat &#125; = e.target.getCenter()</span><br><span class="line">      this.center.lng = lng</span><br><span class="line">      this.center.lat = lat</span><br><span class="line">      this.zoom = e.target.getZoom()</span><br><span class="line">    &#125;,</span><br><span class="line">    async atten() &#123;</span><br><span class="line">      //获取当前位置</span><br><span class="line">      var address = null</span><br><span class="line">      var geolocation = new BMap.Geolocation()</span><br><span class="line">      await geolocation.getCurrentPosition(function (r) &#123;</span><br><span class="line">        if (this.getStatus() == BMAP_STATUS_SUCCESS) &#123;</span><br><span class="line">          var mk = new BMap.Marker(r.point)</span><br><span class="line">          //获取地址信息，设置地址label</span><br><span class="line">          var gc = new BMap.Geocoder()</span><br><span class="line">          gc.getLocation(r.point, function (rs) &#123;</span><br><span class="line">            //   debugger</span><br><span class="line">            var addComp = rs.addressComponents</span><br><span class="line">            address = addComp.province + addComp.city + addComp.district + addComp.street + addComp.streetNumber //获取地址</span><br><span class="line">            console.log(address) //打印地址</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          alert(&#x27;failed&#x27; + this.getStatus())</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.map &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.el-card &#123;</span><br><span class="line">  height: 100% !important;</span><br><span class="line">&#125;</span><br><span class="line">/* 给个宽高 */</span><br><span class="line">.bm-view &#123;</span><br><span class="line">  height: 400px;</span><br><span class="line">  width: 700px;</span><br><span class="line">&#125;</span><br><span class="line">.input-with-select &#123;</span><br><span class="line">  width: 400px;</span><br><span class="line">  margin-bottom: 5px;</span><br><span class="line">&#125;</span><br><span class="line">.search &#123;</span><br><span class="line">  height: 300px;</span><br><span class="line">  overflow: auto;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h1 id="根据详细地址转换经纬度"><a href="#根据详细地址转换经纬度" class="headerlink" title="根据详细地址转换经纬度"></a>根据详细地址转换经纬度</h1><p><a class="link"   target="_blank" rel="noopener" href="https://www.jianshu.com/p/b94015442e27" >文档 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>文档中有一个错误，下面的是正确的写法</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">VueJsonp</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-jsonp&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueJsonp</span>)</span><br></pre></td></tr></table></figure></div>

<h1 id="根据经纬度转换成省份、市"><a href="#根据经纬度转换成省份、市" class="headerlink" title="根据经纬度转换成省份、市"></a>根据经纬度转换成省份、市</h1><p><code>index.html</code></p>
<div class="highlight-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://api.map.baidu.com/api?v=2.0&amp;ak=eCle9l9oXmoDyOS5zSsSoOLzDtebNfDE&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div>



<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">        methods: &#123;</span><br><span class="line">          map_click(lng, lat) &#123;</span><br><span class="line">              const map = new BMap.Map(&#x27;allmap&#x27;)</span><br><span class="line">              const point = new BMap.Point(lng, lat)</span><br><span class="line">              map.centerAndZoom(point, 12)</span><br><span class="line">              const geoc = new BMap.Geocoder()</span><br><span class="line">              geoc.getLocation(point, function (rs) &#123;</span><br><span class="line">                const addComp = rs.addressComponents</span><br><span class="line">                console.log(addComp)</span><br><span class="line">                alert(addComp.province + &#x27;, &#x27; + addComp.city + &#x27;&#x27;, &#x27;&#x27; + addComp.district + &#x27;&#x27;, &#x27;&#x27; + addComp.street + &#x27;&#x27;, &#x27;&#x27; + addComp.streetNumber)</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></div>

<h1 id="高德获取定位"><a href="#高德获取定位" class="headerlink" title="高德获取定位"></a>高德获取定位</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 高德地图定位</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@type</span> &#123;<span class="type">&#123;</span>&#125;&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> location = &#123;</span><br><span class="line">  <span class="title function_">initMap</span>(<span class="params">id</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> mapObj = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Map</span>(id, &#123;&#125;)</span><br><span class="line">    <span class="keyword">let</span> geolocation</span><br><span class="line">    mapObj.<span class="title function_">plugin</span>([<span class="string">&#x27;AMap.Geolocation&#x27;</span>], <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      geolocation = <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Geolocation</span>(&#123;</span><br><span class="line">        <span class="attr">enableHighAccuracy</span>: <span class="literal">true</span>, <span class="comment">//  是否使用高精度定位，默认:true</span></span><br><span class="line">        <span class="attr">timeout</span>: <span class="number">10000</span>, <span class="comment">//  超过10秒后停止定位，默认：无穷大</span></span><br><span class="line">        <span class="attr">maximumAge</span>: <span class="number">0</span>, <span class="comment">// 定位结果缓存0毫秒，默认：0</span></span><br><span class="line">        <span class="attr">convert</span>: <span class="literal">true</span>, <span class="comment">// 自动偏移坐标，偏移后的坐标为高德坐标，默认：true</span></span><br><span class="line">        <span class="attr">showButton</span>: <span class="literal">true</span>, <span class="comment">//  显示定位按钮，默认：true</span></span><br><span class="line">        <span class="attr">buttonPosition</span>: <span class="string">&#x27;LB&#x27;</span>, <span class="comment">// 定位按钮停靠位置，默认：&#x27;LB&#x27;，左下角</span></span><br><span class="line">        <span class="attr">buttonOffset</span>: <span class="keyword">new</span> <span class="title class_">AMap</span>.<span class="title class_">Pixel</span>(<span class="number">10</span>, <span class="number">20</span>), <span class="comment">//  定位按钮与设置的停靠位置的偏移量，默认：Pixel(10, 20)</span></span><br><span class="line">        <span class="attr">showMarker</span>: <span class="literal">true</span>, <span class="comment">//  定位成功后在定位到的位置显示点标记，默认：true</span></span><br><span class="line">        <span class="attr">showCircle</span>: <span class="literal">true</span>, <span class="comment">//  定位成功后用圆圈表示定位精度范围，默认：true</span></span><br><span class="line">        <span class="attr">panToLocation</span>: <span class="literal">true</span>, <span class="comment">//  定位成功后将定位到的位置作为地图中心点，默认：true</span></span><br><span class="line">        <span class="attr">zoomToAccuracy</span>: <span class="literal">true</span> <span class="comment">//  定位成功后调整地图视野范围使定位位置及精度范围视野内可见，默认：false</span></span><br><span class="line">      &#125;)</span><br><span class="line">      mapObj.<span class="title function_">addControl</span>(geolocation)</span><br><span class="line">      geolocation.<span class="title function_">getCurrentPosition</span>()</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> geolocation</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> location</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import location from <span class="string">&#x27;@/utils/map&#x27;</span></span><br><span class="line"> <span class="function"><span class="title">getLocation</span></span>() &#123;</span><br><span class="line">         const geolocation = location.initMap(<span class="string">&#x27;map-container&#x27;</span>) // 定位</span><br><span class="line">         AMap.event.addListener(geolocation, <span class="string">&#x27;complete&#x27;</span>, result =&gt; &#123;</span><br><span class="line">         console.log(result)</span><br><span class="line">         this.lat = result.position.lat</span><br><span class="line">         this.lng = result.position.lng</span><br><span class="line">         this.location = result.formattedAddress</span><br><span class="line">         // console.log(this.lat)</span><br><span class="line">         // this.map_click(this.lat, this.lng)</span><br><span class="line">         // setTimeout(() =&gt; &#123;</span><br><span class="line">         this.map_click(this.lng, this.lat)</span><br><span class="line">         // &#125;, <span class="number">1000</span>)</span><br><span class="line">     &#125;)</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure></div>





<p><a class="link"   target="_blank" rel="noopener" href="https://elemefe.github.io/vue-amap/#/" >高德地图 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p><a href="!%5Bimg%5D(file:///C:%5CUsers%5C4%CA%8E%5CAppData%5CRoaming%5CTencent%5CQQ%5CTemp%25W@GJ$ACOF(TYDYECOKVDYB.png)https://blog.csdn.net/YourNikee/article/details/107764276">辅佐 CSDN</a></p>
<p><code>main.jsBaiduMap</code></p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入高德地图</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueAMap</span> <span class="keyword">from</span> <span class="string">&#x27;vue-amap&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueAMap</span>)</span><br><span class="line"><span class="title class_">VueAMap</span>.<span class="title function_">initAMapApiLoader</span>(&#123;</span><br><span class="line">  <span class="attr">key</span>: <span class="string">&#x27;0f73c2f3d1289cc4ba22dae1022797d0&#x27;</span>,</span><br><span class="line">  <span class="attr">plugin</span>: [<span class="string">&#x27;AMap.Autocomplete&#x27;</span>, <span class="string">&#x27;AMap.Geocoder&#x27;</span>, <span class="string">&#x27;AMap.PlaceSearch&#x27;</span>, <span class="string">&#x27;AMap.Scale&#x27;</span>, <span class="string">&#x27;AMap.OverView&#x27;</span>, <span class="string">&#x27;AMap.ToolBar&#x27;</span>, <span class="string">&#x27;AMap.MapType&#x27;</span>, <span class="string">&#x27;AMap.AMapManager&#x27;</span>, <span class="string">&#x27;AMap.Geolocation&#x27;</span>],</span><br><span class="line">  <span class="comment">// 默认高德 sdk 版本为 1.4.4</span></span><br><span class="line">  <span class="attr">v</span>: <span class="string">&#x27;1.4.4&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;amap-page-container&quot;&gt;</span><br><span class="line">    &lt;el-amap-search-box class=&quot;search-box&quot; :search-option=&quot;searchOption&quot; :on-search-result=&quot;onSearchResult&quot;&gt;&lt;/el-amap-search-box&gt;</span><br><span class="line">    &lt;el-amap ref=&quot;map&quot; vid=&quot;amapDemo&quot; :amap-manager=&quot;amapManager&quot; :center=&quot;center&quot; :zoom=&quot;12&quot; :plugin=&quot;plugin&quot; :events=&quot;events&quot; class=&quot;amap-demo&quot;&gt;</span><br><span class="line">      &lt;el-amap-marker v-if=&quot;!!marker&quot; :position=&quot;marker.position&quot; :events=&quot;marker.events&quot; :visible=&quot;marker.visible&quot; :draggable=&quot;marker.draggable&quot;&gt;&lt;/el-amap-marker&gt;</span><br><span class="line">    &lt;/el-amap&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import VueAMap from &#x27;vue-amap&#x27;</span><br><span class="line">const amapManager = new VueAMap.AMapManager()</span><br><span class="line">let Geocoder</span><br><span class="line">export default &#123;</span><br><span class="line">  // name: &#x27;amaps&#x27;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      amapManager,</span><br><span class="line">      searchOption: &#123;</span><br><span class="line">        city: &#x27;全国&#x27;,</span><br><span class="line">        citylimit: false</span><br><span class="line">      &#125;,</span><br><span class="line">      marker: &#123;</span><br><span class="line">        position: [121.329402, 31.228667],</span><br><span class="line">        events: &#123;</span><br><span class="line">          click: e =&gt; &#123;</span><br><span class="line">            console.log(&#x27;点击maker&#x27;, e)</span><br><span class="line">            this.marker = null</span><br><span class="line">          &#125;,</span><br><span class="line">          dragend: e =&gt; &#123;</span><br><span class="line">            console.log(&#x27;---event---: dragend&#x27;, e)</span><br><span class="line">            this.marker.position = [e.lnglat.lng, e.lnglat.lat]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        visible: true,</span><br><span class="line">        draggable: false,</span><br><span class="line">        template: &#x27;&lt;span&gt;1&lt;/span&gt;&#x27;</span><br><span class="line">      &#125;,</span><br><span class="line">      center: [121.59996, 31.197646],</span><br><span class="line">      events: &#123;</span><br><span class="line">        init: o =&gt; &#123;</span><br><span class="line">          o.getCity(result =&gt; &#123;</span><br><span class="line">            console.log(result)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        click: e =&gt; &#123;</span><br><span class="line">          console.log(e)</span><br><span class="line">          if (this.marker) &#123;</span><br><span class="line">            this.marker.position = [e.lnglat.lng, e.lnglat.lat]</span><br><span class="line">          &#125; else &#123;</span><br><span class="line">            this.marker = &#123;</span><br><span class="line">              position: [e.lnglat.lng, e.lnglat.lat],</span><br><span class="line">              events: &#123;</span><br><span class="line">                click: e =&gt; &#123;</span><br><span class="line">                  console.log(&#x27;点击maker&#x27;, e)</span><br><span class="line">                  this.marker = null</span><br><span class="line">                &#125;,</span><br><span class="line">                dragend: e =&gt; &#123;</span><br><span class="line">                  console.log(&#x27;---event---: dragend&#x27;, e)</span><br><span class="line">                  this.marker.position = [e.lnglat.lng, e.lnglat.lat]</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">              visible: true,</span><br><span class="line">              draggable: false,</span><br><span class="line">              template: &#x27;&lt;span&gt;1&lt;/span&gt;&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          Geocoder.getAddress([e.lnglat.lng, e.lnglat.lat], function (status, result) &#123;</span><br><span class="line">            // 根据坐标获取位置</span><br><span class="line">            if (status === &#x27;complete&#x27; &amp;&amp; result.info === &#x27;OK&#x27;) &#123;</span><br><span class="line">              document.querySelector(&#x27;.search-box-wrapper input&#x27;).value = result.regeocode.formattedAddress</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      // 当前地图需要的拓展插件需在该内容下放置  Geocoder为通过坐标获取地址信息</span><br><span class="line">      plugin: [</span><br><span class="line">        &#123;</span><br><span class="line">          pName: &#x27;Geocoder&#x27;,</span><br><span class="line">          events: &#123;</span><br><span class="line">            init(o) &#123;</span><br><span class="line">              Geocoder = o</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    window._AMapSecurityConfig = &#123;</span><br><span class="line">      securityJsCode: &#x27;48fa10cdebe38c4087055363fc74db98&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // 搜索地址 查询结果</span><br><span class="line">    onSearchResult(pois) &#123;</span><br><span class="line">      console.log(pois)</span><br><span class="line">      if (pois.length) &#123;</span><br><span class="line">        this.marker.position = [pois[0].lng, pois[0].lat]</span><br><span class="line">        this.center = [pois[0].lng, pois[0].lat]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.search-box &#123;</span><br><span class="line">  border: 1px solid #ccc;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.search-box-wrapper &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.amap-page-container &#123;</span><br><span class="line">  width: 500px;</span><br><span class="line">  height: 500px;</span><br><span class="line">  z-index: 999;</span><br><span class="line">&#125;</span><br><span class="line">.amap-demo &#123;</span><br><span class="line">  height: 300px;</span><br><span class="line">  height: 300px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>





<h1 id="解决bmap未定义的问题"><a href="#解决bmap未定义的问题" class="headerlink" title="解决bmap未定义的问题"></a>解决bmap未定义的问题</h1><p><a class="link"   target="_blank" rel="noopener" href="https://lbsyun.baidu.com/apiconsole/key#/home" >百度地图官网 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<div class="highlight-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 地图展示 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&quot;echart&quot;</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span> <span class="attr">class</span>=<span class="string">&quot;map w&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div>



<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入echarts</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span></span><br><span class="line"><span class="comment">// 解决bmap未定义的问题</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/assets/js/bmap.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">&#x27;jquery&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; styleJson &#125; <span class="keyword">from</span> <span class="string">&#x27;./js/map&#x27;</span></span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">     <span class="title function_">mapp</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> <span class="variable constant_">ROOT_PATH</span> = <span class="string">&#x27;https://cdn.jsdelivr.net/gh/apache/echarts-website@asf-site/examples&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> chartDom = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;map&#x27;</span>)</span><br><span class="line">      <span class="keyword">var</span> myChart = echarts.<span class="title function_">init</span>(chartDom)</span><br><span class="line">      <span class="keyword">var</span> option</span><br><span class="line"></span><br><span class="line">      $.<span class="title function_">get</span>(<span class="variable constant_">ROOT_PATH</span> + <span class="string">&#x27;/data/asset/data/hangzhou-tracks.json&#x27;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> lines = data.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">track</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">coords</span>: track.<span class="title function_">map</span>(<span class="keyword">function</span> (<span class="params">seg, idx</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span> seg.<span class="property">coord</span></span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        myChart.<span class="title function_">setOption</span>(</span><br><span class="line">          (option = &#123;</span><br><span class="line">            <span class="attr">bmap</span>: &#123;</span><br><span class="line">              <span class="comment">// 经纬度</span></span><br><span class="line">              <span class="attr">center</span>: [<span class="number">120.13066322374</span>, <span class="number">30.240018034923</span>],</span><br><span class="line">              <span class="attr">zoom</span>: <span class="number">14</span>,</span><br><span class="line">              <span class="attr">roam</span>: <span class="literal">true</span>,</span><br><span class="line">              <span class="attr">mapStyle</span>: &#123;</span><br><span class="line">                <span class="comment">// 样式JSON</span></span><br><span class="line">                <span class="attr">styleJson</span>: styleJson</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">series</span>: [</span><br><span class="line">              &#123;</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;lines&#x27;</span>,</span><br><span class="line">                <span class="attr">coordinateSystem</span>: <span class="string">&#x27;bmap&#x27;</span>,</span><br><span class="line">                <span class="attr">data</span>: lines,</span><br><span class="line">                <span class="attr">polyline</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">                  <span class="attr">color</span>: <span class="string">&#x27;purple&#x27;</span>,</span><br><span class="line">                  <span class="attr">opacity</span>: <span class="number">0.6</span>,</span><br><span class="line">                  <span class="attr">width</span>: <span class="number">1</span></span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            ]</span><br><span class="line">          &#125;)</span><br><span class="line">        )</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      option &amp;&amp; myChart.<span class="title function_">setOption</span>(option)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params"><span class="variable language_">global</span>, factory</span>) &#123;</span><br><span class="line">	<span class="keyword">typeof</span> <span class="built_in">exports</span> === <span class="string">&#x27;object&#x27;</span> &amp;&amp; <span class="keyword">typeof</span> <span class="variable language_">module</span> !== <span class="string">&#x27;undefined&#x27;</span> ? <span class="title function_">factory</span>(<span class="built_in">exports</span>, <span class="built_in">require</span>(<span class="string">&#x27;echarts&#x27;</span>)) :</span><br><span class="line">	<span class="keyword">typeof</span> define === <span class="string">&#x27;function&#x27;</span> &amp;&amp; define.<span class="property">amd</span> ? <span class="title function_">define</span>([<span class="string">&#x27;exports&#x27;</span>, <span class="string">&#x27;echarts&#x27;</span>], factory) :</span><br><span class="line">	(<span class="title function_">factory</span>((<span class="variable language_">global</span>.<span class="property">bmap</span> = &#123;&#125;),<span class="variable language_">global</span>.<span class="property">echarts</span>));</span><br><span class="line">&#125;(<span class="variable language_">this</span>, (<span class="keyword">function</span> (<span class="params"><span class="built_in">exports</span>,echarts</span>) &#123; <span class="string">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Licensed to the Apache Software Foundation (ASF) under one</span></span><br><span class="line"><span class="comment">* or more contributor license agreements.  See the NOTICE file</span></span><br><span class="line"><span class="comment">* distributed with this work for additional information</span></span><br><span class="line"><span class="comment">* regarding copyright ownership.  The ASF licenses this file</span></span><br><span class="line"><span class="comment">* to you under the Apache License, Version 2.0 (the</span></span><br><span class="line"><span class="comment">* &quot;License&quot;); you may not use this file except in compliance</span></span><br><span class="line"><span class="comment">* with the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*   http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* Unless required by applicable law or agreed to in writing,</span></span><br><span class="line"><span class="comment">* software distributed under the License is distributed on an</span></span><br><span class="line"><span class="comment">* &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></span><br><span class="line"><span class="comment">* KIND, either express or implied.  See the License for the</span></span><br><span class="line"><span class="comment">* specific language governing permissions and limitations</span></span><br><span class="line"><span class="comment">* under the License.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* global BMap */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">BMapCoordSys</span>(<span class="params">bmap, api</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_bmap</span> = bmap;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dimensions</span> = [<span class="string">&#x27;lng&#x27;</span>, <span class="string">&#x27;lat&#x27;</span>];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_mapOffset</span> = [<span class="number">0</span>, <span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_api</span> = api;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_projection</span> = <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">MercatorProjection</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">BMapCoordSys</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">dimensions</span> = [<span class="string">&#x27;lng&#x27;</span>, <span class="string">&#x27;lat&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="title class_">BMapCoordSys</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">setZoom</span> = <span class="keyword">function</span> (<span class="params">zoom</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_zoom</span> = zoom;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">BMapCoordSys</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">setCenter</span> = <span class="keyword">function</span> (<span class="params">center</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_center</span> = <span class="variable language_">this</span>.<span class="property">_projection</span>.<span class="title function_">lngLatToPoint</span>(<span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(center[<span class="number">0</span>], center[<span class="number">1</span>]));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">BMapCoordSys</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">setMapOffset</span> = <span class="keyword">function</span> (<span class="params">mapOffset</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_mapOffset</span> = mapOffset;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">BMapCoordSys</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getBMap</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_bmap</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">BMapCoordSys</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">dataToPoint</span> = <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> point = <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(data[<span class="number">0</span>], data[<span class="number">1</span>]);</span><br><span class="line">    <span class="comment">// TODO mercator projection is toooooooo slow</span></span><br><span class="line">    <span class="comment">// var mercatorPoint = this._projection.lngLatToPoint(point);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// var width = this._api.getZr().getWidth();</span></span><br><span class="line">    <span class="comment">// var height = this._api.getZr().getHeight();</span></span><br><span class="line">    <span class="comment">// var divider = Math.pow(2, 18 - 10);</span></span><br><span class="line">    <span class="comment">// return [</span></span><br><span class="line">    <span class="comment">//     Math.round((mercatorPoint.x - this._center.x) / divider + width / 2),</span></span><br><span class="line">    <span class="comment">//     Math.round((this._center.y - mercatorPoint.y) / divider + height / 2)</span></span><br><span class="line">    <span class="comment">// ];</span></span><br><span class="line">    <span class="keyword">var</span> px = <span class="variable language_">this</span>.<span class="property">_bmap</span>.<span class="title function_">pointToOverlayPixel</span>(point);</span><br><span class="line">    <span class="keyword">var</span> mapOffset = <span class="variable language_">this</span>.<span class="property">_mapOffset</span>;</span><br><span class="line">    <span class="keyword">return</span> [px.<span class="property">x</span> - mapOffset[<span class="number">0</span>], px.<span class="property">y</span> - mapOffset[<span class="number">1</span>]];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">BMapCoordSys</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">pointToData</span> = <span class="keyword">function</span> (<span class="params">pt</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> mapOffset = <span class="variable language_">this</span>.<span class="property">_mapOffset</span>;</span><br><span class="line">    <span class="keyword">var</span> pt = <span class="variable language_">this</span>.<span class="property">_bmap</span>.<span class="title function_">overlayPixelToPoint</span>(&#123;</span><br><span class="line">        <span class="attr">x</span>: pt[<span class="number">0</span>] + mapOffset[<span class="number">0</span>],</span><br><span class="line">        <span class="attr">y</span>: pt[<span class="number">1</span>] + mapOffset[<span class="number">1</span>]</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> [pt.<span class="property">lng</span>, pt.<span class="property">lat</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">BMapCoordSys</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getViewRect</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> api = <span class="variable language_">this</span>.<span class="property">_api</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> echarts.<span class="property">graphic</span>.<span class="title class_">BoundingRect</span>(<span class="number">0</span>, <span class="number">0</span>, api.<span class="title function_">getWidth</span>(), api.<span class="title function_">getHeight</span>());</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">BMapCoordSys</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getRoamTransform</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> echarts.<span class="property">matrix</span>.<span class="title function_">create</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">BMapCoordSys</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">prepareCustoms</span> = <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> rect = <span class="variable language_">this</span>.<span class="title function_">getViewRect</span>();</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">coordSys</span>: &#123;</span><br><span class="line">            <span class="comment">// The name exposed to user is always &#x27;cartesian2d&#x27; but not &#x27;grid&#x27;.</span></span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;bmap&#x27;</span>,</span><br><span class="line">            <span class="attr">x</span>: rect.<span class="property">x</span>,</span><br><span class="line">            <span class="attr">y</span>: rect.<span class="property">y</span>,</span><br><span class="line">            <span class="attr">width</span>: rect.<span class="property">width</span>,</span><br><span class="line">            <span class="attr">height</span>: rect.<span class="property">height</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">api</span>: &#123;</span><br><span class="line">            <span class="attr">coord</span>: echarts.<span class="property">util</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>.<span class="property">dataToPoint</span>, <span class="variable language_">this</span>),</span><br><span class="line">            <span class="attr">size</span>: echarts.<span class="property">util</span>.<span class="title function_">bind</span>(dataToCoordSize, <span class="variable language_">this</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dataToCoordSize</span>(<span class="params">dataSize, dataItem</span>) &#123;</span><br><span class="line">    dataItem = dataItem || [<span class="number">0</span>, <span class="number">0</span>];</span><br><span class="line">    <span class="keyword">return</span> echarts.<span class="property">util</span>.<span class="title function_">map</span>([<span class="number">0</span>, <span class="number">1</span>], <span class="keyword">function</span> (<span class="params">dimIdx</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> val = dataItem[dimIdx];</span><br><span class="line">        <span class="keyword">var</span> halfSize = dataSize[dimIdx] / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">var</span> p1 = [];</span><br><span class="line">        <span class="keyword">var</span> p2 = [];</span><br><span class="line">        p1[dimIdx] = val - halfSize;</span><br><span class="line">        p2[dimIdx] = val + halfSize;</span><br><span class="line">        p1[<span class="number">1</span> - dimIdx] = p2[<span class="number">1</span> - dimIdx] = dataItem[<span class="number">1</span> - dimIdx];</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">abs</span>(<span class="variable language_">this</span>.<span class="title function_">dataToPoint</span>(p1)[dimIdx] - <span class="variable language_">this</span>.<span class="title function_">dataToPoint</span>(p2)[dimIdx]);</span><br><span class="line">    &#125;, <span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Overlay</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// For deciding which dimensions to use when creating list data</span></span><br><span class="line"><span class="title class_">BMapCoordSys</span>.<span class="property">dimensions</span> = <span class="title class_">BMapCoordSys</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">dimensions</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createOverlayCtor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">Overlay</span>(<span class="params">root</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_root</span> = root;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Overlay</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Overlay</span>();</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &#123;<span class="type">BMap.Map</span>&#125; <span class="variable">map</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@override</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title class_">Overlay</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">initialize</span> = <span class="keyword">function</span> (<span class="params">map</span>) &#123;</span><br><span class="line">        map.<span class="title function_">getPanes</span>().<span class="property">labelPane</span>.<span class="title function_">appendChild</span>(<span class="variable language_">this</span>.<span class="property">_root</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_root</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@override</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title class_">Overlay</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">draw</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Overlay</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">BMapCoordSys</span>.<span class="property">create</span> = <span class="keyword">function</span> (<span class="params">ecModel, api</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> bmapCoordSys;</span><br><span class="line">    <span class="keyword">var</span> root = api.<span class="title function_">getDom</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// TODO Dispose</span></span><br><span class="line">    ecModel.<span class="title function_">eachComponent</span>(<span class="string">&#x27;bmap&#x27;</span>, <span class="keyword">function</span> (<span class="params">bmapModel</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> painter = api.<span class="title function_">getZr</span>().<span class="property">painter</span>;</span><br><span class="line">        <span class="keyword">var</span> viewportRoot = painter.<span class="title function_">getViewportRoot</span>();</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">BMap</span> === <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;BMap api is not loaded&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title class_">Overlay</span> = <span class="title class_">Overlay</span> || <span class="title function_">createOverlayCtor</span>();</span><br><span class="line">        <span class="keyword">if</span> (bmapCoordSys) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;Only one bmap component can exist&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!bmapModel.<span class="property">__bmap</span>) &#123;</span><br><span class="line">            <span class="comment">// Not support IE8</span></span><br><span class="line">            <span class="keyword">var</span> bmapRoot = root.<span class="title function_">querySelector</span>(<span class="string">&#x27;.ec-extension-bmap&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span> (bmapRoot) &#123;</span><br><span class="line">                <span class="comment">// Reset viewport left and top, which will be changed</span></span><br><span class="line">                <span class="comment">// in moving handler in BMapView</span></span><br><span class="line">                viewportRoot.<span class="property">style</span>.<span class="property">left</span> = <span class="string">&#x27;0px&#x27;</span>;</span><br><span class="line">                viewportRoot.<span class="property">style</span>.<span class="property">top</span> = <span class="string">&#x27;0px&#x27;</span>;</span><br><span class="line">                root.<span class="title function_">removeChild</span>(bmapRoot);</span><br><span class="line">            &#125;</span><br><span class="line">            bmapRoot = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">            bmapRoot.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&#x27;width:100%;height:100%&#x27;</span>;</span><br><span class="line">            <span class="comment">// Not support IE8</span></span><br><span class="line">            bmapRoot.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;ec-extension-bmap&#x27;</span>);</span><br><span class="line">            root.<span class="title function_">appendChild</span>(bmapRoot);</span><br><span class="line">            <span class="keyword">var</span> bmap = bmapModel.<span class="property">__bmap</span> = <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Map</span>(bmapRoot);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> overlay = <span class="keyword">new</span> <span class="title class_">Overlay</span>(viewportRoot);</span><br><span class="line">            bmap.<span class="title function_">addOverlay</span>(overlay);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Override</span></span><br><span class="line">            painter.<span class="property">getViewportRootOffset</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> &#123;<span class="attr">offsetLeft</span>: <span class="number">0</span>, <span class="attr">offsetTop</span>: <span class="number">0</span>&#125;;</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> bmap = bmapModel.<span class="property">__bmap</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Set bmap options</span></span><br><span class="line">        <span class="comment">// centerAndZoom before layout and render</span></span><br><span class="line">        <span class="keyword">var</span> center = bmapModel.<span class="title function_">get</span>(<span class="string">&#x27;center&#x27;</span>);</span><br><span class="line">        <span class="keyword">var</span> zoom = bmapModel.<span class="title function_">get</span>(<span class="string">&#x27;zoom&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (center &amp;&amp; zoom) &#123;</span><br><span class="line">            <span class="keyword">var</span> pt = <span class="keyword">new</span> <span class="title class_">BMap</span>.<span class="title class_">Point</span>(center[<span class="number">0</span>], center[<span class="number">1</span>]);</span><br><span class="line">            bmap.<span class="title function_">centerAndZoom</span>(pt, zoom);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        bmapCoordSys = <span class="keyword">new</span> <span class="title class_">BMapCoordSys</span>(bmap, api);</span><br><span class="line">        bmapCoordSys.<span class="title function_">setMapOffset</span>(bmapModel.<span class="property">__mapOffset</span> || [<span class="number">0</span>, <span class="number">0</span>]);</span><br><span class="line">        bmapCoordSys.<span class="title function_">setZoom</span>(zoom);</span><br><span class="line">        bmapCoordSys.<span class="title function_">setCenter</span>(center);</span><br><span class="line"></span><br><span class="line">        bmapModel.<span class="property">coordinateSystem</span> = bmapCoordSys;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    ecModel.<span class="title function_">eachSeries</span>(<span class="keyword">function</span> (<span class="params">seriesModel</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (seriesModel.<span class="title function_">get</span>(<span class="string">&#x27;coordinateSystem&#x27;</span>) === <span class="string">&#x27;bmap&#x27;</span>) &#123;</span><br><span class="line">            seriesModel.<span class="property">coordinateSystem</span> = bmapCoordSys;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Licensed to the Apache Software Foundation (ASF) under one</span></span><br><span class="line"><span class="comment">* or more contributor license agreements.  See the NOTICE file</span></span><br><span class="line"><span class="comment">* distributed with this work for additional information</span></span><br><span class="line"><span class="comment">* regarding copyright ownership.  The ASF licenses this file</span></span><br><span class="line"><span class="comment">* to you under the Apache License, Version 2.0 (the</span></span><br><span class="line"><span class="comment">* &quot;License&quot;); you may not use this file except in compliance</span></span><br><span class="line"><span class="comment">* with the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*   http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* Unless required by applicable law or agreed to in writing,</span></span><br><span class="line"><span class="comment">* software distributed under the License is distributed on an</span></span><br><span class="line"><span class="comment">* &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></span><br><span class="line"><span class="comment">* KIND, either express or implied.  See the License for the</span></span><br><span class="line"><span class="comment">* specific language governing permissions and limitations</span></span><br><span class="line"><span class="comment">* under the License.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">v2Equal</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a &amp;&amp; b &amp;&amp; a[<span class="number">0</span>] === b[<span class="number">0</span>] &amp;&amp; a[<span class="number">1</span>] === b[<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">echarts.<span class="title function_">extendComponentModel</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;bmap&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">getBMap</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// __bmap is injected when creating BMapCoordSys</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">__bmap</span>;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">setCenterAndZoom</span>: <span class="keyword">function</span> (<span class="params">center, zoom</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">option</span>.<span class="property">center</span> = center;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">option</span>.<span class="property">zoom</span> = zoom;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">centerOrZoomChanged</span>: <span class="keyword">function</span> (<span class="params">center, zoom</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> option = <span class="variable language_">this</span>.<span class="property">option</span>;</span><br><span class="line">        <span class="keyword">return</span> !(<span class="title function_">v2Equal</span>(center, option.<span class="property">center</span>) &amp;&amp; zoom === option.<span class="property">zoom</span>);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">defaultOption</span>: &#123;</span><br><span class="line"></span><br><span class="line">        <span class="attr">center</span>: [<span class="number">104.114129</span>, <span class="number">37.550339</span>],</span><br><span class="line"></span><br><span class="line">        <span class="attr">zoom</span>: <span class="number">5</span>,</span><br><span class="line"></span><br><span class="line">        <span class="attr">mapStyle</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">        <span class="attr">mapStyleV2</span>: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">        <span class="attr">roam</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@module</span> zrender/core/util</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用于处理merge时无法遍历Date等对象的问题</span></span><br><span class="line"><span class="keyword">var</span> <span class="variable constant_">BUILTIN_OBJECT</span> = &#123;</span><br><span class="line">    <span class="string">&#x27;[object Function]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;[object RegExp]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;[object Date]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;[object Error]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;[object CanvasGradient]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;[object CanvasPattern]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="comment">// For node-canvas</span></span><br><span class="line">    <span class="string">&#x27;[object Image]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;[object Canvas]&#x27;</span>: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="variable constant_">TYPED_ARRAY</span> = &#123;</span><br><span class="line">    <span class="string">&#x27;[object Int8Array]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;[object Uint8Array]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;[object Uint8ClampedArray]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;[object Int16Array]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;[object Uint16Array]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;[object Int32Array]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;[object Uint32Array]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;[object Float32Array]&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;[object Float64Array]&#x27;</span>: <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> objToString = <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Those data types can be cloned:</span></span><br><span class="line"><span class="comment"> *     Plain object, Array, TypedArray, number, string, null, undefined.</span></span><br><span class="line"><span class="comment"> * Those data types will be assgined using the orginal data:</span></span><br><span class="line"><span class="comment"> *     BUILTIN_OBJECT</span></span><br><span class="line"><span class="comment"> * Instance of user defined class will be cloned to a plain object, without</span></span><br><span class="line"><span class="comment"> * properties in prototype.</span></span><br><span class="line"><span class="comment"> * Other data types is not supported (not sure what will happen).</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Caution: do not support clone Date, for performance consideration.</span></span><br><span class="line"><span class="comment"> * (There might be a large number of date in `series.data`).</span></span><br><span class="line"><span class="comment"> * So date should not be modified in and out of echarts.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">source</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125; <span class="variable">new</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">clone</span>(<span class="params">source</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (source == <span class="literal">null</span> || <span class="keyword">typeof</span> source !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> source;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> result = source;</span><br><span class="line">    <span class="keyword">var</span> typeStr = objToString.<span class="title function_">call</span>(source);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (typeStr === <span class="string">&#x27;[object Array]&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_">isPrimitive</span>(source)) &#123;</span><br><span class="line">            result = [];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = source.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">                result[i] = <span class="title function_">clone</span>(source[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable constant_">TYPED_ARRAY</span>[typeStr]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_">isPrimitive</span>(source)) &#123;</span><br><span class="line">            <span class="keyword">var</span> <span class="title class_">Ctor</span> = source.<span class="property">constructor</span>;</span><br><span class="line">            <span class="keyword">if</span> (source.<span class="property">constructor</span>.<span class="property">from</span>) &#123;</span><br><span class="line">                result = <span class="title class_">Ctor</span>.<span class="title function_">from</span>(source);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                result = <span class="keyword">new</span> <span class="title class_">Ctor</span>(source.<span class="property">length</span>);</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = source.<span class="property">length</span>; i &lt; len; i++) &#123;</span><br><span class="line">                    result[i] = <span class="title function_">clone</span>(source[i]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="variable constant_">BUILTIN_OBJECT</span>[typeStr] &amp;&amp; !<span class="title function_">isPrimitive</span>(source) &amp;&amp; !<span class="title function_">isDom</span>(source)) &#123;</span><br><span class="line">        result = &#123;&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> source) &#123;</span><br><span class="line">            <span class="keyword">if</span> (source.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">                result[key] = <span class="title function_">clone</span>(source[key]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">target</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">source</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">boolean</span>&#125; [overwrite=false]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Array</span>&#125; targetAndSources The first item is target, and the rests are source.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">boolean</span>&#125; [overwrite=false]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125; <span class="variable">target</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">target</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">source</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">target</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">source</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">boolean</span>&#125; [overlay=false]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 查询数组中元素的index</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 构造类继承关系</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Function</span>&#125; clazz 源类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Function</span>&#125; baseClazz 基类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object|Function</span>&#125; <span class="variable">target</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object|Function</span>&#125; <span class="variable">sorce</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">boolean</span>&#125; <span class="variable">overlay</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Consider typed array.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Array|TypedArray</span>&#125; <span class="variable">data</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数组或对象遍历</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object|Array</span>&#125; <span class="variable">obj</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Function</span>&#125; <span class="variable">cb</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; [context]</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数组映射</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Array</span>&#125; <span class="variable">obj</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Function</span>&#125; <span class="variable">cb</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; [context]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">Array</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Array</span>&#125; <span class="variable">obj</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Function</span>&#125; <span class="variable">cb</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; [memo]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; [context]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">Array</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数组过滤</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Array</span>&#125; <span class="variable">obj</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Function</span>&#125; <span class="variable">cb</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; [context]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">Array</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数组项查找</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Array</span>&#125; <span class="variable">obj</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Function</span>&#125; <span class="variable">cb</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; [context]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Function</span>&#125; <span class="variable">func</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">context</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">Function</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Function</span>&#125; <span class="variable">func</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">Function</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">value</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">value</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">value</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">value</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">value</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">value</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">value</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isDom</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> value === <span class="string">&#x27;object&#x27;</span></span><br><span class="line">        &amp;&amp; <span class="keyword">typeof</span> value.<span class="property">nodeType</span> === <span class="string">&#x27;number&#x27;</span></span><br><span class="line">        &amp;&amp; <span class="keyword">typeof</span> value.<span class="property">ownerDocument</span> === <span class="string">&#x27;object&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Whether is exactly NaN. Notice isNaN(&#x27;a&#x27;) returns true.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; <span class="variable">value</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * If value1 is not null, then return value1, otherwise judget rest of values.</span></span><br><span class="line"><span class="comment"> * Low performance.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125; Final value</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Array</span>&#125; <span class="variable">arr</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">startIndex</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">endIndex</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">Array</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Normalize css liked array configuration</span></span><br><span class="line"><span class="comment"> * e.g.</span></span><br><span class="line"><span class="comment"> *  3 =&gt; [3, 3, 3, 3]</span></span><br><span class="line"><span class="comment"> *  [4, 2] =&gt; [4, 2, 4, 2]</span></span><br><span class="line"><span class="comment"> *  [4, 3, 2] =&gt; [4, 3, 2, 3]</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number|Array.&lt;number&gt;</span>&#125; <span class="variable">val</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">Array.&lt;number&gt;</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">boolean</span>&#125; <span class="variable">condition</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">message</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@memberOf</span> module:zrender/core/util</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; str string to be trimed</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">string</span>&#125; trimed string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> primitiveKey = <span class="string">&#x27;__ec_primitive__&#x27;</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Set an object as primitive to be ignored traversing children in clone or merge</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isPrimitive</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> obj[primitiveKey];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Licensed to the Apache Software Foundation (ASF) under one</span></span><br><span class="line"><span class="comment">* or more contributor license agreements.  See the NOTICE file</span></span><br><span class="line"><span class="comment">* distributed with this work for additional information</span></span><br><span class="line"><span class="comment">* regarding copyright ownership.  The ASF licenses this file</span></span><br><span class="line"><span class="comment">* to you under the Apache License, Version 2.0 (the</span></span><br><span class="line"><span class="comment">* &quot;License&quot;); you may not use this file except in compliance</span></span><br><span class="line"><span class="comment">* with the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*   http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* Unless required by applicable law or agreed to in writing,</span></span><br><span class="line"><span class="comment">* software distributed under the License is distributed on an</span></span><br><span class="line"><span class="comment">* &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></span><br><span class="line"><span class="comment">* KIND, either express or implied.  See the License for the</span></span><br><span class="line"><span class="comment">* specific language governing permissions and limitations</span></span><br><span class="line"><span class="comment">* under the License.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">echarts.<span class="title function_">extendComponentView</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;bmap&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">render</span>: <span class="keyword">function</span> (<span class="params">bMapModel, ecModel, api</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> rendering = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> bmap = bMapModel.<span class="title function_">getBMap</span>();</span><br><span class="line">        <span class="keyword">var</span> viewportRoot = api.<span class="title function_">getZr</span>().<span class="property">painter</span>.<span class="title function_">getViewportRoot</span>();</span><br><span class="line">        <span class="keyword">var</span> coordSys = bMapModel.<span class="property">coordinateSystem</span>;</span><br><span class="line">        <span class="keyword">var</span> moveHandler = <span class="keyword">function</span> (<span class="params">type, target</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (rendering) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">var</span> offsetEl = viewportRoot.<span class="property">parentNode</span>.<span class="property">parentNode</span>.<span class="property">parentNode</span>;</span><br><span class="line">            <span class="keyword">var</span> mapOffset = [</span><br><span class="line">                -<span class="built_in">parseInt</span>(offsetEl.<span class="property">style</span>.<span class="property">left</span>, <span class="number">10</span>) || <span class="number">0</span>,</span><br><span class="line">                -<span class="built_in">parseInt</span>(offsetEl.<span class="property">style</span>.<span class="property">top</span>, <span class="number">10</span>) || <span class="number">0</span></span><br><span class="line">            ];</span><br><span class="line">            viewportRoot.<span class="property">style</span>.<span class="property">left</span> = mapOffset[<span class="number">0</span>] + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">            viewportRoot.<span class="property">style</span>.<span class="property">top</span> = mapOffset[<span class="number">1</span>] + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line"></span><br><span class="line">            coordSys.<span class="title function_">setMapOffset</span>(mapOffset);</span><br><span class="line">            bMapModel.<span class="property">__mapOffset</span> = mapOffset;</span><br><span class="line"></span><br><span class="line">            api.<span class="title function_">dispatchAction</span>(&#123;</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;bmapRoam&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">zoomEndHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (rendering) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            api.<span class="title function_">dispatchAction</span>(&#123;</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;bmapRoam&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        bmap.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;moving&#x27;</span>, <span class="variable language_">this</span>.<span class="property">_oldMoveHandler</span>);</span><br><span class="line">        <span class="comment">// FIXME</span></span><br><span class="line">        <span class="comment">// Moveend may be triggered by centerAndZoom method when creating coordSys next time</span></span><br><span class="line">        <span class="comment">// bmap.removeEventListener(&#x27;moveend&#x27;, this._oldMoveHandler);</span></span><br><span class="line">        bmap.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;zoomend&#x27;</span>, <span class="variable language_">this</span>.<span class="property">_oldZoomEndHandler</span>);</span><br><span class="line">        bmap.<span class="title function_">addEventListener</span>(<span class="string">&#x27;moving&#x27;</span>, moveHandler);</span><br><span class="line">        <span class="comment">// bmap.addEventListener(&#x27;moveend&#x27;, moveHandler);</span></span><br><span class="line">        bmap.<span class="title function_">addEventListener</span>(<span class="string">&#x27;zoomend&#x27;</span>, zoomEndHandler);</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_oldMoveHandler</span> = moveHandler;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_oldZoomEndHandler</span> = zoomEndHandler;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> roam = bMapModel.<span class="title function_">get</span>(<span class="string">&#x27;roam&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (roam &amp;&amp; roam !== <span class="string">&#x27;scale&#x27;</span>) &#123;</span><br><span class="line">            bmap.<span class="title function_">enableDragging</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            bmap.<span class="title function_">disableDragging</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (roam &amp;&amp; roam !== <span class="string">&#x27;move&#x27;</span>) &#123;</span><br><span class="line">            bmap.<span class="title function_">enableScrollWheelZoom</span>();</span><br><span class="line">            bmap.<span class="title function_">enableDoubleClickZoom</span>();</span><br><span class="line">            bmap.<span class="title function_">enablePinchToZoom</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            bmap.<span class="title function_">disableScrollWheelZoom</span>();</span><br><span class="line">            bmap.<span class="title function_">disableDoubleClickZoom</span>();</span><br><span class="line">            bmap.<span class="title function_">disablePinchToZoom</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* map 2.0 */</span></span><br><span class="line">        <span class="keyword">var</span> originalStyle = bMapModel.<span class="property">__mapStyle</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> newMapStyle = bMapModel.<span class="title function_">get</span>(<span class="string">&#x27;mapStyle&#x27;</span>) || &#123;&#125;;</span><br><span class="line">        <span class="comment">// FIXME, Not use JSON methods</span></span><br><span class="line">        <span class="keyword">var</span> mapStyleStr = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(newMapStyle);</span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(originalStyle) !== mapStyleStr) &#123;</span><br><span class="line">            <span class="comment">// FIXME May have blank tile when dragging if setMapStyle</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="title class_">Object</span>.<span class="title function_">keys</span>(newMapStyle).<span class="property">length</span>) &#123;</span><br><span class="line">                bmap.<span class="title function_">setMapStyle</span>(<span class="title function_">clone</span>(newMapStyle));</span><br><span class="line">            &#125;</span><br><span class="line">            bMapModel.<span class="property">__mapStyle</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(mapStyleStr);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* map 3.0 */</span></span><br><span class="line">        <span class="keyword">var</span> originalStyle2 = bMapModel.<span class="property">__mapStyle2</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> newMapStyle2 = bMapModel.<span class="title function_">get</span>(<span class="string">&#x27;mapStyleV2&#x27;</span>) || &#123;&#125;;</span><br><span class="line">        <span class="comment">// FIXME, Not use JSON methods</span></span><br><span class="line">        <span class="keyword">var</span> mapStyleStr2 = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(newMapStyle2);</span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(originalStyle2) !== mapStyleStr2) &#123;</span><br><span class="line">            <span class="comment">// FIXME May have blank tile when dragging if setMapStyle</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="title class_">Object</span>.<span class="title function_">keys</span>(newMapStyle2).<span class="property">length</span>) &#123;</span><br><span class="line">                bmap.<span class="title function_">setMapStyleV2</span>(<span class="title function_">clone</span>(newMapStyle2));</span><br><span class="line">            &#125;</span><br><span class="line">            bMapModel.<span class="property">__mapStyle2</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(mapStyleStr2);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        rendering = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* Licensed to the Apache Software Foundation (ASF) under one</span></span><br><span class="line"><span class="comment">* or more contributor license agreements.  See the NOTICE file</span></span><br><span class="line"><span class="comment">* distributed with this work for additional information</span></span><br><span class="line"><span class="comment">* regarding copyright ownership.  The ASF licenses this file</span></span><br><span class="line"><span class="comment">* to you under the Apache License, Version 2.0 (the</span></span><br><span class="line"><span class="comment">* &quot;License&quot;); you may not use this file except in compliance</span></span><br><span class="line"><span class="comment">* with the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*   http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* Unless required by applicable law or agreed to in writing,</span></span><br><span class="line"><span class="comment">* software distributed under the License is distributed on an</span></span><br><span class="line"><span class="comment">* &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span></span><br><span class="line"><span class="comment">* KIND, either express or implied.  See the License for the</span></span><br><span class="line"><span class="comment">* specific language governing permissions and limitations</span></span><br><span class="line"><span class="comment">* under the License.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * BMap component extension</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">echarts.<span class="title function_">registerCoordinateSystem</span>(<span class="string">&#x27;bmap&#x27;</span>, <span class="title class_">BMapCoordSys</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Action</span></span><br><span class="line">echarts.<span class="title function_">registerAction</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;bmapRoam&#x27;</span>,</span><br><span class="line">    <span class="attr">event</span>: <span class="string">&#x27;bmapRoam&#x27;</span>,</span><br><span class="line">    <span class="attr">update</span>: <span class="string">&#x27;updateLayout&#x27;</span></span><br><span class="line">&#125;, <span class="keyword">function</span> (<span class="params">payload, ecModel</span>) &#123;</span><br><span class="line">    ecModel.<span class="title function_">eachComponent</span>(<span class="string">&#x27;bmap&#x27;</span>, <span class="keyword">function</span> (<span class="params">bMapModel</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> bmap = bMapModel.<span class="title function_">getBMap</span>();</span><br><span class="line">        <span class="keyword">var</span> center = bmap.<span class="title function_">getCenter</span>();</span><br><span class="line">        bMapModel.<span class="title function_">setCenterAndZoom</span>([center.<span class="property">lng</span>, center.<span class="property">lat</span>], bmap.<span class="title function_">getZoom</span>());</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> version = <span class="string">&#x27;1.0.0&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">version</span> = version;</span><br><span class="line"></span><br><span class="line">&#125;)));</span><br><span class="line"><span class="comment">//# sourceMappingURL=bmap.js.map</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h1 id="实现-Vuex数据存储持久化"><a href="#实现-Vuex数据存储持久化" class="headerlink" title="实现 Vuex数据存储持久化"></a>实现 Vuex数据存储持久化</h1><p><a class="link"   target="_blank" rel="noopener" href="https://www.jianshu.com/p/c22861ec5f21" >文档 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -S vuex-persistedstate</span><br></pre></td></tr></table></figure></div>

<p>store 的根文件</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 实现 vuex数据存储持久化</span></span><br><span class="line"><span class="keyword">import</span> createPersistedState <span class="keyword">from</span> <span class="string">&#x27;vuex-persistedstate&#x27;</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"># 各个文件的路径</span><br><span class="line"><span class="keyword">import</span> center <span class="keyword">from</span> <span class="string">&#x27;./Center/index.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> seedsea <span class="keyword">from</span> <span class="string">&#x27;./SeedSea&#x27;</span></span><br><span class="line"><span class="keyword">import</span> practice <span class="keyword">from</span> <span class="string">&#x27;./Practice&#x27;</span></span><br><span class="line"><span class="keyword">import</span> upload <span class="keyword">from</span> <span class="string">&#x27;./Upload&#x27;</span></span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&#x27;./User&#x27;</span></span><br><span class="line"><span class="keyword">import</span> chartroom <span class="keyword">from</span> <span class="string">&#x27;./ChatRoom&#x27;</span></span><br><span class="line"></span><br><span class="line"># 暴露导出</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    center,</span><br><span class="line">    seedsea,</span><br><span class="line">    practice,</span><br><span class="line">    upload,</span><br><span class="line">    user,</span><br><span class="line">    chartroom</span><br><span class="line">  &#125;,</span><br><span class="line">  # 持久化</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">// 保证页面刷新了,数据也不会丢失</span></span><br><span class="line">    <span class="title function_">createPersistedState</span>(&#123;</span><br><span class="line">      # 存储的方式 <span class="variable language_">sessionStorage</span></span><br><span class="line">      <span class="attr">storage</span>: <span class="variable language_">window</span>.<span class="property">sessionStorage</span>,</span><br><span class="line">      # 文件名</span><br><span class="line">      <span class="attr">paths</span>: [<span class="string">&quot;center&quot;</span>, <span class="string">&quot;seedsea&quot;</span>, <span class="string">&quot;practice&quot;</span>, <span class="string">&quot;upload&quot;</span>, <span class="string">&quot;user&quot;</span>, <span class="string">&#x27;chartroom&#x27;</span>]</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>



<h1 id="Git-使用"><a href="#Git-使用" class="headerlink" title="Git 使用"></a>Git 使用</h1><p>如果没有现成的项目，走这里</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="C:\Users\吴俊澎\AppData\Roaming\Typora\typora-user-images\image-20220410150223777.png"
                      alt="如果没有现成的项目，走这里"
                ></p>
<p>有现成的项目走这里</p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="C:\Users\吴俊澎\AppData\Roaming\Typora\typora-user-images\image-20220410150237728.png"
                      alt="有现成的项目走这里"
                ></p>
<p><code>git status  --- 检查项目状态</code> </p>
<p><code>git add . --- 将所有的文件提交到暂存区</code></p>
<p><code>git commit -m &#39;add file&#39;  --- 在本地做一次提交</code></p>
<p>依次执行</p>
<p><code>git remote add origin https://gitee.com/vsdeveloper/vue_shop.git</code></p>
<p><code>git push -u origin master</code></p>
<p>将本地的代码上传到码云中</p>
<p><code>git status  --- 检查项目状态</code> </p>
<p><code>git checkout -b login --- 创建分支名 (子分支)</code> </p>
<p><code>git branch --- 查看所有分支</code></p>
<p><code>git commit -m &#39;add file&#39;  --- 将暂存区的代码在本地做一次提交</code></p>
<p><code>git checkout master --- 切换分支</code></p>
<p><code>git merge login --- 合并分支 (是在主分支上进行合并的)</code></p>
<p><code>git push --- 将本地的master推送到gitee码云中</code></p>
<p><strong>==使用 push 的前提，是云端仓库有这个分支==</strong></p>
<p>注意: <code>第一次，将login分支推送到云端</code></p>
<p><code>git push -u origin login[远程分支名] --- 将本地的分支推送到云端origin的仓库里面，并起名叫做login子分支</code></p>
<p><code>如果已经下载了项目，但是项目又更新了，可以使用 git pull，进行更新。如果不行的话，可以 git status 查看项目状态，再进行 git add . , git commit -m &#39;&#39;</code></p>
<p><code>git clone 报443 time错误</code></p>
<p>解决方案 </p>
<p>git clone 报错443 timeout 解决</p>
<p>在//<a class="link"   target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=github&spm=1001.2101.3001.7020" >github <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>.com前面添加 //gitclone.com</p>
<div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">比如</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/xxx.git</span><br><span class="line">修改为</span><br><span class="line">git <span class="built_in">clone</span> https://gitclone.com/github.com/xxx.git</span><br></pre></td></tr></table></figure></div>



<h1 id="es6-中新增的-清除data里面数据-的方法"><a href="#es6-中新增的-清除data里面数据-的方法" class="headerlink" title="es6 中新增的 清除data里面数据 的方法"></a>es6 中新增的 清除data里面数据 的方法</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 清理数据</span></span><br><span class="line"><span class="comment">// Object.assign: es6中新增的方法可以合并对象</span></span><br><span class="line"><span class="comment">// 把b里面的东西跟a进行合并</span></span><br><span class="line"><span class="comment">// 组件实例this._data,可以操作data当中响应式数据</span></span><br><span class="line"><span class="comment">// this.$options:当前前的配置对象,配置对象的data函数执行，返回的响应式数据为空的</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="variable language_">this</span>.<span class="property">_data</span>, <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="title function_">data</span>())</span><br></pre></td></tr></table></figure></div>



<h1 id="瀑布流"><a href="#瀑布流" class="headerlink" title="瀑布流"></a>瀑布流</h1><p><code>npm i vue-masonry-wall</code></p>
<div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">// 该案例是滑倒底部会自动加载更多数据</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h2&gt;Masonry: append endlessly&lt;/h2&gt;</span><br><span class="line">    &lt;vue-masonry-wall :items=&quot;items&quot; :options=&quot;&#123;width: 300, padding: 12&#125;&quot; @append=&quot;append&quot;&gt;</span><br><span class="line">      &lt;template v-slot:default=&quot;&#123;item&#125;&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">          &lt;h5&gt;&#123;&#123;item.title&#125;&#125;&lt;/h5&gt;</span><br><span class="line">          &lt;p&gt;&#123;&#123;item.content&#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/vue-masonry-wall&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import VueMasonryWall from &quot;vue-masonry-wall&quot;;</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &#x27;app&#x27;,</span><br><span class="line">    components: &#123;VueMasonryWall&#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">      items: [</span><br><span class="line">            &#123; title: &#x27;Item 0&#x27;, content: &#x27;Content&#x27;, url: &#x27;https://img0.baidu.com/it/u=2727024343,130915806&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=500&#x27; &#125;,</span><br><span class="line">            &#123; title: &#x27;Item 1&#x27;, content: &#x27;Content&#x27;, url: &#x27;https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg&#x27; &#125;,</span><br><span class="line">            &#123; title: &#x27;Item 2&#x27;, content: &#x27;Content&#x27;, url: &#x27;https://img1.baidu.com/it/u=2163378301,3989710743&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=645&#x27; &#125;,</span><br><span class="line">            &#123; title: &#x27;Item 3&#x27;, content: &#x27;Content&#x27;, url: &#x27;https://img0.baidu.com/it/u=2967714760,1383644501&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=889&#x27; &#125;,</span><br><span class="line">            &#123; title: &#x27;Item 4&#x27;, content: &#x27;Content&#x27;, url: &#x27;https://img1.baidu.com/it/u=3737729903,56329770&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=480&amp;h=700&#x27; &#125;,</span><br><span class="line">            &#123; title: &#x27;Item 5&#x27;, content: &#x27;Content&#x27;, url: &#x27;https://img2.baidu.com/it/u=2675176463,1218269078&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=369&amp;h=553&#x27; &#125;,</span><br><span class="line">            &#123; title: &#x27;Item 6&#x27;, content: &#x27;Content&#x27;, url: &#x27;https://img2.baidu.com/it/u=1283189568,1957796627&amp;fm=253&amp;fmt=auto&amp;app=120&amp;f=JPEG?w=641&amp;h=425&#x27; &#125;</span><br><span class="line">      	]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      /**</span><br><span class="line">       * I am mocking a API call that load 20 objects at a time.</span><br><span class="line">       */</span><br><span class="line">      append() &#123;</span><br><span class="line">        // 可注释掉</span><br><span class="line">        for (let i = 0; i &lt; 20; i++) &#123;</span><br><span class="line">          this.items.push(&#123;title: `Item $&#123;this.items.length&#125;`, content: &#x27;Content&#x27;&#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></div>



<h1 id="uni-App-的地图"><a href="#uni-App-的地图" class="headerlink" title="uni-App 的地图"></a>uni-App 的地图</h1><h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;view class=&quot;content&quot;&gt;</span><br><span class="line">		&lt;view class=&quot;text-area&quot;&gt;</span><br><span class="line">			&lt;view class=&quot;item&quot;&gt;</span><br><span class="line">				&lt;image class=&quot;logo&quot; src=&quot;/static/logo.png&quot;&gt;&lt;/image&gt;</span><br><span class="line">			&lt;/view&gt;</span><br><span class="line">			&lt;view class=&quot;item item_two&quot;&gt;</span><br><span class="line">				&lt;view class=&quot;title&quot; @tap=&quot;openMap(&#x27;104.060268&#x27;,&#x27;30.642047&#x27;)&quot;&gt;&#123;&#123;title&#125;&#125;(点击跳转)&lt;/view&gt;</span><br><span class="line">				&lt;view class=&quot;distance&quot;&gt;距离：&#123;&#123;distance&#125;&#125;km&lt;/view&gt;</span><br><span class="line">			&lt;/view&gt;</span><br><span class="line">			</span><br><span class="line">		&lt;/view&gt;</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">		data() &#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				title: &#x27;四川大学华西医院&#x27;,</span><br><span class="line">				distance: 0, //&quot;距离&quot;</span><br><span class="line">				latitude: 39.909, // 默认定在首都</span><br><span class="line">				longitude: 116.39742,</span><br><span class="line">				scale: 12, // 默认16</span><br><span class="line">				markers: [],</span><br><span class="line">				markerHeight: 30,</span><br><span class="line">				doorAddress: [], //门店地址</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		onLoad() &#123;</span><br><span class="line">		&#125;,</span><br><span class="line">		mounted() &#123;</span><br><span class="line">		   this.distance = this.getMapDistance(&#x27;104.04311&#x27;,&#x27;30.64242&#x27;,&#x27;104.060268&#x27;,&#x27;30.642047&#x27;);</span><br><span class="line">			console.log(&#x27;距离&#x27;,this.distance);</span><br><span class="line">		&#125;,</span><br><span class="line">		methods: &#123;</span><br><span class="line">			// 确认授权后，获取用户位置</span><br><span class="line">			getLocationInfo() &#123;</span><br><span class="line">				const that = this;</span><br><span class="line">				uni.getLocation(&#123;</span><br><span class="line">					type: &quot;gcj02&quot;,</span><br><span class="line">					success: function(res) &#123;</span><br><span class="line">						// 暂时</span><br><span class="line">						that.longitude = res.longitude; //118.787575;</span><br><span class="line">						that.latitude = res.latitude; //32.05024;</span><br><span class="line">						console.log(&quot;获取当前的用户经度&quot;, that.longitude);</span><br><span class="line">						console.log(&quot;获取当前的用户纬度&quot;, that.latitude);</span><br><span class="line">						var long = 0;</span><br><span class="line">						var lat = 0;</span><br><span class="line">						//小数点保留六位  经度</span><br><span class="line">						if (that.longitude.toString().indexOf(&#x27;.&#x27;) &gt; 0) &#123;</span><br><span class="line">							const longlatsplit = that.longitude.toString().split(&#x27;.&#x27;);</span><br><span class="line">							if (longlatsplit.length &gt;= 2) &#123;</span><br><span class="line">								long = parseFloat(longlatsplit[0] === &quot;&quot; ? 0 : longlatsplit[0]) + parseFloat(&quot;.&quot; + longlatsplit[1].slice(0,6));</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;</span><br><span class="line">						if (that.latitude.toString().indexOf(&#x27;.&#x27;) &gt; 0) &#123;</span><br><span class="line">							const longlatsplit1 = that.latitude.toString().split(&#x27;.&#x27;);</span><br><span class="line">							if (longlatsplit1.length &gt;= 2) &#123;</span><br><span class="line">								lat = parseFloat(longlatsplit1[0] === &quot;&quot; ? 0 : longlatsplit1[0]) + parseFloat(&quot;.&quot; + longlatsplit1[1].slice(0,6));</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;</span><br><span class="line">						// cookie.set(&quot;longitude&quot;, long);</span><br><span class="line">						// cookie.set(&quot;latitude&quot;, lat);</span><br><span class="line">						console.log(&quot;纬度&quot;, lat);</span><br><span class="line">						// this.distance(that.latitude,that.longitude);</span><br><span class="line">						that.markers = [&#123;</span><br><span class="line">							id: &quot;&quot;,</span><br><span class="line">							latitude: res.latitude,</span><br><span class="line">							longitude: res.longitude,</span><br><span class="line">							iconPath: &quot;../../static/img/phone.png&quot;,</span><br><span class="line">							width: that.markerHeight, //宽</span><br><span class="line">							height: that.markerHeight, //高</span><br><span class="line">						&#125;, ];</span><br><span class="line">						that.getList();</span><br><span class="line">					&#125;,</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;,</span><br><span class="line">			// 拒绝授权后，弹框提示是否手动打开位置授权</span><br><span class="line">			openConfirm() &#123;</span><br><span class="line">				return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">					uni.showModal(&#123;</span><br><span class="line">						title: &quot;请求授权当前位置&quot;,</span><br><span class="line">						content: &quot;我们需要获取地理位置信息，为您推荐附近的美食&quot;,</span><br><span class="line">						success: (res) =&gt; &#123;</span><br><span class="line">							if (res.confirm) &#123;</span><br><span class="line">								uni.openSetting().then((res) =&gt; &#123;</span><br><span class="line">									if (res[1].authSetting[&quot;scope.userLocation&quot;] === true) &#123;</span><br><span class="line">										resolve(); // 打开地图权限设置</span><br><span class="line">									&#125; else &#123;</span><br><span class="line">										reject();</span><br><span class="line">									&#125;</span><br><span class="line">								&#125;);</span><br><span class="line">							&#125; else if (res.cancel) &#123;</span><br><span class="line">								reject();</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;,</span><br><span class="line">					&#125;);</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;,</span><br><span class="line">			</span><br><span class="line">			// 彻底拒绝位置获取</span><br><span class="line">			rejectGetLocation() &#123;</span><br><span class="line">				uni.showToast(&#123;</span><br><span class="line">					title: &quot;你拒绝了授权，无法获得周边信息&quot;,</span><br><span class="line">					icon: &quot;none&quot;,</span><br><span class="line">					duration: 2000,</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;,</span><br><span class="line">			getList() &#123;</span><br><span class="line">				console.log(&quot;获取周围美食&quot;);</span><br><span class="line">			&#125;,</span><br><span class="line">			onReady() &#123;</span><br><span class="line">				//   wx请求获取位置权限</span><br><span class="line">				this.getAuthorize()</span><br><span class="line">					.then(() =&gt; &#123;</span><br><span class="line">						//   同意后获取</span><br><span class="line">						this.getLocationInfo();</span><br><span class="line">					&#125;)</span><br><span class="line">					.catch(() =&gt; &#123;</span><br><span class="line">						//   不同意给出弹框，再次确认</span><br><span class="line">						this.openConfirm()</span><br><span class="line">							.then(() =&gt; &#123;</span><br><span class="line">								this.getLocationInfo();</span><br><span class="line">							&#125;)</span><br><span class="line">							.catch(() =&gt; &#123;</span><br><span class="line">								this.rejectGetLocation();</span><br><span class="line">							&#125;);</span><br><span class="line">					&#125;);</span><br><span class="line">			&#125;,</span><br><span class="line">			openMap(lon,lat) &#123;</span><br><span class="line">				console.log(&quot;获取经纬度ssssfff&quot;, lon, lat);</span><br><span class="line">				//打开地图，并将门店位置传入</span><br><span class="line">				uni.getLocation(&#123;</span><br><span class="line">					success: res =&gt; &#123;</span><br><span class="line">						// res.latitude=lat;</span><br><span class="line">						// res.longitude=lon;</span><br><span class="line">						console.log(&#x27;location success&#x27;, parseFloat(lat), parseFloat(lon))</span><br><span class="line">						uni.openLocation(&#123;</span><br><span class="line">							latitude: parseFloat(lat),</span><br><span class="line">							longitude: parseFloat(lon),</span><br><span class="line">							scale: 18</span><br><span class="line">						&#125;)</span><br><span class="line">					&#125;</span><br><span class="line">					</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;,</span><br><span class="line">			//进行经纬度转换为距离的计算</span><br><span class="line">			Rad(d) &#123;</span><br><span class="line">				return d * Math.PI / 180.0; //经纬度转换成三角函数中度分表形式。</span><br><span class="line">			&#125;,</span><br><span class="line">			/*</span><br><span class="line">						 计算距离，参数分别为第一点的纬度，经度；第二点的纬度，经度</span><br><span class="line">						 默认单位km</span><br><span class="line">						*/</span><br><span class="line">			getMapDistance(lat1, lng1, lat2, lng2) &#123;</span><br><span class="line">				var radLat1 = this.Rad(lat1);</span><br><span class="line">				var radLat2 = this.Rad(lat2);</span><br><span class="line">				var a = radLat1 - radLat2;</span><br><span class="line">				var b = this.Rad(lng1) - this.Rad(lng2);</span><br><span class="line">				var s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) +</span><br><span class="line">					Math.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b / 2), 2)));</span><br><span class="line">				s = s * 6378.137; // EARTH_RADIUS;</span><br><span class="line">				s = Math.round(s * 10000) / 10000; //输出为公里</span><br><span class="line">				//s=s.toFixed(2);</span><br><span class="line">				return s;</span><br><span class="line">			&#125;,</span><br><span class="line">			//计算距离</span><br><span class="line"></span><br><span class="line">			//   初次位置授权</span><br><span class="line">			getAuthorize() &#123;</span><br><span class="line">				return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">					uni.authorize(&#123;</span><br><span class="line">						scope: &quot;scope.userLocation&quot;,</span><br><span class="line">						success: () =&gt; &#123;</span><br><span class="line">							resolve(); // 允许授权</span><br><span class="line">						&#125;,</span><br><span class="line">						fail: () =&gt; &#123;</span><br><span class="line">							reject(); // 拒绝授权</span><br><span class="line">						&#125;,</span><br><span class="line">					&#125;);</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">	.content &#123;</span><br><span class="line">		display: flex;</span><br><span class="line">		flex-direction: column;</span><br><span class="line">		align-items: center;</span><br><span class="line">		justify-content: center;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	.logo &#123;</span><br><span class="line">		width: 100%;</span><br><span class="line">		height: 100%;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	.text-area &#123;</span><br><span class="line">		border: 1px solid #CCCCCC;</span><br><span class="line">		padding: 4px 4px;</span><br><span class="line">		width: 95%;</span><br><span class="line">		height: 200rpx;</span><br><span class="line">		display: flex;</span><br><span class="line">		justify-content:space-around;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	.title &#123;</span><br><span class="line">		/* border: 1px solid; */</span><br><span class="line">		font-size: 39rpx;</span><br><span class="line">		color: #8f8f94;</span><br><span class="line">		flex: 1;</span><br><span class="line">	&#125;</span><br><span class="line">	.distance&#123;</span><br><span class="line">		font-size: 25rpx;</span><br><span class="line">		color:red;</span><br><span class="line">		/* border: 1px solid; */</span><br><span class="line">		flex: 1;</span><br><span class="line">	&#125;</span><br><span class="line">	.item&#123;</span><br><span class="line">		/* border: 1px solid; */</span><br><span class="line">		flex: 1;</span><br><span class="line">	&#125;</span><br><span class="line">	.item_two&#123;</span><br><span class="line">		padding-left: 5px;</span><br><span class="line">		flex: 3;</span><br><span class="line">		display: flex;</span><br><span class="line">		flex-direction: column;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;btns&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="comment">&lt;!-- // 选取地点后的确定和取消按钮 --&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="comment">&lt;!-- 	&lt;view @click=&quot;back&quot;&gt;取消&lt;/view&gt;</span></span></span><br><span class="line"><span class="comment"><span class="language-xml">			&lt;view @click=&quot;checkAdd&quot;&gt;确定&lt;/view&gt; --&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="comment">&lt;!-- // 地图部分 --&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">map</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%; height: 60vh;&quot;</span> <span class="attr">:latitude</span>=<span class="string">&quot;latitude&quot;</span> <span class="attr">:longitude</span>=<span class="string">&quot;longitude&quot;</span> <span class="attr">:markers</span>=<span class="string">&quot;markers&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">			@<span class="attr">tap</span>=<span class="string">&quot;tap&quot;</span> <span class="attr">:include-points</span>=<span class="string">&quot;markers&quot;</span> <span class="attr">:scale</span>=<span class="string">&quot;10&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="comment">&lt;!-- &lt;view id=&quot;container&quot;&gt;&lt;/view&gt; --&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="comment">&lt;!-- // 搜索框 --&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;inputCon&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;searchView&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;iconfont icon-sousuo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;搜索地点&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;searchWords&quot;</span> <span class="attr">confirm-type</span>=<span class="string">&quot;search&quot;</span> @<span class="attr">confirm</span>=<span class="string">&quot;searchFn&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">text</span> @<span class="attr">click</span>=<span class="string">&quot;cancel&quot;</span>&gt;</span>取消<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="comment">&lt;!-- // 地点列表部分 --&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(add,index) in dataTips&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;add.id&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;select(add,index)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">				<span class="attr">:class</span>=<span class="string">&quot;selectIndex==index?&#x27;active&#x27;:&#x27;&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;name&quot;</span>&gt;</span>&#123;&#123;add.name&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">				<span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;address&quot;</span>&gt;</span>&#123;&#123;add.district || &#x27;&#x27;&#125;&#125;&#123;&#123;add.address || &#x27;&#x27;&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">			<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	  <span class="comment">// import Amap from &#x27;&#x27;;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="comment">// 引入高德地图api提供的微信小程序的接口</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">var</span> amapFile = <span class="built_in">require</span>(<span class="string">&#x27;../utils/amap-wx.130.js&#x27;</span>); <span class="comment">//如：..­/..­/libs/amap-wx.js</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="comment">// 创建地图</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">var</span> myAmapFun = <span class="keyword">new</span> amapFile.<span class="title class_">AMapWX</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">key</span>: <span class="string">&#x27;e4ee780c241c1874496e21efa14c2562&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;创建了高德地图&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">selectIndex</span>: <span class="literal">undefined</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">selectAddr</span>: &#123;&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">searchWords</span>: <span class="string">&quot;&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">id</span>: <span class="number">0</span>, <span class="comment">// 使用 marker点击事件 需要填写id</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">title</span>: <span class="string">&#x27;map&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">latitude</span>: <span class="number">39.909</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">longitude</span>: <span class="number">116.39742</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">markers</span>: [&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">latitude</span>: <span class="number">39.909</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">longitude</span>: <span class="number">116.39742</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">width</span>: <span class="number">30</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">height</span>: <span class="number">30</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="comment">// iconPath: &#x27;../../static/ditu.png&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">dataTips</span>: []</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="title function_">onLoad</span>(<span class="params">options</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">if</span> (options &amp;&amp; options.<span class="property">lng</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">this</span>.<span class="property">longitude</span> = options.<span class="property">lng</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">this</span>.<span class="property">markers</span>[<span class="number">0</span>].<span class="property">longitude</span> = <span class="variable language_">this</span>.<span class="property">longitude</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="keyword">if</span> (options &amp;&amp; options.<span class="property">lat</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">this</span>.<span class="property">latitude</span> = options.<span class="property">lat</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">this</span>.<span class="property">markers</span>[<span class="number">0</span>].<span class="property">latitude</span> = <span class="variable language_">this</span>.<span class="property">latitude</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// 获取当前位置的地点列表</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			myAmapFun.<span class="title function_">getPoiAround</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">success</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;获取当前的列表&quot;</span>, data);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="variable language_">this</span>.<span class="property">dataTips</span> = data.<span class="property">poisData</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="attr">fail</span>: <span class="function">(<span class="params">info</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="variable language_">console</span>.<span class="title function_">log</span>(info)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		<span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// 选择地点后，将选取的地点传递到前一个页面中</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// checkAdd()&#123;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// 	console.log(this.markers);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// 	uni.setStorageSync(&#x27;address&#x27;, this.markers[0]);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// 	var pages = getCurrentPages();// 获取所有的页面栈</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// 	var prevPage = pages[pages.length - 2]; // 找到上一个页面，注意是页面，如果是页面中有组件，则需要通过页面接受到数据后，再次往组件中传递</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// 	prevPage.$vm.addressObj = this.selectAddr;//在上一个页面中就可以用addressObj进行接收</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// 	uni.navigateBack();</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// &#125;,</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="title function_">back</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				uni.<span class="title function_">navigateBack</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="title function_">cancel</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">searchWords</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="variable language_">this</span>.<span class="property">searchWords</span> = <span class="string">&quot;&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					myAmapFun.<span class="title function_">getPoiAround</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="attr">location</span>: <span class="variable language_">this</span>.<span class="property">markers</span>[<span class="number">0</span>].<span class="property">longitude</span> + <span class="string">&#x27;,&#x27;</span> + <span class="variable language_">this</span>.<span class="property">markers</span>[<span class="number">0</span>].<span class="property">latitude</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="attr">success</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">							<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;获取当前的列表&quot;</span>, data);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">							<span class="variable language_">this</span>.<span class="property">dataTips</span> = data.<span class="property">poisData</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="attr">fail</span>: <span class="function">(<span class="params">info</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">							<span class="variable language_">console</span>.<span class="title function_">log</span>(info)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="title function_">reserGeo</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				myAmapFun.<span class="title function_">getRegeo</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">success</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;获取当前定位信息&quot;</span>, data);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">fail</span>: <span class="function">(<span class="params">info</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="variable language_">console</span>.<span class="title function_">log</span>(info)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// 根据地址列表中选择某一个地点</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="title function_">select</span>(<span class="params">add, index</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">console</span>.<span class="title function_">log</span>(add);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="keyword">if</span> (!add) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="keyword">return</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">this</span>.<span class="property">selectIndex</span> = index;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="keyword">var</span> location = add.<span class="property">location</span>.<span class="title function_">split</span>(<span class="string">&quot;,&quot;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">console</span>.<span class="title function_">log</span>(location);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">this</span>.<span class="property">selectAddr</span> = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">address</span>: add.<span class="property">pname</span> ? (add.<span class="property">pname</span> + add.<span class="property">cityname</span> + add.<span class="property">adname</span> + add.<span class="property">address</span>) : (add.<span class="property">district</span> + add</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						.<span class="property">address</span>),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">latitude</span>: location[<span class="number">1</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">longitude</span>: location[<span class="number">0</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">this</span>.<span class="property">markers</span>[<span class="number">0</span>].<span class="property">latitude</span> = +location[<span class="number">1</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">this</span>.<span class="property">markers</span>[<span class="number">0</span>].<span class="property">longitude</span> = +location[<span class="number">0</span>];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// 在地图上点击进行选点，这个选点在地图缩放比例较大时无效，因为精读的问题。</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="title function_">tap</span>(<span class="params">e</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="keyword">var</span> location = e.<span class="property">detail</span>.<span class="property">longitude</span> + <span class="string">&#x27;,&#x27;</span> + e.<span class="property">detail</span>.<span class="property">latitude</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				myAmapFun.<span class="title function_">getRegeo</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">location</span>: location,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">success</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;获取指定定位信息&quot;</span>, data);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="variable language_">this</span>.<span class="property">selectAddr</span> = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">							<span class="attr">address</span>: data[<span class="number">0</span>].<span class="property">regeocodeData</span>.<span class="property">formatted_address</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">							<span class="attr">latitude</span>: e.<span class="property">detail</span>.<span class="property">latitude</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">							<span class="attr">longitude</span>: e.<span class="property">detail</span>.<span class="property">longitude</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="variable language_">this</span>.<span class="property">markers</span>[<span class="number">0</span>].<span class="property">latitude</span> = data[<span class="number">0</span>].<span class="property">latitude</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="variable language_">this</span>.<span class="property">markers</span>[<span class="number">0</span>].<span class="property">longitude</span> = data[<span class="number">0</span>].<span class="property">longitude</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						myAmapFun.<span class="title function_">getPoiAround</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">							<span class="attr">location</span>: data[<span class="number">0</span>].<span class="property">longitude</span> + <span class="string">&#x27;,&#x27;</span> + data[<span class="number">0</span>].<span class="property">latitude</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">							<span class="attr">success</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">								<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;获取当前的列表&quot;</span>, data);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">								<span class="variable language_">this</span>.<span class="property">dataTips</span> = data.<span class="property">poisData</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">							&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">							<span class="attr">fail</span>: <span class="function">(<span class="params">info</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">								<span class="variable language_">console</span>.<span class="title function_">log</span>(info)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">							&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">fail</span>: <span class="function">(<span class="params">info</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="variable language_">console</span>.<span class="title function_">log</span>(info);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="comment">// 根据内容进行检索</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			<span class="title function_">searchFn</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;根据地址检索&quot;</span>, <span class="variable language_">this</span>.<span class="property">searchWords</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				myAmapFun.<span class="title function_">getInputtips</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">keywords</span>: <span class="variable language_">this</span>.<span class="property">searchWords</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">location</span>: <span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">success</span>: <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">111</span>, data);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="keyword">if</span> (data &amp;&amp; data.<span class="property">tips</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">							<span class="variable language_">this</span>.<span class="property">dataTips</span> = data.<span class="property">tips</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					<span class="attr">fail</span>: <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">						<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">222</span>, data);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">					&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">				&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">		&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">	<span class="selector-class">.btns</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">position</span>: fixed;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">top</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">left</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">height</span>: <span class="number">260</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to bottom, <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.4</span>), <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>));</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">display</span>: flex;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">align-items</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">justify-content</span>: space-between;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="attribute">z-index</span>: <span class="number">10</span> <span class="meta">!important</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		view &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">margin</span>: <span class="number">100</span>upx <span class="number">24</span>upx <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">font-size</span>: <span class="number">30</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			&amp;<span class="selector-pseudo">:first</span>-child &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">color</span>: <span class="number">#fff</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			&amp;<span class="selector-pseudo">:last-child</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">width</span>: <span class="number">100</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">height</span>: <span class="number">60</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">line-height</span>: <span class="number">60</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">text-align</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">border-radius</span>: <span class="number">10</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">background</span>: <span class="number">#E13500</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">color</span>: <span class="number">#fff</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">	<span class="selector-class">.content</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="selector-class">.list</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">height</span>: <span class="built_in">calc</span>(<span class="number">40vh</span> - <span class="number">100</span>upx);</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">overflow-y</span>: auto;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">width</span>: <span class="number">702</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">margin</span>: -<span class="number">40</span>upx auto <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">padding-bottom</span>: <span class="number">20</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="selector-class">.item</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">border-bottom</span>: <span class="number">2</span>upx solid <span class="number">#f3f3f3</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				&amp;<span class="selector-pseudo">:last-child</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					<span class="attribute">border</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="selector-class">.address</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					<span class="attribute">font-size</span>: <span class="number">22</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					<span class="attribute">color</span>: <span class="number">#666</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					<span class="attribute">margin</span>: <span class="number">10</span>upx <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="selector-class">.name</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					<span class="attribute">font-size</span>: <span class="number">30</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					<span class="attribute">color</span>: <span class="number">#333</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					<span class="attribute">margin-top</span>: <span class="number">10</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				&amp;<span class="selector-class">.active</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					<span class="selector-class">.name</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">						<span class="attribute">font-weight</span>: bold;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">						<span class="attribute">color</span>: <span class="number">#E13500</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					<span class="selector-class">.address</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">						<span class="attribute">color</span>: <span class="number">#E13500</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		<span class="selector-class">.inputCon</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">background</span>: <span class="number">#fff</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">top</span>: -<span class="number">60</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">position</span>: relative;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">z-index</span>: <span class="number">20</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">height</span>: <span class="number">100</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">display</span>: flex;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">align-items</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="attribute">justify-content</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			<span class="selector-class">.searchView</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">width</span>: <span class="number">702</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">height</span>: <span class="number">60</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">display</span>: flex;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">align-items</span>: center;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">line-height</span>: <span class="number">60</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">border-radius</span>: <span class="number">40</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">padding</span>: <span class="number">0</span> <span class="number">30</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">box-sizing</span>: border-box;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">background</span>: <span class="number">#f3f3f3</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="attribute">font-size</span>: <span class="number">26</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="selector-class">.iconfont</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					<span class="attribute">color</span>: <span class="number">#666</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					<span class="attribute">margin-right</span>: <span class="number">20</span>upx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				<span class="selector-tag">input</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					<span class="attribute">flex</span>: <span class="number">1</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				view &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">					<span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">				&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">			&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">		&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">	&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>



<p>可能需要这个</p>
<div class="highlight-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://webapi.amap.com/maps?v=1.4.15&amp;key=4b7793c9b5af36258a1bf93a7cbc36e8&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">key: 是地图的key值</span><br></pre></td></tr></table></figure></div>





<h2 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h2><div class="highlight-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 		&lt;map :scale=&quot;scale&quot; class=&quot;map&quot; enable-3D=&quot;false&quot; show-compass=&quot;false&quot; enable-overlooking=&quot;false&quot;</span></span><br><span class="line"><span class="comment">			:enable-satellite=&quot;false&quot; :enable-traffic=&quot;false&quot; show-location=&quot;false&quot; :latitude=&quot;latitude&quot;</span></span><br><span class="line"><span class="comment">			:longitude=&quot;longitude&quot; :markers=&quot;markers&quot;&gt;</span></span><br><span class="line"><span class="comment">		&lt;/map&gt; --&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">view</span> <span class="attr">id</span>=<span class="string">&quot;activeMap&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">view</span> @<span class="attr">tap</span>=<span class="string">&quot;activeMarker=&#123;&#125;&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-body map-view&quot;</span> <span class="attr">style</span>=<span class="string">&quot;z-index: 1;position: relative;&quot;</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;page-section page-section-gap map-view&quot;</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">map</span> <span class="attr">class</span>=<span class="string">&quot;map&quot;</span> <span class="attr">:markers</span>=<span class="string">&quot;shops&quot;</span> <span class="attr">id</span>=<span class="string">&quot;map1&quot;</span> <span class="attr">:show-location</span>=<span class="string">&quot;true&quot;</span> <span class="attr">:latitude</span>=<span class="string">&quot;latitude&quot;</span></span></span><br><span class="line"><span class="tag">							<span class="attr">:longitude</span>=<span class="string">&quot;longitude&quot;</span> @<span class="attr">regionchange</span>=<span class="string">&quot;regionChange&quot;</span> <span class="attr">poitap</span>=<span class="string">&quot;poitap&quot;</span></span></span><br><span class="line"><span class="tag">							@<span class="attr">tap</span>=<span class="string">&quot;activeMarker=&#123;&#125;&quot;</span>&gt;</span></span><br><span class="line">							<span class="comment">&lt;!-- @markertap 点击标记点时触发，e.detail = &#123;markerId&#125;--&gt;</span></span><br><span class="line">							<span class="comment">&lt;!-- @tap 点击地图时触发--&gt;</span></span><br><span class="line">							<span class="comment">&lt;!-- @regionchange 视野发生变化时触发--&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">						<span class="comment">&lt;!-- &lt;cover-image class=&quot;map-image&quot; src=&quot;../../static/logo.png&quot;&gt;&lt;/cover-image&gt; --&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 	&lt;map :polyline=&quot;polyline&quot; :scale=&quot;scale&quot; id=&quot;maps&quot; :markers=&quot;markers&quot; :latitude=&quot;center.latitude&quot;</span></span><br><span class="line"><span class="comment">			:longitude=&quot;center.longitude&quot;&gt;</span></span><br><span class="line"><span class="comment">		&lt;/map&gt; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">var</span> <span class="title class_">QQMapWX</span> = <span class="built_in">require</span>(<span class="string">&#x27;../utils/qqmap-wx-jssdk.js&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">	<span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">longitude</span>: <span class="number">116.39</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">latitude</span>: <span class="number">39.90</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">markers</span>: [&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">id</span>: <span class="number">1</span>, <span class="comment">// Number</span></span></span><br><span class="line"><span class="language-javascript">					<span class="attr">title</span>: <span class="string">&#x27;1&#x27;</span>, <span class="comment">// String-标注点名</span></span></span><br><span class="line"><span class="language-javascript">					<span class="attr">rotate</span>: <span class="number">180</span>, <span class="comment">// Number - 顺时针旋转的角度，范围 0 ~ 360，默认为 0</span></span></span><br><span class="line"><span class="language-javascript">					<span class="attr">alpha</span>: <span class="number">0.5</span>, <span class="comment">// 默认1，无透明，范围 0 ~ 1</span></span></span><br><span class="line"><span class="language-javascript">					<span class="attr">latitude</span>: <span class="number">39.899</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">longitude</span>: <span class="number">116.39742</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">width</span>: <span class="number">30</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">height</span>: <span class="number">30</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">callout</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">display</span>: <span class="string">&quot;BYCLICK&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">padding</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">borderRadius</span>: <span class="number">5</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">content</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					&#125;,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">anchor</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">iconPath</span>: <span class="string">&#x27;../../static/logo.png&#x27;</span>, <span class="comment">// 显示的图标</span></span></span><br><span class="line"><span class="language-javascript">				&#125;, &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">id</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">title</span>: <span class="string">&#x27;2&#x27;</span>, <span class="comment">// String</span></span></span><br><span class="line"><span class="language-javascript">					<span class="attr">latitude</span>: <span class="number">39.90</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">longitude</span>: <span class="number">116.39</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">callout</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">color</span>: <span class="string">&#x27;#007AFF&#x27;</span>, <span class="comment">// 文本颜色</span></span></span><br><span class="line"><span class="language-javascript">						<span class="attr">bgColor</span>: <span class="string">&#x27;#563BFF&#x27;</span>, <span class="comment">// 背景色</span></span></span><br><span class="line"><span class="language-javascript">						<span class="attr">display</span>: <span class="string">&quot;ALWAYS&quot;</span>, <span class="comment">// &#x27;BYCLICK&#x27;:点击显示; &#x27;ALWAYS&#x27;:常显</span></span></span><br><span class="line"><span class="language-javascript">						<span class="attr">fontSize</span>: <span class="number">15</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">textAlign</span>: <span class="string">&#x27;left&#x27;</span>, <span class="comment">// 文本对齐方式。有效值: left, right, center</span></span></span><br><span class="line"><span class="language-javascript">						<span class="attr">padding</span>: <span class="number">10</span>, <span class="comment">// 文本边缘留白</span></span></span><br><span class="line"><span class="language-javascript">						<span class="attr">borderRadius</span>: <span class="number">5</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">content</span>: <span class="string">&#x27;腾讯地图&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					&#125;,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">label</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">content</span>: <span class="string">&#x27;Jeskson&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">color</span>: <span class="string">&#x27;#000000&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">fontSize</span>: <span class="number">12</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">borderWidth</span>: <span class="number">12</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">borderColor</span>: <span class="string">&#x27;#007AFF&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">borderRadius</span>: <span class="number">5</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">padding</span>: <span class="number">5</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">textAlign</span>: <span class="string">&#x27;center&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">bgColor</span>: <span class="string">&#x27;#563BFF&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					&#125;,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">iconPath</span>: <span class="string">&#x27;../../static/logo.png&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				&#125;],</span></span><br><span class="line"><span class="language-javascript">	</span></span><br><span class="line"><span class="language-javascript">				</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">chooseLocation</span>(<span class="params">e</span>) &#123; <span class="comment">//打开地图选择位置</span></span></span><br><span class="line"><span class="language-javascript">	uni.<span class="title function_">chooseLocation</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">		<span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;位置名称：&#x27;</span> + res.<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;详细地址：&#x27;</span> + res.<span class="property">address</span>);</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;纬度：&#x27;</span> + res.<span class="property">latitude</span>);</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;经度：&#x27;</span> + res.<span class="property">longitude</span>);</span></span><br><span class="line"><span class="language-javascript">			uni.<span class="title function_">getLocation</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">type</span>: <span class="string">&#x27;gcj02&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">altitude</span>:<span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">geocode</span>:<span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;当前位置的经度：&#x27;</span> + res.<span class="property">longitude</span>);</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;当前位置的纬度：&#x27;</span> + res.<span class="property">latitude</span>);</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;);</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;省：&#x27;</span> + res.<span class="property">address</span>.<span class="title function_">slice</span>(<span class="number">0</span>, res.<span class="property">address</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;省&#x27;</span>) + <span class="number">1</span>));</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;市：&#x27;</span> + res.<span class="property">address</span>.<span class="title function_">slice</span>(res.<span class="property">address</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;省&#x27;</span>) + <span class="number">1</span>, res.<span class="property">address</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;市&#x27;</span>) + <span class="number">1</span>));</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;区：&#x27;</span> + res.<span class="property">address</span>.<span class="title function_">slice</span>(res.<span class="property">address</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;市&#x27;</span>) + <span class="number">1</span>, res.<span class="property">address</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;区&#x27;</span>) + <span class="number">1</span>));</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">this</span>.<span class="property">query</span>.<span class="property">address</span> = res.<span class="property">address</span>;</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">this</span>.<span class="property">query</span>.<span class="property">latitude</span> = res.<span class="property">latitude</span>;</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">this</span>.<span class="property">query</span>.<span class="property">longitude</span> = res.<span class="property">longitude</span>;</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">this</span>.<span class="property">query</span>.<span class="property">province</span> = res.<span class="property">address</span>.<span class="title function_">slice</span>(<span class="number">0</span>, res.<span class="property">address</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;省&#x27;</span>) + <span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">this</span>.<span class="property">query</span>.<span class="property">city</span> = res.<span class="property">address</span>.<span class="title function_">slice</span>(res.<span class="property">address</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;省&#x27;</span>) + <span class="number">1</span>, res.<span class="property">address</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;市&#x27;</span>) + <span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">this</span>.<span class="property">query</span>.<span class="property">district</span> = res.<span class="property">address</span>.<span class="title function_">slice</span>(res.<span class="property">address</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;市&#x27;</span>) + <span class="number">1</span>, res.<span class="property">address</span>.<span class="title function_">indexOf</span>(<span class="string">&#x27;区&#x27;</span>) + <span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">		&#125;</span></span><br><span class="line"><span class="language-javascript">	&#125;);</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript">	</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">regionChange</span>(<span class="params"></span>) &#123; <span class="comment">// 移动地图后重新获取门店</span></span></span><br><span class="line"><span class="language-javascript">				uni.<span class="title function_">createMapContext</span>(<span class="string">&#x27;map1&#x27;</span>, <span class="variable language_">this</span>).<span class="title function_">getCenterLocation</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">latitude</span>)</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">longitude</span>)</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">this</span>.<span class="property">shopTimeout</span> = <span class="built_in">setTimeout</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">							<span class="variable language_">this</span>.<span class="property">shops</span> = [&#123;</span></span><br><span class="line"><span class="language-javascript">								<span class="attr">address</span>: <span class="string">&quot;广东省汕头市xxx区xx大道1&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="attr">distance</span>: <span class="number">122</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="attr">end_time</span>: <span class="string">&quot;1&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="attr">id</span>: <span class="number">2</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="attr">latitude</span>: <span class="string">&quot;22.72078500009999&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="attr">longitude</span>: <span class="string">&quot;114.36090200009999&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="attr">shop</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">									<span class="attr">iconPath</span>: <span class="string">&#x27;../../static/logo.png&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">									<span class="attr">id</span>: <span class="number">3</span>,</span></span><br><span class="line"><span class="language-javascript">									<span class="attr">latitude</span>: <span class="string">&quot;22.72078500009999&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">									<span class="attr">longitude</span>: <span class="string">&quot;114.36090200009999&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">									<span class="attr">height</span>: <span class="number">34</span>,</span></span><br><span class="line"><span class="language-javascript">									<span class="attr">width</span>: <span class="number">34</span>,</span></span><br><span class="line"><span class="language-javascript">									<span class="attr">shop</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">										<span class="attr">return</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">									&#125;</span></span><br><span class="line"><span class="language-javascript">								&#125;,</span></span><br><span class="line"><span class="language-javascript">								<span class="attr">return</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="attr">height</span>: <span class="number">34</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="attr">width</span>: <span class="number">34</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="attr">start_time</span>: <span class="string">&quot;1&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="attr">store_name</span>: <span class="string">&quot;三星大酒店&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">								<span class="attr">iconPath</span>: <span class="string">&#x27;../../static/logo.png&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">							&#125;]</span></span><br><span class="line"><span class="language-javascript">						&#125;, <span class="number">500</span>)</span></span><br><span class="line"><span class="language-javascript">					&#125;,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">fail</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">						uni.<span class="title function_">showModal</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">							<span class="attr">content</span>: <span class="string">&#x27;获取位置失败&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">							<span class="attr">showCancel</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">						&#125;)</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;)</span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 播放标记点</span></span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">playMarkars</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">polyline</span>.<span class="property">length</span> == <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">					uni.<span class="title function_">showModal</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">content</span>: <span class="string">&#x27;当前时间范围内没有轨迹,无法播放！&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					&#125;)</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">this</span>.<span class="property">isPlay</span> = <span class="literal">false</span> <span class="comment">// 无</span></span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">this</span>.<span class="property">playIndex</span> = <span class="number">0</span> <span class="comment">// 第一个</span></span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">this</span>.<span class="property">playIndex</span> = <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="variable language_">this</span>.<span class="property">points</span>.<span class="property">length</span> - <span class="number">1</span>, <span class="variable language_">this</span>.<span class="property">playIndex</span>)</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">this</span>.<span class="property">markers</span> = [<span class="variable language_">this</span>.<span class="title function_">formatMarker</span>(<span class="variable language_">this</span>.<span class="property">points</span>[<span class="variable language_">this</span>.<span class="property">playIndex</span>++], <span class="string">&#x27;ALWAYS&#x27;</span>)]</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">markers</span>)</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setInterval</span>(<span class="function"><span class="params">_</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">var</span> i = <span class="variable language_">this</span>.<span class="property">playIndex</span>++</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">this</span>.<span class="title function_">nextAdaress</span>(i);</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">if</span> (i &gt;= <span class="variable language_">this</span>.<span class="property">points</span>.<span class="property">length</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>)</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">this</span>.<span class="property">isPlay</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">this</span>.<span class="property">playIndex</span> = <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">this</span>.<span class="title function_">initMarkers</span>()</span></span><br><span class="line"><span class="language-javascript">						<span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">this</span>.<span class="property">markers</span> = [<span class="variable language_">this</span>.<span class="title function_">formatMarker</span>(<span class="variable language_">this</span>.<span class="property">points</span>[i], <span class="string">&#x27;ALWAYS&#x27;</span>)]</span></span><br><span class="line"><span class="language-javascript">				&#125;, <span class="number">1000</span>)</span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">formatMarker</span>(<span class="params">point, display = <span class="string">&quot;BYCLICK&quot;</span></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">let</span> content = [</span></span><br><span class="line"><span class="language-javascript">					<span class="string">&quot;时间：&quot;</span> + <span class="title function_">parseTime</span>(point.<span class="property">create_time</span>),</span></span><br><span class="line"><span class="language-javascript">					<span class="string">&quot;运动状态：&quot;</span> + (point.<span class="property">sport</span> == <span class="number">1</span> ? <span class="string">&#x27;运动&#x27;</span> : <span class="string">&#x27;静止&#x27;</span>),</span></span><br><span class="line"><span class="language-javascript">					<span class="string">&quot;地址：&quot;</span> + point.<span class="property">address</span> || <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				]</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">id</span>: point.<span class="property">id</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">iconPath</span>: <span class="string">&#x27;/static/dada.png&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">width</span>: <span class="number">35</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">height</span>: <span class="number">35</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">latitude</span>: point.<span class="property">latitude</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">longitude</span>: point.<span class="property">longitude</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">callout</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">display</span>: display,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">padding</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">borderRadius</span>: <span class="number">5</span>,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">content</span>: content.<span class="title function_">join</span>(<span class="string">&quot;\n&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">nextAdaress</span>(<span class="params">index</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">const</span> len = <span class="number">10</span>;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">isGetAddress</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">return</span></span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">points</span>[i + index]) &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="keyword">break</span></span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">points</span>[i + index].<span class="property">address</span> === <span class="literal">undefined</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">this</span>.<span class="property">isGetAddress</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">this</span>.<span class="title function_">getAddress</span>(i + index, len * <span class="number">2</span>, <span class="function"><span class="params">_</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">							<span class="variable language_">this</span>.<span class="property">isGetAddress</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">						&#125;);</span></span><br><span class="line"><span class="language-javascript">						<span class="keyword">break</span></span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript">			<span class="title function_">poitap</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>)</span></span><br><span class="line"><span class="language-javascript">			&#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">		<span class="title function_">onShow</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> qqmapsdk</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;页面加载了&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 实例化API核心类</span></span></span><br><span class="line"><span class="language-javascript">			qqmapsdk = <span class="keyword">new</span> <span class="title class_">QQMapWX</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// key: &#x27;申请的key&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				<span class="attr">key</span>: <span class="string">&#x27;3MCBZ-EK6WU-Q3CVU-BPPMF-CAW6E-C4B6Y&#x27;</span></span></span><br><span class="line"><span class="language-javascript">			&#125;);</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">this</span>.<span class="title function_">chooseLocation</span>()</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;页面显示了&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">//调用获取城市列表接口</span></span></span><br><span class="line"><span class="language-javascript">			qqmapsdk.<span class="title function_">getCityList</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123; <span class="comment">//成功后的回调</span></span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;省份数据：&#x27;</span>, res.<span class="property">result</span>[<span class="number">0</span>]); <span class="comment">//打印省份数据</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// this.a = res.result[0]</span></span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;城市数据：&#x27;</span>, res.<span class="property">result</span>[<span class="number">1</span>]); <span class="comment">//打印城市数据</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// this.b = res.result[1]</span></span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;区县数据：&#x27;</span>, res.<span class="property">result</span>[<span class="number">2</span>]); <span class="comment">//打印区县数据</span></span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// this.c = res.result[2]</span></span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">fail</span>: <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span></span><br><span class="line"><span class="language-javascript">				&#125;,</span></span><br><span class="line"><span class="language-javascript">				<span class="attr">complete</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;);</span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">		<span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> qqmapsdk</span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;页面加载了&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			<span class="comment">// 实例化API核心类</span></span></span><br><span class="line"><span class="language-javascript">			qqmapsdk = <span class="keyword">new</span> <span class="title class_">QQMapWX</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="comment">// key: &#x27;申请的key&#x27;</span></span></span><br><span class="line"><span class="language-javascript">				<span class="attr">key</span>: <span class="string">&#x27;3MCBZ-EK6WU-Q3CVU-BPPMF-CAW6E-C4B6Y&#x27;</span></span></span><br><span class="line"><span class="language-javascript">			&#125;);</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">				uni.<span class="title function_">getLocation</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">geocode</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">type</span>: <span class="string">&#x27;wgs84&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">console</span>.<span class="title function_">log</span>(res, <span class="string">&#x27;获取当前位置&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">this</span>.<span class="property">longitude</span> = res.<span class="property">longitude</span></span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">this</span>.<span class="property">latitude</span> = res.<span class="property">latitude</span></span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">longitude</span>, <span class="variable language_">this</span>.<span class="property">latitude</span>, <span class="string">&#x27;jhhh&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">					&#125;,</span></span><br><span class="line"><span class="language-javascript">					<span class="attr">address</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;address&#x27;</span>, res)</span></span><br><span class="line"><span class="language-javascript">						</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;);</span></span><br><span class="line"><span class="language-javascript">			</span></span><br><span class="line"><span class="language-javascript">				<span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">var</span> qqmapsdk</span></span><br><span class="line"><span class="language-javascript">					<span class="comment">// 实例化API核心类</span></span></span><br><span class="line"><span class="language-javascript">					qqmapsdk = <span class="keyword">new</span> <span class="title class_">QQMapWX</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">key</span>: <span class="string">&#x27;3MCBZ-EK6WU-Q3CVU-BPPMF-CAW6E-C4B6Y&#x27;</span></span></span><br><span class="line"><span class="language-javascript">					&#125;);</span></span><br><span class="line"><span class="language-javascript">					qqmapsdk.<span class="title function_">reverseGeocoder</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">location</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">							<span class="attr">latitude</span>: <span class="variable language_">this</span>.<span class="property">latitude</span>,</span></span><br><span class="line"><span class="language-javascript">							<span class="attr">longitude</span>: <span class="variable language_">this</span>.<span class="property">longitude</span></span></span><br><span class="line"><span class="language-javascript">						&#125;,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">							<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;reverseGeocoder&#x27;</span>, res)</span></span><br><span class="line"><span class="language-javascript">						&#125;,</span></span><br><span class="line"><span class="language-javascript">						<span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">							<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;reverseGeocoder&#x27;</span>, err)</span></span><br><span class="line"><span class="language-javascript">						&#125;</span></span><br><span class="line"><span class="language-javascript">					&#125;)</span></span><br><span class="line"><span class="language-javascript">				&#125;, <span class="number">2000</span>)</span></span><br><span class="line"><span class="language-javascript">		&#125;,</span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// onShow() &#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 	console.log(&#x27;页面显示了&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 	// 调用接口dadaqianduan</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 	qqmapsdk.search(&#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		keyword: &#x27;酒店&#x27;,</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		success: (res) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			console.log(res);</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		&#125;,</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		fail: (err) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			console.log(err);</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		&#125;,</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		complete: (cres) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			console.log(cres);</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		&#125;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 	&#125;)</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// &#125;,</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// onLoad() &#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 	uni.getLocation(&#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		geocode: true,</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		type: &#x27;wgs84&#x27;,</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		success: (res) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			console.log(res, &#x27;获取当前位置&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			this.longitude = res.longitude</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			this.latitude = res.latitude</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			console.log(this.longitude, this.latitude, &#x27;jhhh&#x27;)</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		&#125;,</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		address: (res) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			console.log(&#x27;address&#x27;, res)</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		&#125;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 	&#125;);</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 	setTimeout(() =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		var qqmapsdk</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		// 实例化API核心类</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		qqmapsdk = new QQMapWX(&#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			key: &#x27;3MCBZ-EK6WU-Q3CVU-BPPMF-CAW6E-C4B6Y&#x27;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		&#125;);</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		qqmapsdk.reverseGeocoder(&#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			location: &#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 				latitude: this.latitude,</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 				longitude: this.longitude</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			&#125;,</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			success: (res) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 				console.log(&#x27;reverseGeocoder&#x27;, res)</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			&#125;,</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			fail: (err) =&gt; &#123;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 				console.log(&#x27;reverseGeocoder&#x27;, err)</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 			&#125;</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 		&#125;)</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// 	&#125;, 2000)</span></span></span><br><span class="line"><span class="language-javascript">		<span class="comment">// &#125;,</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">	&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">	<span class="selector-class">.map</span> &#123;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">width</span>: <span class="number">750</span>rpx;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">height</span>: <span class="number">1500</span>rpx;</span></span><br><span class="line"><span class="language-css">	&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></div>



<h1 id="uni-App-获取自己的经纬度"><a href="#uni-App-获取自己的经纬度" class="headerlink" title="uni-App  获取自己的经纬度"></a>uni-App  获取自己的经纬度</h1><p>mounted(){}</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">uni.<span class="title function_">getLocation</span>(&#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;wgs84&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;当前位置的经度：&#x27;</span> + res.<span class="property">longitude</span>);</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;当前位置的纬度：&#x27;</span> + res.<span class="property">latitude</span>);</span><br><span class="line">                <span class="keyword">var</span> point = <span class="keyword">new</span> plus.<span class="property">maps</span>.<span class="title class_">Point</span>(res.<span class="property">longitude</span>, res.<span class="property">latitude</span>);</span><br><span class="line">                plus.<span class="property">maps</span>.<span class="property">Map</span>.<span class="title function_">reverseGeocode</span>(</span><br><span class="line">                    point,</span><br><span class="line">                    &#123;&#125;,</span><br><span class="line">                    <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">                        <span class="keyword">var</span> address = event.<span class="property">address</span>; <span class="comment">// 转换后的地理位置</span></span><br><span class="line">                        <span class="keyword">var</span> point = event.<span class="property">coord</span>; <span class="comment">// 转换后的坐标信息</span></span><br><span class="line">                        <span class="keyword">var</span> coordType = event.<span class="property">coordType</span>; <span class="comment">// 转换后的坐标系类型</span></span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(address, <span class="string">&#x27;address&#x27;</span>);</span><br><span class="line">                        <span class="keyword">var</span> reg = <span class="regexp">/.+?(省|市|自治区|自治州|县|区)/g</span>;</span><br><span class="line">                        </span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(address.<span class="title function_">match</span>(reg));</span><br><span class="line">                        _this.<span class="property">addressList</span>=address.<span class="title function_">match</span>(reg).<span class="title function_">toString</span>().<span class="title function_">split</span>(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                         _this.<span class="property">address</span>= _this.<span class="property">addressList</span>[<span class="number">1</span>];</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(_this.<span class="property">addressList</span>[<span class="number">0</span>]);</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(_this.<span class="property">addressList</span>[<span class="number">1</span>]);</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(_this.<span class="property">addressList</span>[<span class="number">2</span>]);</span><br><span class="line">                        </span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="keyword">function</span>(<span class="params">e</span>) &#123;&#125;</span><br><span class="line">                );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure></div>



<h2 id="地图"><a href="#地图" class="headerlink" title="地图"></a>地图</h2><p><a class="link"   target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45781661/article/details/118176658" >uniapp中map地图定位的使用 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p><a class="link"   target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42127307/article/details/122056062" >uniapp 两地经纬度距离计算 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h1 id="uni-app-人脸识别"><a href="#uni-app-人脸识别" class="headerlink" title="uni-app 人脸识别"></a>uni-app 人脸识别</h1><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;view class=&quot;content&quot; v-if=&quot;showHeader&quot;</span><br><span class="line">		style=&quot;position: fixed;top: 0;left: 0;z-index: 777;width: 100%;height: 100vh;background-color: #FFFFFF;&quot;&gt;</span><br><span class="line">		&lt;camera :binderror=&quot;handleCameraError&quot; :device-position=&quot;devicePosition&quot; flash=&quot;off&quot;</span><br><span class="line">			style=&quot;width: 100%; height: 80vh;&quot;&gt;</span><br><span class="line">			&lt;cover-image src=&quot;https://img-blog.csdnimg.cn/20210126152753150.png&quot;</span><br><span class="line">				style=&quot;width: 100%;height: 700rpx;margin-top:100rpx;&quot;&gt;&lt;/cover-image&gt;</span><br><span class="line"></span><br><span class="line">		&lt;/camera&gt;</span><br><span class="line">		&lt;view class=&quot;btns&quot; style=&quot;width: 100%;height: 20vh;background: #3B4144;&quot;&gt;</span><br><span class="line">			&lt;image class=&quot;item&quot; @tap=&quot;chooseImage&quot; src=&quot;../../static/logo.png&quot;&gt;&lt;/image&gt;</span><br><span class="line">			&lt;image class=&quot;item&quot; @tap=&quot;takePhotoByHead&quot; src=&quot;../../static/logo.png&quot;&gt;&lt;/image&gt;</span><br><span class="line">			&lt;image class=&quot;item&quot; @tap=&quot;reverseCamera&quot; src=&quot;../../static/logo.png&quot;&gt;&lt;/image&gt;</span><br><span class="line">		&lt;/view&gt;</span><br><span class="line">		&lt;image :src=&quot;imgUrl&quot; mode=&quot;&quot;&gt;&lt;/image&gt;</span><br><span class="line">		&lt;!-- &lt;view class=&quot;error-handler&quot; v-if=&quot;!authCamera&quot;&gt;</span><br><span class="line">			&lt;button class=&quot;nobtn&quot; openType=&quot;openSetting&quot;&gt;打开相机授权&lt;/button&gt;</span><br><span class="line">		&lt;/view&gt; --&gt;</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">		data() &#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				authCamera: false,</span><br><span class="line">				showHeader: true,</span><br><span class="line">				ctxHeader: null,</span><br><span class="line">				devicePosition: &#x27;front&#x27;,</span><br><span class="line">				imgUrl: &#x27;&#x27;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		watch: &#123;</span><br><span class="line">			showHeader(val) &#123;</span><br><span class="line">				console.log(val)</span><br><span class="line">				return</span><br><span class="line">				var that = this;</span><br><span class="line">				//获取相机权限</span><br><span class="line">				uni.getSetting(&#123;</span><br><span class="line">					success(res) &#123;</span><br><span class="line">						console.log(&#x27;相机权限:&#x27;, res)</span><br><span class="line">						if (res.authSetting[&quot;scope.camera&quot;]) &#123;</span><br><span class="line">							that.authCamera = true</span><br><span class="line">						&#125; else &#123;</span><br><span class="line">							that.authCamera = false</span><br><span class="line">							// uni.showModal(&#123;</span><br><span class="line">							// 	title: &#x27;权限申请&#x27;,</span><br><span class="line">							// 	content: &#x27;需要摄像头权限，以拍摄照片。&#x27;,</span><br><span class="line">							// 	success: (btn_res) =&gt; &#123;</span><br><span class="line">							// 		if (btn_res.confirm) &#123;</span><br><span class="line">							// 			uni.authorize(&#123;</span><br><span class="line">							// 				scope: &#x27;scope.camera&#x27;,</span><br><span class="line">							// 				success() &#123;</span><br><span class="line">							// 					that.authCamera = true</span><br><span class="line">							// 				&#125;</span><br><span class="line">							// 			&#125;)</span><br><span class="line">							// 		&#125; else if (btn_res.cancel) &#123;</span><br><span class="line"></span><br><span class="line">							// 		&#125;</span><br><span class="line">							// 	&#125;</span><br><span class="line">							// &#125;);</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		onShow() &#123;</span><br><span class="line">			var that = this;</span><br><span class="line">			//获取相机权限</span><br><span class="line">			uni.getSetting(&#123;</span><br><span class="line">				success(res) &#123;</span><br><span class="line">					console.log(&#x27;相机权限:&#x27;, res)</span><br><span class="line">					if (res.authSetting[&quot;scope.camera&quot;]) &#123;</span><br><span class="line">						that.authCamera = true</span><br><span class="line">					&#125; else &#123;</span><br><span class="line">						that.authCamera = false</span><br><span class="line">						// uni.showModal(&#123;</span><br><span class="line">						// 	title: &#x27;权限申请&#x27;,</span><br><span class="line">						// 	content: &#x27;需要摄像头权限，以拍摄照片。&#x27;,</span><br><span class="line">						// 	success: (btn_res) =&gt; &#123;</span><br><span class="line">						// 		if (btn_res.confirm) &#123;</span><br><span class="line">						// 			uni.authorize(&#123;</span><br><span class="line">						// 				scope: &#x27;scope.camera&#x27;,</span><br><span class="line">						// 				success() &#123;</span><br><span class="line">						// 					that.authCamera = true</span><br><span class="line">						// 				&#125;</span><br><span class="line">						// 			&#125;)</span><br><span class="line">						// 		&#125; else if (btn_res.cancel) &#123;</span><br><span class="line"></span><br><span class="line">						// 		&#125;</span><br><span class="line">						// 	&#125;</span><br><span class="line">						// &#125;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;,</span><br><span class="line">		onLoad() &#123;</span><br><span class="line">			// console.log(window.innerHeight)</span><br><span class="line">			// if (uni.createCameraContext) &#123;</span><br><span class="line">			// 	setTimeout(() =&gt; &#123;</span><br><span class="line">			// 		this.cameraContext = uni.createCameraContext();</span><br><span class="line">			// 	&#125;, 200)</span><br><span class="line">			// &#125; else &#123;</span><br><span class="line">			// 	// 如果希望用户在最新版本的客户端上体验您的小程序，可以这样子提示</span><br><span class="line">			// 	uni.showModal(&#123;</span><br><span class="line">			// 		title: &#x27;提示&#x27;,</span><br><span class="line">			// 		content: &#x27;当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。&#x27;</span><br><span class="line">			// 	&#125;)</span><br><span class="line">			// &#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		methods: &#123;</span><br><span class="line">			chooseImage() &#123;</span><br><span class="line">				uni.chooseImage(&#123;</span><br><span class="line">					count: 1, //默认9</span><br><span class="line">					sizeType: [&#x27;original&#x27;, &#x27;compressed&#x27;], //可以指定是原图还是压缩图，默认二者都有</span><br><span class="line">					sourceType: [&#x27;album&#x27;], //从相册选择</span><br><span class="line">					success: (res) =&gt; &#123;</span><br><span class="line">						this.newPath = res.tempFilePaths[0]</span><br><span class="line">						console.log(this.newPath)</span><br><span class="line">						// this.$store.commit(&#x27;set_photo&#x27;, this.newPath)</span><br><span class="line">						// uni.navigateBack(&#123;</span><br><span class="line">						//     delta: 1</span><br><span class="line">						// &#125;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;,</span><br><span class="line">			//拍摄头像</span><br><span class="line">			takePhotoByHead() &#123;</span><br><span class="line">				this.showHeader = true //开启拍照</span><br><span class="line">				this.ctxHeader = uni.createCameraContext();</span><br><span class="line">				this.ctxHeader.takePhoto(&#123;</span><br><span class="line">					quality: &#x27;high&#x27;,</span><br><span class="line">					success: (res) =&gt; &#123;</span><br><span class="line">						console.log(res)</span><br><span class="line">						this.imgUrl = res.tempImagePath</span><br><span class="line">						console.log(this.imgUrl)</span><br><span class="line">						this.urlTobase64(this.imgUrl)</span><br><span class="line">						uni.compressImage(&#123;</span><br><span class="line">							src: res.tempImagePath,</span><br><span class="line">							quality: 90, //压缩比例</span><br><span class="line">							success: ress =&gt; &#123;</span><br><span class="line">								this.newPath = ress.tempFilePath; //图片</span><br><span class="line">								console.log(this.newPath)</span><br><span class="line">								this.ingUrl = this.newPath</span><br><span class="line"></span><br><span class="line">								// this.$store.commit(&#x27;set_photo&#x27;, this.newPath)</span><br><span class="line">								// uni.navigateBack(&#123;</span><br><span class="line">								//     delta: 1</span><br><span class="line">								// &#125;);</span><br><span class="line">							&#125;</span><br><span class="line">						&#125;)</span><br><span class="line">						// var reader = new FileReader();</span><br><span class="line">						// let imgUrlBase64 = reader.readAsDataURL(this.imgUrl)</span><br><span class="line">						// console.log(imgUrlBase64)</span><br><span class="line">						// reader.onload = function(e) &#123;</span><br><span class="line">						// 	reader.result; // 读取到的base64文件流</span><br><span class="line">						// &#125;</span><br><span class="line"></span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;,</span><br><span class="line">			handleCameraError() &#123;</span><br><span class="line">				uni.showToast(&#123;</span><br><span class="line">					title: &#x27;用户拒绝使用摄像头&#x27;,</span><br><span class="line">					icon: &#x27;none&#x27;</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;,</span><br><span class="line">			reverseCamera() &#123;</span><br><span class="line">				this.devicePosition = ((&quot;back&quot; === this.devicePosition) ? &quot;front&quot; : &quot;back&quot;)</span><br><span class="line">			&#125;,</span><br><span class="line">			// 图片转base64</span><br><span class="line">			urlTobase64(url) &#123;</span><br><span class="line">				// #ifdef MP-WEIXIN</span><br><span class="line">				uni.getFileSystemManager().readFile(&#123;</span><br><span class="line">					filePath: url, //选择图片返回的相对路径</span><br><span class="line">					encoding: &#x27;base64&#x27;, //编码格式</span><br><span class="line">					success: res =&gt; &#123; //成功的回调</span><br><span class="line">						console.log(res);</span><br><span class="line">						let base64 = &#x27;data:image/jpeg;base64,&#x27; + res.data //不加上这串字符，在页面无法显示的哦</span><br><span class="line">						console.log(base64)</span><br><span class="line">					&#125;,</span><br><span class="line">					fail: (e) =&gt; &#123;</span><br><span class="line">						console.log(&quot;图片转换失败&quot;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;)</span><br><span class="line">				// #endif</span><br><span class="line"></span><br><span class="line">				// #ifndef MP-WEIXIN</span><br><span class="line">				uni.request(&#123;</span><br><span class="line">					url: url,</span><br><span class="line">					method: &#x27;GET&#x27;,</span><br><span class="line">					responseType: &#x27;arraybuffer&#x27;,</span><br><span class="line">					success: ress =&gt; &#123;</span><br><span class="line">						let base64 = wx.arrayBufferToBase64(ress.data); //把arraybuffer转成base64 </span><br><span class="line">						base64 = &#x27;data:image/jpeg;base64,&#x27; + base64 //不加上这串字符，在页面无法显示的哦</span><br><span class="line">						console.log(base64)</span><br><span class="line">					&#125;,</span><br><span class="line">					fail: (e) =&gt; &#123;</span><br><span class="line">						console.log(&quot;图片转换失败&quot;);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;)</span><br><span class="line">				// #endif</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">	.content &#123;</span><br><span class="line">		display: flex;</span><br><span class="line">		flex-direction: column;</span><br><span class="line">		// align-items: center;</span><br><span class="line">		justify-content: center;</span><br><span class="line">		background: #fff;</span><br><span class="line">		box-sizing: border-box;</span><br><span class="line">		height: 100%;</span><br><span class="line">		width: 100vw;</span><br><span class="line"></span><br><span class="line">		.btns &#123;</span><br><span class="line">			display: flex;</span><br><span class="line">			justify-content: space-around;</span><br><span class="line">			align-items: center;</span><br><span class="line"></span><br><span class="line">			.item &#123;</span><br><span class="line">				width: 100rpx;</span><br><span class="line">				height: 100rpx;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>





<h1 id="自定义属性"><a href="#自定义属性" class="headerlink" title="自定义属性"></a>自定义属性</h1><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;scroll-view scroll-x=&quot;true&quot; class=&quot;scroll-list&quot;&gt;</span><br><span class="line">				&lt;image @click=&quot;lookMe&quot; :data-Index=&quot;index&quot; class=&quot;plot-image&quot; v-for=&quot;(item,index) in popularMovies&quot; :key=&quot;item.id&quot; :src=&quot;item.imgUrl&quot; mode=&quot;&quot; &gt;&lt;/image&gt;</span><br><span class="line">&lt;/scroll-view&gt;</span><br><span class="line"></span><br><span class="line">&lt;Script&gt;</span><br><span class="line">	export default &#123;</span><br><span class="line">        methods: &#123;</span><br><span class="line">            lookMe(e) &#123;</span><br><span class="line">                    let list = []</span><br><span class="line">                     this.popularMovies.forEach(item =&gt; &#123;</span><br><span class="line">                        list.push(item.imgUrl)</span><br><span class="line"></span><br><span class="line">                    &#125;)</span><br><span class="line"></span><br><span class="line">                    // 拿到 以 自定义属性 :data-Index=&quot;index&quot;</span><br><span class="line">                    let idx = e.currentTarget.dataset.index</span><br><span class="line">                    console.log( e.currentTarget.dataset);</span><br><span class="line">                    uni.previewImage(&#123;</span><br><span class="line">                        urls: list,</span><br><span class="line">                        current: list[idx]</span><br><span class="line">                    &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/Script&gt;</span><br></pre></td></tr></table></figure></div>



<h2 id="uniapp-自定义相机-人脸识别"><a href="#uniapp-自定义相机-人脸识别" class="headerlink" title="uniapp 自定义相机 人脸识别"></a>uniapp 自定义相机 人脸识别</h2><p><a class="link"   target="_blank" rel="noopener" href="https://ext.dcloud.net.cn/plugin?id=4892" >https://ext.dcloud.net.cn/plugin?id=4892 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h2 id="base64-转换"><a href="#base64-转换" class="headerlink" title="base64 转换"></a>base64 转换</h2><p><a class="link"   target="_blank" rel="noopener" href="https://ext.dcloud.net.cn/plugin?id=123" >https://ext.dcloud.net.cn/plugin?id=123 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h1 id="解决-回调地狱-Promise"><a href="#解决-回调地狱-Promise" class="headerlink" title="解决 回调地狱 ( Promise )"></a>解决 回调地狱 ( Promise )</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getData</span>()</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">getTea</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// fn(&#x27;奶茶&#x27;)</span></span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">&#x27;奶茶&#x27;</span>)</span><br><span class="line">      &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">getHotpot</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">&#x27;火锅&#x27;</span>)</span><br><span class="line">      &#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">getData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="title class_">Hotpot</span> = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">getHotpot</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Hotpot</span>)</span><br><span class="line">    <span class="keyword">let</span> tea = <span class="keyword">await</span> <span class="variable language_">this</span>.<span class="title function_">getTea</span>()</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(tea)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></div>



<h1 id="uniapp-瀑布流"><a href="#uniapp-瀑布流" class="headerlink" title="uniapp 瀑布流"></a>uniapp 瀑布流</h1><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;view class=&quot;Index&quot;&gt;</span><br><span class="line">        &lt;!-- 瀑布流布局列表 --&gt;</span><br><span class="line">        &lt;view class=&quot;pubuBox&quot;&gt;</span><br><span class="line">            &lt;view class=&quot;pubuItem&quot;&gt;</span><br><span class="line">                &lt;view class=&quot;item-masonry&quot; v-for=&quot;(item, index) in comList&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">                    &lt;image :src=&quot;item.img&quot; mode=&quot;widthFix&quot;&gt;&lt;/image&gt;</span><br><span class="line">                    &lt;view class=&quot;listtitle&quot;&gt; &lt;!-- 这是没有高度的父盒子（下半部分） --&gt;</span><br><span class="line">                        &lt;view class=&quot;listtitle1&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/view&gt;</span><br><span class="line">                        &lt;view class=&quot;listtitle2&quot;&gt;</span><br><span class="line">                            &lt;text class=&quot;listtitle2son&quot;&gt;￥&lt;/text&gt;</span><br><span class="line">                            &#123;&#123; item.commdityPrice &#125;&#125;</span><br><span class="line">                        &lt;/view&gt;</span><br><span class="line">                        &lt;view class=&quot;listtitle3&quot;&gt;</span><br><span class="line">                            来自莫成尘的旗舰店</span><br><span class="line">                        &lt;/view&gt;</span><br><span class="line">                    &lt;/view&gt;</span><br><span class="line">                &lt;/view&gt;</span><br><span class="line">            &lt;/view&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                comList: [&#123;</span><br><span class="line">                        img: &quot;http://pic1.sc.chinaz.com/Files/pic/pic9/202002/zzpic23346_s.jpg&quot;,</span><br><span class="line">                        name: &#x27;商品的名称，可以很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长&#x27;,</span><br><span class="line">                        commdityPrice: 100</span><br><span class="line">                    &#125;, &#123;</span><br><span class="line">                        img: &#x27;http://pic.sc.chinaz.com/Files/pic/pic9/202002/zzpic23327_s.jpg&#x27;,</span><br><span class="line">                        name: &#x27;商品名称会在超出两行时候自动折叠&#x27;,</span><br><span class="line">                        commdityPrice: 100</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        img: &#x27;http://pic1.sc.chinaz.com/Files/pic/pic9/202002/zzpic23343_s.jpg&#x27;,</span><br><span class="line">                        name: &#x27;只有一行标题时高度为39&#x27;,</span><br><span class="line">                        commdityPrice: 100</span><br><span class="line">                    &#125;, &#123;</span><br><span class="line">                        img: &#x27;http://pic1.sc.chinaz.com/Files/pic/pic9/202002/zzpic23343_s.jpg&#x27;,</span><br><span class="line">                        name: &#x27;具体样式您可以自定义&#x27;,</span><br><span class="line">                        commdityPrice: 100</span><br><span class="line">                    &#125;, &#123;</span><br><span class="line">                        img: &#x27;http://pic2.sc.chinaz.com/Files/pic/pic9/202002/hpic2119_s.jpg&#x27;,</span><br><span class="line">                        name: &#x27;vue的H5页面也是如此使用&#x27;,</span><br><span class="line">                        commdityPrice: 100</span><br><span class="line">                    &#125;</span><br><span class="line">                ], //商品列表</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        onShow() &#123;&#125;,</span><br><span class="line">        onLoad() &#123;&#125;,</span><br><span class="line">        methods: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped=&quot;scoped&quot; lang=&quot;scss&quot;&gt;</span><br><span class="line">    //瀑布流</span><br><span class="line">    page &#123;</span><br><span class="line">        background-color: #eee;</span><br><span class="line">        height: 100%;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .pubuBox &#123;</span><br><span class="line">        padding: 22rpx;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .pubuItem &#123;</span><br><span class="line">        column-count: 2;</span><br><span class="line">        column-gap: 20rpx;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item-masonry &#123;</span><br><span class="line">        box-sizing: border-box;</span><br><span class="line">        border-radius: 15rpx;</span><br><span class="line">        overflow: hidden;</span><br><span class="line">        background-color: #fff;</span><br><span class="line">        break-inside: avoid;</span><br><span class="line">        /*避免在元素内部插入分页符*/</span><br><span class="line">        box-sizing: border-box;</span><br><span class="line">        margin-bottom: 20rpx;</span><br><span class="line">        box-shadow: 0px 0px 28rpx 1rpx rgba(78, 101, 153, 0.14);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .item-masonry image &#123;</span><br><span class="line">        width: 100%;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .listtitle &#123;</span><br><span class="line">        padding-left: 22rpx;</span><br><span class="line">        font-size: 24rpx;</span><br><span class="line">        padding-bottom: 22rpx;</span><br><span class="line"></span><br><span class="line">        .listtitle1 &#123;</span><br><span class="line">            line-height: 39rpx;</span><br><span class="line">            text-overflow: -o-ellipsis-lastline;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">            text-overflow: ellipsis;</span><br><span class="line">            display: -webkit-box;</span><br><span class="line">            -webkit-line-clamp: 2;</span><br><span class="line">            line-clamp: 2;</span><br><span class="line">            -webkit-box-orient: vertical;</span><br><span class="line">            min-height: 39rpx;</span><br><span class="line">            max-height: 78rpx;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .listtitle2 &#123;</span><br><span class="line">            color: #ff0000;</span><br><span class="line">            font-size: 32rpx;</span><br><span class="line">            line-height: 32rpx;</span><br><span class="line">            font-weight: bold;</span><br><span class="line">            padding-top: 22rpx;</span><br><span class="line"></span><br><span class="line">            .listtitle2son &#123;</span><br><span class="line">                font-size: 32rpx;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .listtitle3 &#123;</span><br><span class="line">            font-size: 28rpx;</span><br><span class="line">            color: #909399;</span><br><span class="line">            line-height: 32rpx;</span><br><span class="line">            padding-top: 22rpx;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .Index &#123;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 100%;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></div>

<h1 id="uniapp-单行文字，隐藏的部分添加省略号"><a href="#uniapp-单行文字，隐藏的部分添加省略号" class="headerlink" title="uniapp 单行文字，隐藏的部分添加省略号"></a>uniapp 单行文字，隐藏的部分添加省略号</h1><div class="highlight-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 第一种方法 */</span></span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line"><span class="attribute">white-space</span>: nowrap; <span class="comment">/* 强制在同一行内显示所有文本 */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 第二种方法 */</span></span><br><span class="line"><span class="attribute">display</span>: -webkit-box; <span class="comment">/*弹性伸缩盒子模型显示*/</span></span><br><span class="line">-webkit-box-orient: vertical; <span class="comment">/*排列方式*/</span> </span><br><span class="line">-webkit-line-clamp: <span class="number">1</span>; <span class="comment">/*显示文本行数(这里控制多少行隐藏)*/</span></span><br><span class="line"><span class="attribute">overflow</span>: hidden; <span class="comment">/*溢出隐藏*/</span>	</span><br></pre></td></tr></table></figure></div>

<h1 id="多行文字添加省略号"><a href="#多行文字添加省略号" class="headerlink" title="多行文字添加省略号"></a>多行文字添加省略号</h1><div class="highlight-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line"><span class="attribute">display</span>: -webkit-box;</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">25px</span>;    </span><br><span class="line"><span class="attribute">max-height</span>: <span class="number">25px</span>;</span><br><span class="line"><span class="comment">/* 限制行数，这样就可以定义超过一行自动隐藏的效果了 */</span></span><br><span class="line">-webkit-line-clamp: <span class="number">1</span>;</span><br><span class="line">-webkit-box-orient: vertical;</span><br></pre></td></tr></table></figure></div>





<h1 id="使用-scroll-view-时，隐藏的部分添加不了省略号"><a href="#使用-scroll-view-时，隐藏的部分添加不了省略号" class="headerlink" title="使用 scroll-view 时，隐藏的部分添加不了省略号"></a>使用 scroll-view 时，隐藏的部分添加不了省略号</h1><p>原因是：scroll-view为了能够横向滚动设置了white-space: nowrap (文本不会换行，文本会在在同一行上继续，直到遇到<br>标签为止。)<br>解决办法：在里面的元素设置white-space：normal</p>
<div class="highlight-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">white-space</span>: normal;</span><br><span class="line"><span class="attribute">display</span>: -webkit-box; <span class="comment">/*弹性伸缩盒子模型显示*/</span></span><br><span class="line">-webkit-box-orient: vertical; <span class="comment">/*排列方式*/</span> </span><br><span class="line">-webkit-line-clamp: <span class="number">1</span>; <span class="comment">/*显示文本行数(这里控制多少行隐藏)*/</span></span><br><span class="line"><span class="attribute">overflow</span>: hidden; <span class="comment">/*溢出隐藏*/</span>	</span><br></pre></td></tr></table></figure></div>

<h1 id="购物车案例"><a href="#购物车案例" class="headerlink" title="购物车案例"></a>购物车案例</h1><p>如果 刚进入页面将一个商品加入到购物车，返回上一页面，继续浏览其他商品，也把商品加入到了购物车里面，之前做的有些错误，错误所在: 添加商品进入到购物车里面，新的商品会把旧的商品替换掉</p>
<p>如下的写法，没有错误</p>
<p>joinShopCar(): 会先判断本地存储里面有没有keys这个属性</p>
<p>如果没有，就先存，把该页面的数据存放到本地里</p>
<p>如果有，就先取出来，并进行push，把新数据push到旧数据里面，形成新旧结合</p>
<p>操作完成后，必须要把数据在存放的本地里面 🙂</p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"> <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> &#123;</span><br><span class="line">     <span class="attr">keyWords</span>: [],</span><br><span class="line">     <span class="attr">newList</span>: [],</span><br><span class="line">     <span class="attr">list</span>: &#123;&#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,<span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">newList</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;keys&#x27;</span>))</span><br><span class="line">   <span class="keyword">const</span> list = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">this</span>.<span class="property">$route</span>.<span class="property">query</span>.<span class="property">keyWords</span>)</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(list)</span><br><span class="line">   <span class="comment">// keyWords:数组</span></span><br><span class="line">   <span class="comment">// list: 对象</span></span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">keyWords</span>.<span class="title function_">push</span>(list)</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">list</span> = list</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">keyWords</span>, <span class="variable language_">this</span>.<span class="property">newList</span>)</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">methods</span>: &#123;</span><br><span class="line"><span class="comment">// 加入购物车</span></span><br><span class="line">   <span class="title function_">joinShopCar</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="comment">// 如果本地存储里面没有的话，就先去存一下</span></span><br><span class="line">     <span class="keyword">if</span> (!<span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;keys&#x27;</span>)) &#123;</span><br><span class="line">       <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;keys&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">keyWords</span>))</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">keyWords</span>)</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="comment">// 如果有点话，就直接去取出来</span></span><br><span class="line">       <span class="keyword">const</span> news = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;keys&#x27;</span>))</span><br><span class="line">       <span class="comment">// 取出来,push进新数据</span></span><br><span class="line">       news.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">list</span>)</span><br><span class="line">       <span class="comment">// 紧接着，在把新数据存进本地存储里面</span></span><br><span class="line">       <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;keys&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(news))</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(news)</span><br><span class="line">       <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">         <span class="attr">path</span>: <span class="string">&#x27;/shopcar&#x27;</span>,</span><br><span class="line">         <span class="attr">query</span>: &#123;</span><br><span class="line">           <span class="attr">details</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(news)</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="uniapp-模糊搜索"><a href="#uniapp-模糊搜索" class="headerlink" title="uniapp 模糊搜索"></a>uniapp 模糊搜索</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模糊搜索</span></span><br><span class="line"><span class="title function_">search</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// /public/pack/like/小</span></span><br><span class="line">    <span class="comment">// /public/pack/search/8872ad8b-ce2f-42be-9943-4dadcc18462b</span></span><br><span class="line">    <span class="comment">// console.log(123);</span></span><br><span class="line">    <span class="comment">// packTitle</span></span><br><span class="line">    <span class="keyword">let</span> byId;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">searchList</span> = []</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">indexList</span>.<span class="title function_">some</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.<span class="property">packTitle</span> === <span class="variable language_">this</span>.<span class="property">keyword</span>) &#123;</span><br><span class="line">            byId = item.<span class="property">packOnlineId</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(byId);</span><br><span class="line">            <span class="variable language_">this</span>.$get(<span class="string">`/public/pack/search/<span class="subst">$&#123;byId&#125;</span>`</span>)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">searchList</span> = res.<span class="property">data</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> shai = []</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">list2</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            shai.<span class="title function_">push</span>(item.<span class="property">typeName</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// console.log(shai);</span></span><br><span class="line">        <span class="keyword">if</span> (shai.<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">keyword</span>) !== -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// this.searchList = []						</span></span><br><span class="line">            <span class="variable language_">this</span>.$post(<span class="string">`/public/pack/like/<span class="subst">$&#123;<span class="variable language_">this</span>.keyword&#125;</span>`</span>)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">searchList</span> = res.<span class="property">data</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line">    <span class="comment">// 失去焦点</span></span><br><span class="line">    <span class="title function_">blurInput</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">searchList</span> = []</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure></div>



<h3 id="uniapp-模糊搜索-最优解"><a href="#uniapp-模糊搜索-最优解" class="headerlink" title="uniapp 模糊搜索 - 最优解"></a>uniapp 模糊搜索 - 最优解</h3><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;searchView&#x27;</span>,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="comment">// 搜索的关键字</span></span><br><span class="line">      <span class="attr">keyWords</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="comment">// 显示第一个tabbar的图标</span></span><br><span class="line">      <span class="attr">active</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="comment">// 历史记录</span></span><br><span class="line">      <span class="attr">history</span>: [],</span><br><span class="line">      <span class="comment">// 热门搜索</span></span><br><span class="line">      <span class="attr">hot</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">0</span>,</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;照片&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;springboot&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">          <span class="attr">title</span>: <span class="string">&#x27;打印&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="comment">// 测试数据</span></span><br><span class="line">      <span class="attr">demoList</span>: [</span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//   id: 0,</span></span><br><span class="line">        <span class="comment">//   title: &#x27;demo&#x27;,</span></span><br><span class="line">        <span class="comment">//   money: &#x27;￥30.00&#x27;,</span></span><br><span class="line">        <span class="comment">//   old: &#x27;￥34.00&#x27;,</span></span><br><span class="line">        <span class="comment">//   imgUrl: &#x27;https://hbimg.huaban.com/d2cf60f94efd20919ffbe3f3e7b64f31ed0fbe6a4f83d-kZFZQw&#x27;,</span></span><br><span class="line">        <span class="comment">//   type: &#x27;手机数码&#x27;</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//   id: 1,</span></span><br><span class="line">        <span class="comment">//   title: &#x27;照片&#x27;,</span></span><br><span class="line">        <span class="comment">//   money: &#x27;￥30.00&#x27;,</span></span><br><span class="line">        <span class="comment">//   old: &#x27;￥34.00&#x27;,</span></span><br><span class="line">        <span class="comment">//   imgUrl: &#x27;https://hbimg.huaban.com/d2cf60f94efd20919ffbe3f3e7b64f31ed0fbe6a4f83d-kZFZQw&#x27;,</span></span><br><span class="line">        <span class="comment">//   type: &#x27;手机数码&#x27;</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//   id: 2,</span></span><br><span class="line">        <span class="comment">//   title: &#x27;hhh&#x27;,</span></span><br><span class="line">        <span class="comment">//   money: &#x27;￥30.00&#x27;,</span></span><br><span class="line">        <span class="comment">//   old: &#x27;￥34.00&#x27;,</span></span><br><span class="line">        <span class="comment">//   imgUrl: &#x27;https://hbimg.huaban.com/d2cf60f94efd20919ffbe3f3e7b64f31ed0fbe6a4f83d-kZFZQw&#x27;,</span></span><br><span class="line">        <span class="comment">//   type: &#x27;家用办公&#x27;</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="comment">// &#123;</span></span><br><span class="line">        <span class="comment">//   id: 3,</span></span><br><span class="line">        <span class="comment">//   title: &#x27;demo01&#x27;,</span></span><br><span class="line">        <span class="comment">//   money: &#x27;￥30.00&#x27;,</span></span><br><span class="line">        <span class="comment">//   old: &#x27;￥34.00&#x27;,</span></span><br><span class="line">        <span class="comment">//   imgUrl: &#x27;https://hbimg.huaban.com/d2cf60f94efd20919ffbe3f3e7b64f31ed0fbe6a4f83d-kZFZQw&#x27;,</span></span><br><span class="line">        <span class="comment">//   type: &#x27;手机数码&#x27;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">list</span>: [],</span><br><span class="line">      <span class="attr">searchList</span>: [],</span><br><span class="line">      <span class="comment">// 去重的数组</span></span><br><span class="line">      <span class="attr">newArr</span>: [],</span><br><span class="line">      <span class="attr">show</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$https</span>.<span class="title function_">reqGetSearch</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">demoList</span> = res.<span class="property">data</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">demoList</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">demoList</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">list</span>.<span class="title function_">push</span>(item)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;HISTORY&#x27;</span>)) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">history</span> = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;HISTORY&#x27;</span>))</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;HISTORY&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">history</span>))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="comment">// 搜索框获取焦点</span></span><br><span class="line">    <span class="title function_">focusSearchIpt</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;focusSearchIpt&#x27;</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">searchList</span> = []</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">newArr</span> = []</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">list</span>)</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">list</span>[i].<span class="property">title</span>.<span class="title function_">match</span>(<span class="variable language_">this</span>.<span class="property">keyWords</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">searchList</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">list</span>[i])</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 数组去重</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">searchList</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">newArr</span>.<span class="title function_">indexOf</span>(item.<span class="property">title</span>) === -<span class="number">1</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">newArr</span>.<span class="title function_">push</span>(item)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 搜索框失去焦点</span></span><br><span class="line">    <span class="title function_">blurSearchIpt</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// this.newArr = []</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">newArr</span>)</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;blurSearchIpt&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 搜索框发生变化</span></span><br><span class="line">    <span class="title function_">changeSearchIpt</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">searchList</span> = []</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">newArr</span> = []</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">list</span>)</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">list</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">list</span>[i].<span class="property">title</span>.<span class="title function_">match</span>(<span class="variable language_">this</span>.<span class="property">keyWords</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">searchList</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">list</span>[i])</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">searchList</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">newArr</span>.<span class="title function_">indexOf</span>(item.<span class="property">title</span>) === -<span class="number">1</span>) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">newArr</span>.<span class="title function_">push</span>(item)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// console.log(this.newArr)</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 确定搜索</span></span><br><span class="line">    <span class="title function_">submitIpt</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">history</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">keyWords</span>: <span class="variable language_">this</span>.<span class="property">keyWords</span>,</span><br><span class="line">        <span class="attr">show</span>: <span class="literal">true</span></span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;HISTORY&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">history</span>))</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">close</span>(<span class="params">item</span>) &#123;</span><br><span class="line">      item.<span class="property">show</span> = <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 清空本地缓存</span></span><br><span class="line">    <span class="title function_">deleteHistory</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">12</span>)</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">removeItem</span>(<span class="string">&#x27;HISTORY&#x27;</span>)</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">history</span> = []</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 跳转页面</span></span><br><span class="line">    <span class="title function_">classIfication</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&#x27;/classIfication&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></div>





<h1 id="ApiCloud-ajax封装"><a href="#ApiCloud-ajax封装" class="headerlink" title="ApiCloud ajax封装"></a>ApiCloud ajax封装</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> baseUrl = <span class="string">&#x27;https://www.fastmock.site/mock/6cafb4310e0b643f616f09aee9afea54/api&#x27;</span></span><br><span class="line"><span class="keyword">var</span> apiAjax = &#123;</span><br><span class="line">	<span class="attr">post</span>:<span class="function">(<span class="params">url,data,method=<span class="string">&#x27;post&#x27;</span></span>)=&gt;</span>&#123;</span><br><span class="line">	    <span class="comment">// var userInfo = $api.getStorage(&#x27;user_info&#x27;);</span></span><br><span class="line">	    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">	        api.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">	            <span class="attr">url</span>: baseUrl+url,</span><br><span class="line">	            <span class="attr">method</span>: method,</span><br><span class="line">	            <span class="attr">headers</span>: &#123;</span><br><span class="line">	                <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json;charset=utf-8&#x27;</span>,</span><br><span class="line">	                <span class="comment">// &#x27;Authorization&#x27;: (userInfo&amp;&amp;userInfo.AccessToken) || &quot;&quot;,</span></span><br><span class="line">	            &#125;,</span><br><span class="line">	            <span class="attr">data</span>: &#123;</span><br><span class="line">	                <span class="attr">body</span>: data</span><br><span class="line">	            &#125;</span><br><span class="line">	        &#125;, <span class="function">(<span class="params">ret, err</span>)=&gt;</span> &#123;</span><br><span class="line">	            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(ret));</span><br><span class="line">	            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err));</span><br><span class="line">	            <span class="keyword">if</span>(ret)&#123;</span><br><span class="line">	                <span class="keyword">if</span>(ret.<span class="property">success</span>)&#123;</span><br><span class="line">	                    <span class="title function_">resolve</span>(ret);</span><br><span class="line">	                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	                    <span class="comment">// ELEMENT.Message.error(ret.message);</span></span><br><span class="line">	                    <span class="title function_">reject</span>(ret.<span class="property">message</span>);</span><br><span class="line">	                &#125;</span><br><span class="line">	            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	                <span class="comment">// var code = err.statusCode;</span></span><br><span class="line">	                <span class="comment">// console.log(`code$&#123;code&#125;`);</span></span><br><span class="line">	                <span class="comment">// if(code==401)&#123;</span></span><br><span class="line">	                <span class="comment">//     ELEMENT.Message.error(&#x27;登录已过期，请重新登录&#x27;);</span></span><br><span class="line">	                <span class="comment">//     setTimeout(()=&gt;&#123;</span></span><br><span class="line">	                <span class="comment">//         api.openWin(&#123;</span></span><br><span class="line">	                <span class="comment">//             name: &#x27;login&#x27;,</span></span><br><span class="line">	                <span class="comment">//             url: &#x27;widget://html/login.html&#x27;,</span></span><br><span class="line">	                <span class="comment">//             reload:true,</span></span><br><span class="line">	                <span class="comment">//         &#125;);</span></span><br><span class="line">	                <span class="comment">//         $api.setStorage(&#x27;user_info&#x27;,null);</span></span><br><span class="line">	                <span class="comment">//     &#125;,1500)</span></span><br><span class="line">	                <span class="comment">// &#125;else&#123;</span></span><br><span class="line">	                <span class="comment">//     reject(err.message);</span></span><br><span class="line">	                <span class="comment">// &#125;</span></span><br><span class="line">	            &#125;</span><br><span class="line">	        &#125;);</span><br><span class="line">	    &#125;)</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">get</span>:<span class="function">(<span class="params">url,data</span>)=&gt;</span>&#123;</span><br><span class="line">	    <span class="comment">// var userInfo = $api.getStorage(&#x27;user_info&#x27;);</span></span><br><span class="line">	    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">	        api.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">	            <span class="attr">url</span>: baseUrl+url,</span><br><span class="line">	            <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">	            <span class="attr">headers</span>: &#123;</span><br><span class="line">	                <span class="comment">// &#x27;Authorization&#x27;: (userInfo&amp;&amp;userInfo.AccessToken) || &quot;&quot;,</span></span><br><span class="line">	            &#125;,</span><br><span class="line">	            <span class="attr">data</span>: &#123;</span><br><span class="line">	                <span class="attr">values</span>: data</span><br><span class="line">	            &#125;</span><br><span class="line">	        &#125;, <span class="function">(<span class="params">ret, err</span>)=&gt;</span> &#123;</span><br><span class="line">	            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(ret));</span><br><span class="line">	            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err));</span><br><span class="line">	            <span class="keyword">if</span>(ret)&#123;</span><br><span class="line">	                <span class="keyword">if</span>(ret.<span class="property">code</span>)&#123;</span><br><span class="line">	                    <span class="title function_">resolve</span>(ret);</span><br><span class="line">	                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	                    <span class="comment">// ELEMENT.Message.error(ret.message);</span></span><br><span class="line">	                    <span class="title function_">reject</span>(ret.<span class="property">message</span>)</span><br><span class="line">	                &#125;</span><br><span class="line">	            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">	                <span class="comment">// var code = err.statusCode;</span></span><br><span class="line">	                <span class="comment">// console.log(`code$&#123;code&#125;`);</span></span><br><span class="line">	                <span class="comment">// if(code==401)&#123;</span></span><br><span class="line">	                <span class="comment">//     ELEMENT.Message.error(&#x27;登录已过期，请重新登录&#x27;);</span></span><br><span class="line">	                <span class="comment">//     setTimeout(()=&gt;&#123;</span></span><br><span class="line">	                <span class="comment">//         api.openWin(&#123;</span></span><br><span class="line">	                <span class="comment">//             name: &#x27;login&#x27;,</span></span><br><span class="line">	                <span class="comment">//             url: &#x27;widget://html/login.html&#x27;,</span></span><br><span class="line">	                <span class="comment">//             reload:true,</span></span><br><span class="line">	                <span class="comment">//         &#125;);</span></span><br><span class="line">	                <span class="comment">//         $api.setStorage(&#x27;user_info&#x27;,null);</span></span><br><span class="line">	                <span class="comment">//     &#125;,1500)</span></span><br><span class="line">	                <span class="comment">// &#125;else&#123;</span></span><br><span class="line">	                <span class="comment">//     reject(err.message);</span></span><br><span class="line">	                <span class="comment">// &#125;</span></span><br><span class="line">	            &#125;</span><br><span class="line">	        &#125;);</span><br><span class="line">	    &#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">window</span>.<span class="property">apiAjax</span> = apiAjax;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> apiAjax</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>



<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> apiAjax <span class="keyword">from</span> <span class="string">&#x27;../../api/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">getApiInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(apiAjax)</span><br><span class="line">    apiAjax.<span class="title function_">get</span>(<span class="string">&#x27;/getShopCar&#x27;</span>)</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>) </span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// apiAjax.get(&quot;/getShopCar&quot;).then(res =&gt; &#123;</span></span><br><span class="line">    <span class="comment">// 	//请求成功的操作</span></span><br><span class="line">    <span class="comment">// 	console.log(res)</span></span><br><span class="line">    <span class="comment">// &#125;).catch(() =&gt; &#123;</span></span><br><span class="line">    <span class="comment">// 	//请求失败的操作</span></span><br><span class="line">    <span class="comment">// &#125;).finally(() =&gt; &#123;</span></span><br><span class="line">    <span class="comment">// 	//请求完成的操作</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></div>





<h2 id="路由传参-params和query区别"><a href="#路由传参-params和query区别" class="headerlink" title="路由传参 params和query区别"></a>路由传参 params和query区别</h2><p>![路由传参 params和query区别](D:\前端\笔记\typora\好嗨哦\WEB\Vue\路由传参 params和query区别.png)</p>
<h1 id="Echarts-主题更改"><a href="#Echarts-主题更改" class="headerlink" title="Echarts 主题更改"></a>Echarts 主题更改</h1><p><a class="link"   target="_blank" rel="noopener" href="https://echarts.apache.org/zh/theme-builder.html" >网址 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="D:\前端\笔记\typora\好嗨哦\WEB\Vue\echarts主题更改.png"
                      alt="Echarts主题更改"
                ></p>
<h1 id="主题切换"><a href="#主题切换" class="headerlink" title="主题切换"></a>主题切换</h1><div class="highlight-container" data-rel="Css"><figure class="iseeu highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.dark</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Html"><figure class="iseeu highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>toggle<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> body = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;body&#x27;</span>)</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>,<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  body.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;dark&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(body.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;dark&#x27;</span>))</span><br><span class="line">  <span class="comment">// 判断类型是否存在</span></span><br><span class="line">  <span class="keyword">if</span>(body.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&#x27;dark&#x27;</span>)) &#123;</span><br><span class="line">    <span class="comment">// body.innerHTML = &#x27;黑色&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>



<h1 id="js-去除数组中重复的对象"><a href="#js-去除数组中重复的对象" class="headerlink" title="js 去除数组中重复的对象"></a>js 去除数组中重复的对象</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> list = [</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;score&quot;</span>:<span class="string">&quot;基础分&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;2&quot;</span>,<span class="string">&quot;score&quot;</span>:<span class="string">&quot;社会贡献&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;2&quot;</span>,<span class="string">&quot;score&quot;</span>:<span class="string">&quot;社会贡献&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;3&quot;</span>,<span class="string">&quot;score&quot;</span>:<span class="string">&quot;工程质量&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;4&quot;</span>,<span class="string">&quot;score&quot;</span>:<span class="string">&quot;信用评价&quot;</span>&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> hash = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> newData = [...list]</span><br><span class="line">list = newData.<span class="title function_">reduce</span>(<span class="keyword">function</span> (<span class="params">item, next</span>) &#123;</span><br><span class="line">    hash[next.<span class="property">value</span>] ? <span class="string">&#x27;&#x27;</span> : hash[next.<span class="property">value</span>] = <span class="literal">true</span> &amp;&amp; item.<span class="title function_">push</span>(next);</span><br><span class="line">    <span class="keyword">return</span> item</span><br><span class="line">&#125;, [])</span><br><span class="line"></span><br><span class="line"># 输出结果</span><br><span class="line"><span class="keyword">var</span> list = [</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;score&quot;</span>:<span class="string">&quot;基础分&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;2&quot;</span>,<span class="string">&quot;score&quot;</span>:<span class="string">&quot;社会贡献&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;3&quot;</span>,<span class="string">&quot;score&quot;</span>:<span class="string">&quot;工程质量&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;4&quot;</span>,<span class="string">&quot;score&quot;</span>:<span class="string">&quot;信用评价&quot;</span>&#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">剩下两种可能会有效</span><br><span class="line"> <span class="comment">// 第一种方法</span></span><br><span class="line"><span class="keyword">let</span> set = <span class="keyword">new</span> <span class="title class_">Set</span>(<span class="variable language_">this</span>.<span class="property">list1</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(set)</span><br><span class="line"><span class="comment">// 第二种方法</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">12</span>)</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">arr</span> = <span class="variable language_">this</span>.<span class="property">list1</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">list1</span>.<span class="title function_">indexOf</span>(item) === index)</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">list1</span>.<span class="title function_">indexOf</span>(item) === index</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>



<h1 id="js-禁止-ctrl-鼠标滚轮键-进行改变页面的大小"><a href="#js-禁止-ctrl-鼠标滚轮键-进行改变页面的大小" class="headerlink" title="js 禁止 ctrl + 鼠标滚轮键,进行改变页面的大小"></a>js 禁止 ctrl + 鼠标滚轮键,进行改变页面的大小</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> &lt;script&gt;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mousewheel&#x27;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">      e = e || <span class="variable language_">window</span>.<span class="property">event</span>;</span><br><span class="line">      <span class="keyword">if</span> ((e.<span class="property">wheelDelta</span> &amp;&amp; event.<span class="property">ctrlKey</span>) || e.<span class="property">detail</span>) &#123;</span><br><span class="line">        event.<span class="title function_">preventDefault</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, &#123; <span class="attr">capture</span>: <span class="literal">false</span>, <span class="attr">passive</span>: <span class="literal">false</span>&#125;);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;keydown&#x27;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> ((event.<span class="property">ctrlKey</span> === <span class="literal">true</span> || event.<span class="property">metaKey</span> === <span class="literal">true</span>)</span><br><span class="line">        &amp;&amp; (event.<span class="property">keyCode</span> === <span class="number">61</span> || event.<span class="property">keyCode</span> === <span class="number">107</span></span><br><span class="line">          || event.<span class="property">keyCode</span> === <span class="number">173</span> || event.<span class="property">keyCode</span> === <span class="number">109</span></span><br><span class="line">          || event.<span class="property">keyCode</span> === <span class="number">187</span> || event.<span class="property">keyCode</span> === <span class="number">189</span>)) &#123;</span><br><span class="line">        event.<span class="title function_">preventDefault</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="literal">false</span>);</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">作者：曾经的你d</span><br><span class="line">链接：<span class="attr">https</span>:<span class="comment">//juejin.cn/post/7080321228765921294</span></span><br><span class="line">来源：稀土掘金</span><br><span class="line">著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure></div>

<h1 id="JS合并数组对象中key相同的数据（将数组里某个属性相同的对象合并成一个数组）两种方案"><a href="#JS合并数组对象中key相同的数据（将数组里某个属性相同的对象合并成一个数组）两种方案" class="headerlink" title="JS合并数组对象中key相同的数据（将数组里某个属性相同的对象合并成一个数组）两种方案"></a>JS合并数组对象中key相同的数据（将数组里某个属性相同的对象合并成一个数组）两种方案</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> resData = [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;住院医疗最高报销&quot;</span>,</span><br><span class="line">        <span class="string">&quot;tagName&quot;</span>: <span class="string">&quot;医疗&quot;</span>,</span><br><span class="line">        <span class="string">&quot;insuredAmount&quot;</span>: <span class="string">&quot;6000&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;身故赔付&quot;</span>,</span><br><span class="line">        <span class="string">&quot;tagName&quot;</span>: <span class="string">&quot;寿险&quot;</span>,</span><br><span class="line">        <span class="string">&quot;insuredAmount&quot;</span>: <span class="string">&quot;36.00&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;烦死了免费陈述事实&quot;</span>,</span><br><span class="line">        <span class="string">&quot;tagName&quot;</span>: <span class="string">&quot;寿险&quot;</span>,</span><br><span class="line">        <span class="string">&quot;insuredAmount&quot;</span>: <span class="string">&quot;8888.00&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;你好，噜噜噜&quot;</span>,</span><br><span class="line">        <span class="string">&quot;tagName&quot;</span>: <span class="string">&quot;寿险&quot;</span>,</span><br><span class="line">        <span class="string">&quot;insuredAmount&quot;</span>: <span class="string">&quot;66.00&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;120种重大疾病确诊赔付&quot;</span>,</span><br><span class="line">        <span class="string">&quot;tagName&quot;</span>: <span class="string">&quot;重疾&quot;</span>,</span><br><span class="line">        <span class="string">&quot;insuredAmount&quot;</span>: <span class="string">&quot;350000&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>



<p><code>想要的结果: </code></p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title class_">Data</span> = [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;tagName&quot;</span>: <span class="string">&quot;医疗&quot;</span>,</span><br><span class="line">        <span class="attr">dataInfo</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;住院医疗最高报销&quot;</span>,</span><br><span class="line">            <span class="string">&quot;tagName&quot;</span>: <span class="string">&quot;医疗&quot;</span>,</span><br><span class="line">            <span class="string">&quot;insuredAmount&quot;</span>: <span class="string">&quot;6000&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;tagName&quot;</span>: <span class="string">&quot;寿险&quot;</span>,</span><br><span class="line">        <span class="attr">dataInfo</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;身故赔付&quot;</span>,</span><br><span class="line">            <span class="string">&quot;tagName&quot;</span>: <span class="string">&quot;寿险&quot;</span>,</span><br><span class="line">            <span class="string">&quot;insuredAmount&quot;</span>: <span class="string">&quot;36.00&quot;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;烦死了免费陈述事实&quot;</span>,</span><br><span class="line">            <span class="string">&quot;tagName&quot;</span>: <span class="string">&quot;寿险&quot;</span>,</span><br><span class="line">            <span class="string">&quot;insuredAmount&quot;</span>: <span class="string">&quot;8888.00&quot;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;你好，噜噜噜&quot;</span>,</span><br><span class="line">            <span class="string">&quot;tagName&quot;</span>: <span class="string">&quot;寿险&quot;</span>,</span><br><span class="line">            <span class="string">&quot;insuredAmount&quot;</span>: <span class="string">&quot;66.00&quot;</span></span><br><span class="line">          &#125;,</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;tagName&quot;</span>: <span class="string">&quot;重疾&quot;</span>,</span><br><span class="line">        <span class="attr">dataInfo</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;120种重大疾病确诊赔付&quot;</span>,</span><br><span class="line">            <span class="string">&quot;tagName&quot;</span>: <span class="string">&quot;重疾&quot;</span>,</span><br><span class="line">            <span class="string">&quot;insuredAmount&quot;</span>: <span class="string">&quot;350000&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>



<p><code>方法一: </code></p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> dataInfo = &#123;&#125;;</span><br><span class="line">resData.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">let</span> &#123; tagName &#125; = item;</span><br><span class="line">	<span class="keyword">if</span> (!dataInfo[tagName]) &#123;</span><br><span class="line">		dataInfo[tagName] = &#123;</span><br><span class="line">			tagName,			</span><br><span class="line">			<span class="attr">child</span>: []</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	dataInfo[tagName].<span class="property">child</span>.<span class="title function_">push</span>(item);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">let</span> list = <span class="title class_">Object</span>.<span class="title function_">values</span>(dataInfo); <span class="comment">// list 转换成功的数据</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(list)</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>



<p><code>方法二: </code></p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> tempArr = [];</span><br><span class="line"><span class="keyword">let</span> <span class="title class_">Data</span> = [];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; resData.<span class="property">length</span>; i++) &#123;</span><br><span class="line">   <span class="keyword">if</span> (tempArr.<span class="title function_">indexOf</span>(resData[i].<span class="property">tagName</span>) === -<span class="number">1</span>) &#123;</span><br><span class="line">     <span class="title class_">Data</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">       <span class="attr">tagName</span>: resData[i].<span class="property">tagName</span>,</span><br><span class="line">       <span class="attr">dataInfo</span>: [resData[i]]</span><br><span class="line">     &#125;);</span><br><span class="line">     tempArr.<span class="title function_">push</span>(resData[i].<span class="property">tagName</span>);</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="title class_">Data</span>.<span class="property">length</span>; j++) &#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="title class_">Data</span>[j].<span class="property">tagName</span> == resData[i].<span class="property">tagName</span>) &#123;</span><br><span class="line">         <span class="title class_">Data</span>[j].<span class="property">dataInfo</span>.<span class="title function_">push</span>(resData[i]);</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Data</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>





<h1 id="js-计算俩个日期之间相差的天数-，以及相差的日期的数组"><a href="#js-计算俩个日期之间相差的天数-，以及相差的日期的数组" class="headerlink" title="js 计算俩个日期之间相差的天数 ，以及相差的日期的数组"></a>js 计算俩个日期之间相差的天数 ，以及相差的日期的数组</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// js 计算俩个日期之间相差的天数 ，以及相差的日期的数组</span></span><br><span class="line">   <span class="title function_">diffDaysArr</span>(<span class="params">start, end</span>) &#123;</span><br><span class="line">     <span class="keyword">let</span> s = <span class="keyword">new</span> <span class="title class_">Date</span>(start).<span class="title function_">getTime</span>()</span><br><span class="line">     <span class="keyword">const</span> e = <span class="keyword">new</span> <span class="title class_">Date</span>(end).<span class="title function_">getTime</span>()</span><br><span class="line">     <span class="keyword">let</span> arr = []</span><br><span class="line">     <span class="keyword">while</span> (s &lt;= e) &#123;</span><br><span class="line">       arr.<span class="title function_">push</span>(s)</span><br><span class="line">       s = s + <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span></span><br><span class="line">     &#125;</span><br><span class="line">     arr = arr.<span class="title function_">map</span>(<span class="function"><span class="params">ele</span> =&gt;</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">formatDate</span>(ele)</span><br><span class="line">     &#125;)</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(arr)</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">createTime</span> = arr</span><br><span class="line">     <span class="keyword">return</span> arr</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="title function_">formatDate</span>(<span class="params">time</span>) &#123;</span><br><span class="line">     <span class="keyword">const</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(time)</span><br><span class="line">     <span class="keyword">const</span> y = date.<span class="title function_">getFullYear</span>()</span><br><span class="line">     <span class="keyword">let</span> m = date.<span class="title function_">getMonth</span>() + <span class="number">1</span></span><br><span class="line">     m = m &lt; <span class="number">10</span> ? <span class="string">&#x27;0&#x27;</span> + m : m</span><br><span class="line">     <span class="keyword">let</span> d = date.<span class="title function_">getDate</span>()</span><br><span class="line">     d = d &lt; <span class="number">10</span> ? <span class="string">&#x27;0&#x27;</span> + d : d</span><br><span class="line">     <span class="keyword">return</span> y + <span class="string">&#x27;-&#x27;</span> + m + <span class="string">&#x27;-&#x27;</span> + d</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure></div>

<h1 id="去重数组，并累加数据"><a href="#去重数组，并累加数据" class="headerlink" title="去重数组，并累加数据"></a>去重数组，并累加数据</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 根据商品名称和商品属性，将重复的数据进行去重，并把重复的数据num值进行累加</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">arr</span> = <span class="variable language_">this</span>.<span class="property">list</span></span><br><span class="line"><span class="keyword">let</span> len = <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="property">length</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; len; j++) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">arr</span>[i])</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">arr</span>[i].<span class="property">shopTitle</span> === <span class="variable language_">this</span>.<span class="property">arr</span>[j].<span class="property">shopTitle</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">arr</span>[i].<span class="property">orderShopChoose</span> === <span class="variable language_">this</span>.<span class="property">arr</span>[j].<span class="property">orderShopChoose</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">arr</span>[i].<span class="property">orderMath</span> += <span class="variable language_">this</span>.<span class="property">arr</span>[j].<span class="property">orderMath</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">arr</span>.<span class="title function_">splice</span>(j, <span class="number">1</span>)</span><br><span class="line">            len-- <span class="comment">// 减少循环次数提高性能</span></span><br><span class="line">            j-- <span class="comment">// 保证j的值自加后不变</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>





<h1 id="多重过滤"><a href="#多重过滤" class="headerlink" title="多重过滤"></a>多重过滤</h1><p><code>condition: 要过滤的规则</code></p>
<p><code>data: 要过滤的原数组</code></p>
<div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">filters</span>(<span class="params">condition, data</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> data.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="title function_">keys</span>(condition).<span class="title function_">every</span>(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title class_">String</span>(item[key]).<span class="title function_">toLowerCase</span>().<span class="title function_">includes</span>(</span><br><span class="line">                <span class="title class_">String</span>(condition[key]).<span class="title function_">trim</span>().<span class="title function_">toLowerCase</span>())</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h1 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数组去重</span></span><br><span class="line"><span class="keyword">let</span> len = <span class="variable language_">this</span>.<span class="property">sums</span>.<span class="property">length</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; len; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">sums</span>[i].<span class="property">id</span> === <span class="variable language_">this</span>.<span class="property">sums</span>[j].<span class="property">id</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">sums</span>.<span class="title function_">splice</span>(j, <span class="number">1</span>)</span><br><span class="line">            len-- <span class="comment">// 减少循环次数提高性能</span></span><br><span class="line">            j-- <span class="comment">// 保证j的值自加后不变</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h1 id="去除两个数组里面相同的数据"><a href="#去除两个数组里面相同的数据" class="headerlink" title="去除两个数组里面相同的数据"></a>去除两个数组里面相同的数据</h1><div class="highlight-container" data-rel="Js"><figure class="iseeu highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">arr</span> = <span class="variable language_">this</span>.<span class="property">friends</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> !<span class="variable language_">this</span>.<span class="property">ofInGroupMembers</span>.<span class="title function_">some</span>(<span class="function">(<span class="params">ele</span>) =&gt;</span> ele.<span class="property">userId</span> === item.<span class="property">id</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;newArr &#x27;</span>, <span class="variable language_">this</span>.<span class="property">arr</span> );</span><br></pre></td></tr></table></figure></div>



<h1 id="uniapp-中的地图申请"><a href="#uniapp-中的地图申请" class="headerlink" title="uniapp 中的地图申请"></a>uniapp 中的地图申请</h1><div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. keytool -list -v -keystore test.keystore  </span><br><span class="line">密钥库口令: keystore</span><br></pre></td></tr></table></figure></div>

<p><img  
                     lazyload
                     src="/images/loading.svg"
                     data-src="D:\前端\笔记\typora\md\WEB\Vue\生成sha1证书.png"
                     
                >ve</p>

            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul>
        <li><strong>Title:</strong> </li>
        <li><strong>Author:</strong> The Redefine Team</li>
        <li><strong>Created at:</strong> 2023-04-30 14:31:50</li>
        
            <li>
                <strong>Updated at:</strong> 2023-04-04 15:05:09
            </li>
        
        <li>
            <strong>Link:</strong> https://redefine.ohevan.com/2023/04/30/Vue 案例/
        </li>
        <li>
            <strong>License:</strong> This work is licensed under <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a>.
        </li>
    </ul>
</div>

                </div>
            

            

            

            
                <div class="article-nav">
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/2023/04/30/hello-world/"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item">Hello World</span>
                                    <span class="post-nav-item">Next posts</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            


            
                <div class="comment-container">
                    <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fa-solid fa-comments"></i>&nbsp;Comments
    </div>
    

        
            
 
    <div id="waline"></div>
    <script type="module"  data-pjax>
        import { init } from 'https://evan.beee.top/js/waline.mjs';

        function loadWaline() {
            init({
                el: '#waline',
                serverURL: 'https://example.example.com',
                lang: 'zh-CN',
                dark: 'body[class~="dark-mode"]',
                requiredMeta: ['nick','mail'], // cannot customize by theme config, change it yourself
            });
        }

        if ('true') {
            const loadWalineTimeout = setTimeout(() => {
                loadWaline();
                clearTimeout(loadWalineTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadWaline);
        }
        
    </script>



        
    
</div>

                </div>
            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">On this page</div>
        <div class="page-title"></div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue-%E6%A1%88%E4%BE%8B"><span class="nav-text">Vue 案例</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%8B%8D%E7%85%A7%E4%B8%8A%E4%BC%A0"><span class="nav-text">&#x3D;&#x3D;拍照上传&#x3D;&#x3D;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#token-%E5%8A%A0%E4%B8%8D%E4%B8%8A%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="nav-text">&#x3D;&#x3D;token&#x3D;&#x3D;加不上的原因</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E7%82%B9"><span class="nav-text">重点:</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91%E5%99%A8"><span class="nav-text">&#x3D;&#x3D;富文本编辑器&#x3D;&#x3D;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E7%BC%96%E8%BE%91%E5%99%A8"><span class="nav-text">&#x3D;&#x3D;代码编辑器&#x3D;&#x3D;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E7%BB%84%E4%BB%B6"><span class="nav-text">&#x3D;&#x3D;视频播放组件&#x3D;&#x3D;</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%86%E9%A2%91%E6%92%AD%E6%94%BE%E7%BB%84%E4%BB%B6-1"><span class="nav-text">视频播放组件 </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%A6%E6%83%85%E4%BD%BF%E7%94%A8%E6%96%B9%E6%A1%88"><span class="nav-text">详情使用方案 </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%99%E4%B8%AA%E7%BB%84%E4%BB%B6%E6%8C%96%E7%9A%84%E4%B8%80%E4%B8%AA%E5%B0%8F%E5%9D%91"><span class="nav-text">这个组件挖的一个小坑</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B7%A8%E5%9F%9F"><span class="nav-text">跨域</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Github"><span class="nav-text">Github</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%8E%E5%8F%B0%E6%A8%A1%E6%9D%BF"><span class="nav-text">后台模板</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#css-%E8%BF%99%E6%A0%B7%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E5%9B%BE%E7%89%87"><span class="nav-text">css 这样添加背景图片 (@)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E9%87%8C%E5%8C%85%E7%9D%80%E5%AF%B9%E8%B1%A1-%E8%BF%9B%E8%A1%8C%E5%88%A0%E6%8E%89%E9%87%8D%E5%A4%8D%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-text">数组里包着对象,进行删掉重复的数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Echarts-%E7%9A%84%E6%B0%B4%E7%90%83%E6%95%88%E6%9E%9C"><span class="nav-text">Echarts 的水球效果</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AF%8C%E6%96%87%E6%9C%AC%E8%A7%A3%E6%9E%90-v-html%E4%B8%8D%E8%B5%B7%E6%95%88%E7%9A%84%E6%97%B6%E5%80%99"><span class="nav-text">&#x3D;&#x3D;富文本解析 (v-html不起效的时候)&#x3D;&#x3D;</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E7%9A%84%E6%97%B6%E9%97%B4"><span class="nav-text">获取页面加载的时间</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E8%81%94%E7%BD%91"><span class="nav-text">判断是否联网</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9B%9E%E8%BD%A6%E5%8D%B3%E7%99%BB%E5%BD%95"><span class="nav-text">回车即登录</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#set-%E7%94%A8%E6%B3%95"><span class="nav-text">$set 用法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9C%B0%E5%9B%BE%E7%BB%84%E4%BB%B6"><span class="nav-text">地图组件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BF%98%E6%98%AF-%E7%99%BE%E5%BA%A6%E5%A5%BD%E7%94%A8"><span class="nav-text">还是 百度好用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E8%AF%A6%E7%BB%86%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%E7%BB%8F%E7%BA%AC%E5%BA%A6"><span class="nav-text">根据详细地址转换经纬度</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E7%BB%8F%E7%BA%AC%E5%BA%A6%E8%BD%AC%E6%8D%A2%E6%88%90%E7%9C%81%E4%BB%BD%E3%80%81%E5%B8%82"><span class="nav-text">根据经纬度转换成省份、市</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%AB%98%E5%BE%B7%E8%8E%B7%E5%8F%96%E5%AE%9A%E4%BD%8D"><span class="nav-text">高德获取定位</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3bmap%E6%9C%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">解决bmap未定义的问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0-Vuex%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%8C%81%E4%B9%85%E5%8C%96"><span class="nav-text">实现 Vuex数据存储持久化</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Git-%E4%BD%BF%E7%94%A8"><span class="nav-text">Git 使用</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#es6-%E4%B8%AD%E6%96%B0%E5%A2%9E%E7%9A%84-%E6%B8%85%E9%99%A4data%E9%87%8C%E9%9D%A2%E6%95%B0%E6%8D%AE-%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-text">es6 中新增的 清除data里面数据 的方法</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%80%91%E5%B8%83%E6%B5%81"><span class="nav-text">瀑布流</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#uni-App-%E7%9A%84%E5%9C%B0%E5%9B%BE"><span class="nav-text">uni-App 的地图</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80"><span class="nav-text">方法一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C"><span class="nav-text">方法二</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%B8%89"><span class="nav-text">方法三</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#uni-App-%E8%8E%B7%E5%8F%96%E8%87%AA%E5%B7%B1%E7%9A%84%E7%BB%8F%E7%BA%AC%E5%BA%A6"><span class="nav-text">uni-App  获取自己的经纬度</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%B0%E5%9B%BE"><span class="nav-text">地图</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#uni-app-%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB"><span class="nav-text">uni-app 人脸识别</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7"><span class="nav-text">自定义属性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#uniapp-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%B8%E6%9C%BA-%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB"><span class="nav-text">uniapp 自定义相机 人脸识别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#base64-%E8%BD%AC%E6%8D%A2"><span class="nav-text">base64 转换</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3-%E5%9B%9E%E8%B0%83%E5%9C%B0%E7%8B%B1-Promise"><span class="nav-text">解决 回调地狱 ( Promise )</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#uniapp-%E7%80%91%E5%B8%83%E6%B5%81"><span class="nav-text">uniapp 瀑布流</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#uniapp-%E5%8D%95%E8%A1%8C%E6%96%87%E5%AD%97%EF%BC%8C%E9%9A%90%E8%97%8F%E7%9A%84%E9%83%A8%E5%88%86%E6%B7%BB%E5%8A%A0%E7%9C%81%E7%95%A5%E5%8F%B7"><span class="nav-text">uniapp 单行文字，隐藏的部分添加省略号</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%9A%E8%A1%8C%E6%96%87%E5%AD%97%E6%B7%BB%E5%8A%A0%E7%9C%81%E7%95%A5%E5%8F%B7"><span class="nav-text">多行文字添加省略号</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-scroll-view-%E6%97%B6%EF%BC%8C%E9%9A%90%E8%97%8F%E7%9A%84%E9%83%A8%E5%88%86%E6%B7%BB%E5%8A%A0%E4%B8%8D%E4%BA%86%E7%9C%81%E7%95%A5%E5%8F%B7"><span class="nav-text">使用 scroll-view 时，隐藏的部分添加不了省略号</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%A1%88%E4%BE%8B"><span class="nav-text">购物车案例</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#uniapp-%E6%A8%A1%E7%B3%8A%E6%90%9C%E7%B4%A2"><span class="nav-text">uniapp 模糊搜索</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#uniapp-%E6%A8%A1%E7%B3%8A%E6%90%9C%E7%B4%A2-%E6%9C%80%E4%BC%98%E8%A7%A3"><span class="nav-text">uniapp 模糊搜索 - 最优解</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ApiCloud-ajax%E5%B0%81%E8%A3%85"><span class="nav-text">ApiCloud ajax封装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82-params%E5%92%8Cquery%E5%8C%BA%E5%88%AB"><span class="nav-text">路由传参 params和query区别</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Echarts-%E4%B8%BB%E9%A2%98%E6%9B%B4%E6%94%B9"><span class="nav-text">Echarts 主题更改</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E4%B8%BB%E9%A2%98%E5%88%87%E6%8D%A2"><span class="nav-text">主题切换</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#js-%E5%8E%BB%E9%99%A4%E6%95%B0%E7%BB%84%E4%B8%AD%E9%87%8D%E5%A4%8D%E7%9A%84%E5%AF%B9%E8%B1%A1"><span class="nav-text">js 去除数组中重复的对象</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#js-%E7%A6%81%E6%AD%A2-ctrl-%E9%BC%A0%E6%A0%87%E6%BB%9A%E8%BD%AE%E9%94%AE-%E8%BF%9B%E8%A1%8C%E6%94%B9%E5%8F%98%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%A4%A7%E5%B0%8F"><span class="nav-text">js 禁止 ctrl + 鼠标滚轮键,进行改变页面的大小</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JS%E5%90%88%E5%B9%B6%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E4%B8%ADkey%E7%9B%B8%E5%90%8C%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%88%E5%B0%86%E6%95%B0%E7%BB%84%E9%87%8C%E6%9F%90%E4%B8%AA%E5%B1%9E%E6%80%A7%E7%9B%B8%E5%90%8C%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%90%88%E5%B9%B6%E6%88%90%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84%EF%BC%89%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%A1%88"><span class="nav-text">JS合并数组对象中key相同的数据（将数组里某个属性相同的对象合并成一个数组）两种方案</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#js-%E8%AE%A1%E7%AE%97%E4%BF%A9%E4%B8%AA%E6%97%A5%E6%9C%9F%E4%B9%8B%E9%97%B4%E7%9B%B8%E5%B7%AE%E7%9A%84%E5%A4%A9%E6%95%B0-%EF%BC%8C%E4%BB%A5%E5%8F%8A%E7%9B%B8%E5%B7%AE%E7%9A%84%E6%97%A5%E6%9C%9F%E7%9A%84%E6%95%B0%E7%BB%84"><span class="nav-text">js 计算俩个日期之间相差的天数 ，以及相差的日期的数组</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8E%BB%E9%87%8D%E6%95%B0%E7%BB%84%EF%BC%8C%E5%B9%B6%E7%B4%AF%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="nav-text">去重数组，并累加数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%A4%9A%E9%87%8D%E8%BF%87%E6%BB%A4"><span class="nav-text">多重过滤</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D"><span class="nav-text">数组去重</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8E%BB%E9%99%A4%E4%B8%A4%E4%B8%AA%E6%95%B0%E7%BB%84%E9%87%8C%E9%9D%A2%E7%9B%B8%E5%90%8C%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-text">去除两个数组里面相同的数据</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#uniapp-%E4%B8%AD%E7%9A%84%E5%9C%B0%E5%9B%BE%E7%94%B3%E8%AF%B7"><span class="nav-text">uniapp 中的地图申请</span></a></li></ol>

    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>
            
            

        </div>

        <div class="main-content-footer">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info">
            &copy;
            
              <span>2022</span>
              -
            
            2023&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">The Redefine Team</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">
                        VISITOR COUNT&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">
                        TOTAL PAGE VIEWS&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            <span class="powered-by-container">POWERED BY <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a></span>
                <br>
            <span class="theme-version-container">THEME&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.1.2</a>
        </div>
        
        
        
            <div id="start_div" style="display:none">
                2022/8/17 11:45:14
            </div>
            <div>
                Blog up for <span class="odometer" id="runtime_days" ></span> days <span class="odometer" id="runtime_hours"></span> hrs <span class="odometer" id="runtime_minutes"></span> Min <span class="odometer" id="runtime_seconds"></span> Sec
            </div>
        
        
        
            <script async data-pjax>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    


</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/layouts/navbarShrink.js"></script>

<script src="/js/tools/scrollTopBottom.js"></script>

<script src="/js/tools/lightDarkSwitch.js"></script>





    
<script src="/js/tools/codeBlock.js"></script>




    
<script src="/js/layouts/lazyload.js"></script>




    
<script src="/js/tools/runtime.js"></script>

    
<script src="/js/layouts/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js"></script>







<div class="post-scripts pjax">
    
        
<script src="/js/tools/tocToggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/layouts/toc.js"></script>

<script src="/js/plugins/tabs.js"></script>

    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax',
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            Global.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            Global.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            Global.refresh();
        });
    });
</script>




</body>
</html>
